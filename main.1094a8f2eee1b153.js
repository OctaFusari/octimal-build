"use strict";(self.webpackChunkoctimal=self.webpackChunkoctimal||[]).push([[179],{398:()=>{function pn(n){return"function"==typeof n}function em(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const A0=em(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Sh(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ps{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(pn(r))try{r()}catch(s){e=s instanceof A0?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{$3(s)}catch(o){e=e??[],o instanceof A0?e=[...e,...o.errors]:e.push(o)}}if(e)throw new A0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$3(e);else{if(e instanceof ps){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Sh(t,e)}remove(e){const{_finalizers:t}=this;t&&Sh(t,e),e instanceof ps&&e._removeParent(this)}}ps.EMPTY=(()=>{const n=new ps;return n.closed=!0,n})();const G3=ps.EMPTY;function W3(n){return n instanceof ps||n&&"closed"in n&&pn(n.remove)&&pn(n.add)&&pn(n.unsubscribe)}function $3(n){pn(n)?n():n.unsubscribe()}const Ru={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},M0={setTimeout(n,e,...t){const{delegate:r}=M0;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=M0;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function j3(n){M0.setTimeout(()=>{const{onUnhandledError:e}=Ru;if(!e)throw n;e(n)})}function PI(){}const Bie=DI("C",void 0,void 0);function DI(n,e,t){return{kind:n,value:e,error:t}}let Pu=null;function R0(n){if(Ru.useDeprecatedSynchronousErrorHandling){const e=!Pu;if(e&&(Pu={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Pu;if(Pu=null,t)throw r}}else n()}class NI extends ps{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,W3(e)&&e.add(this)):this.destination=qie}static create(e,t,r){return new tm(e,t,r)}next(e){this.isStopped?kI(function Hie(n){return DI("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?kI(function zie(n){return DI("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kI(Bie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Wie=Function.prototype.bind;function OI(n,e){return Wie.call(n,e)}class $ie{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){P0(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){P0(r)}else P0(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){P0(t)}}}class tm extends NI{constructor(e,t,r){let i;if(super(),pn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ru.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&OI(e.next,s),error:e.error&&OI(e.error,s),complete:e.complete&&OI(e.complete,s)}):i=e}this.destination=new $ie(i)}}function P0(n){Ru.useDeprecatedSynchronousErrorHandling?function Gie(n){Ru.useDeprecatedSynchronousErrorHandling&&Pu&&(Pu.errorThrown=!0,Pu.error=n)}(n):j3(n)}function kI(n,e){const{onStoppedNotification:t}=Ru;t&&M0.setTimeout(()=>t(n,e))}const qie={closed:!0,next:PI,error:function jie(n){throw n},complete:PI},LI="function"==typeof Symbol&&Symbol.observable||"@@observable";function ll(n){return n}function q3(n){return 0===n.length?ll:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let jn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Xie(n){return n&&n instanceof NI||function Yie(n){return n&&pn(n.next)&&pn(n.error)&&pn(n.complete)}(n)&&W3(n)}(t)?t:new tm(t,r,i);return R0(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=K3(r))((i,s)=>{const o=new tm({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[LI](){return this}pipe(...t){return q3(t)(this)}toPromise(t){return new(t=K3(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function K3(n){var e;return null!==(e=n??Ru.Promise)&&void 0!==e?e:Promise}const Qie=em(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let go=(()=>{class n extends jn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Y3(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Qie}next(t){R0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){R0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){R0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?G3:(this.currentObservers=null,s.push(t),new ps(()=>{this.currentObservers=null,Sh(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new jn;return t.source=this,t}}return n.create=(e,t)=>new Y3(e,t),n})();class Y3 extends go{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:G3}}function X3(n){return pn(n?.lift)}function fr(n){return e=>{if(X3(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pr(n,e,t,r,i){return new Q3(n,e,t,r,i)}class Q3 extends NI{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function gn(n,e){return fr((t,r)=>{let i=0;t.subscribe(pr(r,s=>{r.next(n.call(e,s,i++))}))})}function VI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function ul(n){return this instanceof ul?(this.v=n,this):new ul(n)}function tB(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function zI(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const nB=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function rB(n){return pn(n?.then)}function iB(n){return pn(n[LI])}function sB(n){return Symbol.asyncIterator&&pn(n?.[Symbol.asyncIterator])}function oB(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const aB=function yse(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cB(n){return pn(n?.[aB])}function lB(n){return function eB(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function c(h){h.value instanceof ul?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ul(t.read());if(i)return yield ul(void 0);yield yield ul(r)}}finally{t.releaseLock()}})}function uB(n){return pn(n?.getReader)}function Vs(n){if(n instanceof jn)return n;if(null!=n){if(iB(n))return function vse(n){return new jn(e=>{const t=n[LI]();if(pn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(nB(n))return function Ese(n){return new jn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(rB(n))return function wse(n){return new jn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,j3)})}(n);if(sB(n))return dB(n);if(cB(n))return function Tse(n){return new jn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(uB(n))return function bse(n){return dB(lB(n))}(n)}throw oB(n)}function dB(n){return new jn(e=>{(function xse(n,e){var t,r,i,s;return function Z3(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=tB(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function sc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function $r(n,e,t=1/0){return pn(e)?$r((r,i)=>gn((s,o)=>e(r,s,i,o))(Vs(n(r,i))),t):("number"==typeof e&&(t=e),fr((r,i)=>function Sse(n,e,t,r,i,s,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;Vs(t(g,u++)).subscribe(pr(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){const _=c.shift();o?sc(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(pr(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function Ih(n=1/0){return $r(ll,n)}const ha=new jn(n=>n.complete());function HI(n){return n[n.length-1]}function nm(n){return function Cse(n){return n&&pn(n.schedule)}(HI(n))?n.pop():void 0}function D0(n,e=0){return fr((t,r)=>{t.subscribe(pr(r,i=>sc(r,n,()=>r.next(i),e),()=>sc(r,n,()=>r.complete(),e),i=>sc(r,n,()=>r.error(i),e)))})}function N0(n,e=0){return fr((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function hB(n,e){if(!n)throw new Error("Iterable cannot be null");return new jn(t=>{sc(t,e,()=>{const r=n[Symbol.asyncIterator]();sc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function di(n,e){return e?function kse(n,e){if(null!=n){if(iB(n))return function Rse(n,e){return Vs(n).pipe(N0(e),D0(e))}(n,e);if(nB(n))return function Dse(n,e){return new jn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(rB(n))return function Pse(n,e){return Vs(n).pipe(N0(e),D0(e))}(n,e);if(sB(n))return hB(n,e);if(cB(n))return function Nse(n,e){return new jn(t=>{let r;return sc(t,e,()=>{r=n[aB](),sc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>pn(r?.return)&&r.return()})}(n,e);if(uB(n))return function Ose(n,e){return hB(lB(n),e)}(n,e)}throw oB(n)}(n,e):Vs(n)}class mo extends go{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Je(...n){return di(n,nm(n))}function fB(n={}){const{connector:e=(()=>new go),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return fr((g,m)=>{l++,!d&&!u&&h();const _=c=c??e();m.add(()=>{l--,0===l&&!d&&!u&&(a=GI(p,i))}),_.subscribe(m),!o&&l>0&&(o=new tm({next:y=>_.next(y),error:y=>{d=!0,h(),a=GI(f,t,y),_.error(y)},complete:()=>{u=!0,h(),a=GI(f,r),_.complete()}}),Vs(g).subscribe(o))})(s)}}function GI(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new tm({next:()=>{r.unsubscribe(),n()}});return Vs(e(...t)).subscribe(r)}function _o(n,e){return fr((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(pr(r,c=>{i?.unsubscribe();let l=0;const u=s++;Vs(n(c,u)).subscribe(i=pr(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function pB(n,e=ll){return n=n??Fse,fr((t,r)=>{let i,s=!0;t.subscribe(pr(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Fse(n,e){return n===e}function ln(n){for(let e in n)if(n[e]===ln)return e;throw Error("Could not find renamed property on target object.")}function kr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(kr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function WI(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Use=ln({__forward_ref__:ln});function $I(n){return n.__forward_ref__=$I,n.toString=function(){return kr(this())},n}function it(n){return jI(n)?n():n}function jI(n){return"function"==typeof n&&n.hasOwnProperty(Use)&&n.__forward_ref__===$I}function qI(n){return n&&!!n.\u0275providers}class ge extends Error{constructor(e,t){super(function k0(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function sn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():function dt(n){return"string"==typeof n?n:null==n?"":String(n)}(n)}function KI(n,e){throw new ge(-201,!1)}function yo(n,e){null==n&&function tt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lr(n){return{providers:n.providers||[],imports:n.imports||[]}}function L0(n){return mB(n,U0)||mB(n,_B)}function mB(n,e){return n.hasOwnProperty(e)?n[e]:null}function F0(n){return n&&(n.hasOwnProperty(YI)||n.hasOwnProperty(jse))?n[YI]:null}const U0=ln({\u0275prov:ln}),YI=ln({\u0275inj:ln}),_B=ln({ngInjectableDef:ln}),jse=ln({ngInjectorDef:ln});var Vt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Vt||{});let XI;function gs(n){const e=XI;return XI=n,e}function vB(n,e,t){const r=L0(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Vt.Optional?null:void 0!==e?e:void KI(kr(n))}const xn=globalThis;class De{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const rm={},tC="__NG_DI_FLAG__",V0="ngTempTokenPath",Yse=/\n/gm,wB="__source";let Ch;function dl(n){const e=Ch;return Ch=n,e}function Zse(n,e=Vt.Default){if(void 0===Ch)throw new ge(-203,!1);return null===Ch?vB(n,void 0,e):Ch.get(n,e&Vt.Optional?null:void 0,e)}function Ve(n,e=Vt.Default){return(function yB(){return XI}()||Zse)(it(n),e)}function Fe(n,e=Vt.Default){return Ve(n,B0(e))}function B0(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function nC(n){const e=[];for(let t=0;t<n.length;t++){const r=it(n[t]);if(Array.isArray(r)){if(0===r.length)throw new ge(900,!1);let i,s=Vt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=Jse(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(Ve(i,s))}else e.push(Ve(r))}return e}function im(n,e){return n[tC]=e,n.prototype[tC]=e,n}function Jse(n){return n[tC]}function oc(n){return{toString:n}.toString()}var z0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(z0||{}),Vo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vo||{});const fa={},Zt=[],H0=ln({\u0275cmp:ln}),rC=ln({\u0275dir:ln}),iC=ln({\u0275pipe:ln}),bB=ln({\u0275mod:ln}),ac=ln({\u0275fac:ln}),sm=ln({__NG_ELEMENT_ID__:ln}),xB=ln({__NG_ENV_ID__:ln});function SB(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function sC(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];CB(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function IB(n){return 3===n||4===n||6===n}function CB(n){return 64===n.charCodeAt(0)}function om(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||AB(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function AB(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const MB="ng-template";function noe(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==SB(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function RB(n){return 4===n.type&&n.value!==MB}function roe(n,e,t){return e===(4!==n.type||t?n.value:MB)}function ioe(n,e,t){let r=4;const i=n.attrs||[],s=function aoe(n){for(let e=0;e<n.length;e++)if(IB(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!roe(n,c,t)||""===c&&1===e.length){if(Bo(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!noe(n.attrs,l,t)){if(Bo(r))return!1;o=!0}continue}const d=soe(8&r?"class":c,i,RB(n),t);if(-1===d){if(Bo(r))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==SB(f,l,0)||2&r&&l!==h){if(Bo(r))return!1;o=!0}}}}else{if(!o&&!Bo(r)&&!Bo(c))return!1;if(o&&Bo(c))continue;o=!1,r=c|1&r}}return Bo(r)||o}function Bo(n){return 0==(1&n)}function soe(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function coe(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function PB(n,e,t=!1){for(let r=0;r<e.length;r++)if(ioe(n,e[r],t))return!0;return!1}function DB(n,e){return n?":not("+e.trim()+")":e}function uoe(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Bo(o)&&(e+=DB(s,i),i=""),r=o,s=s||!Bo(r);t++}return""!==i&&(e+=DB(s,i)),e}function Ah(n){return oc(()=>{const e=OB(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===z0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vo.Emulated,styles:n.styles||Zt,_:null,schemas:n.schemas||null,tView:null,id:""};kB(t);const r=n.dependencies;return t.directiveDefs=G0(r,!1),t.pipeDefs=G0(r,!0),t.id=function _oe(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function oC(n,e,t){const r=n.\u0275cmp;r.directiveDefs=G0(e,!1),r.pipeDefs=G0(t,!0)}function foe(n){return jt(n)||hi(n)}function poe(n){return null!==n}function jr(n){return oc(()=>({type:n.type,bootstrap:n.bootstrap||Zt,declarations:n.declarations||Zt,imports:n.imports||Zt,exports:n.exports||Zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function NB(n,e){if(null==n)return fa;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function $i(n){return oc(()=>{const e=OB(n);return kB(e),e})}function jt(n){return n[H0]||null}function hi(n){return n[rC]||null}function ji(n){return n[iC]||null}function zs(n,e){const t=n[bB]||null;if(!t&&!0===e)throw new Error(`Type ${kr(n)} does not have '\u0275mod' property.`);return t}function OB(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||fa,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:NB(n.inputs,e),outputs:NB(n.outputs)}}function kB(n){n.features?.forEach(e=>e(n))}function G0(n,e){if(!n)return null;const t=e?ji:foe;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(poe)}const nr=0,Me=1,Et=2,zn=3,zo=4,am=5,Ii=6,Rh=7,gr=8,hl=9,Ph=10,ht=11,cm=12,LB=13,Dh=14,mr=15,lm=16,Nh=17,pa=18,um=19,FB=20,fl=21,cc=22,dm=23,hm=24,Bt=25,aC=1,UB=2,ga=7,Oh=9,fi=11;function _s(n){return Array.isArray(n)&&"object"==typeof n[aC]}function qi(n){return Array.isArray(n)&&!0===n[aC]}function cC(n){return 0!=(4&n.flags)}function Nu(n){return n.componentOffset>-1}function $0(n){return 1==(1&n.flags)}function Ho(n){return!!n.template}function lC(n){return 0!=(512&n[Et])}function Ou(n,e){return n.hasOwnProperty(ac)?n[ac]:null}let pi=null,j0=!1;function vo(n){const e=pi;return pi=n,e}const zB={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function GB(n){if(!pm(n)||n.dirty){if(!n.producerMustRecompute(n)&&!jB(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function $B(n){n.dirty=!0,function WB(n){if(void 0===n.liveConsumerNode)return;const e=j0;j0=!0;try{for(const t of n.liveConsumerNode)t.dirty||$B(t)}finally{j0=e}}(n),n.consumerMarkedDirty?.(n)}function dC(n){return n&&(n.nextProducerIndex=0),vo(n)}function hC(n,e){if(vo(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(pm(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)q0(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function jB(n){kh(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(GB(t),r!==t.version))return!0}return!1}function qB(n){if(kh(n),pm(n))for(let e=0;e<n.producerNode.length;e++)q0(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function q0(n,e){if(function YB(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),kh(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)q0(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];kh(i),i.producerIndexOfThis[r]=e}}function pm(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function kh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let XB=null;const ez=()=>{},Roe=(()=>({...zB,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:ez}))();class Poe{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ku(){return tz}function tz(n){return n.type.prototype.ngOnChanges&&(n.setInput=Noe),Doe}function Doe(){const n=rz(this),e=n?.current;if(e){const t=n.previous;if(t===fa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Noe(n,e,t,r){const i=this.declaredInputs[t],s=rz(n)||function Ooe(n,e){return n[nz]=e}(n,{previous:fa,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new Poe(c&&c.currentValue,e,a===fa),n[r]=e}ku.ngInherit=!0;const nz="__ngSimpleChanges__";function rz(n){return n[nz]||null}const ma=function(n,e,t){},iz="svg";function Sn(n){for(;Array.isArray(n);)n=n[nr];return n}function ys(n,e){return Sn(e[n.index])}function oz(n,e){return n.data[e]}function Hs(n,e){const t=e[n];return _s(t)?t:t[nr]}function gl(n,e){return null==e?null:n[e]}function az(n){n[Nh]=0}function Boe(n){1024&n[Et]||(n[Et]|=1024,lz(n,1))}function cz(n){1024&n[Et]&&(n[Et]&=-1025,lz(n,-1))}function lz(n,e){let t=n[zn];if(null===t)return;t[am]+=e;let r=t;for(t=t[zn];null!==t&&(1===e&&1===r[am]||-1===e&&0===r[am]);)t[am]+=e,r=t,t=t[zn]}const nt={lFrame:Ez(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hz(){return nt.bindingsEnabled}function te(){return nt.lFrame.lView}function qt(){return nt.lFrame.tView}function on(n){return nt.lFrame.contextLView=n,n[gr]}function an(n){return nt.lFrame.contextLView=null,n}function gi(){let n=fz();for(;null!==n&&64===n.type;)n=n.parent;return n}function fz(){return nt.lFrame.currentTNode}function _a(n,e){const t=nt.lFrame;t.currentTNode=n,t.isParent=e}function _C(){return nt.lFrame.isParent}function Zoe(n,e){const t=nt.lFrame;t.bindingIndex=t.bindingRootIndex=n,vC(e)}function vC(n){nt.lFrame.currentDirectiveIndex=n}function _z(){return nt.lFrame.currentQueryIndex}function wC(n){nt.lFrame.currentQueryIndex=n}function eae(n){const e=n[Me];return 2===e.type?e.declTNode:1===e.type?n[Ii]:null}function yz(n,e,t){if(t&Vt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Vt.Host||(i=eae(s),null===i||(s=s[Dh],10&i.type))););if(null===i)return!1;e=i,n=s}const r=nt.lFrame=vz();return r.currentTNode=e,r.lView=n,!0}function TC(n){const e=vz(),t=n[Me];nt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vz(){const n=nt.lFrame,e=null===n?null:n.child;return null===e?Ez(n):e}function Ez(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function wz(){const n=nt.lFrame;return nt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Tz=wz;function bC(){const n=wz();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Yi(){return nt.lFrame.selectedIndex}function Lu(n){nt.lFrame.selectedIndex=n}function st(){nt.lFrame.currentNamespace=iz}function at(){!function iae(){nt.lFrame.currentNamespace=null}()}let xz=!0;function Y0(){return xz}function ml(n){xz=n}function X0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Q0(n,e,t){Sz(n,e,3,t)}function Z0(n,e,t,r){(3&n[Et])===t&&Sz(n,e,t,r)}function xC(n,e){let t=n[Et];(3&t)===e&&(t&=8191,t+=1,n[Et]=t)}function Sz(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Nh]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Nh]+=65536),(a<s||-1==s)&&(oae(n,t,e,c),n[Nh]=(4294901760&n[Nh])+c+2),c++}function Iz(n,e){ma(4,n,e);const t=vo(null);try{e.call(n)}finally{vo(t),ma(5,n,e)}}function oae(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Et]>>13<n[Nh]>>16&&(3&n[Et])===e&&(n[Et]+=8192,Iz(a,s)):Iz(a,s)}const Vh=-1;class mm{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function IC(n){return n!==Vh}function _m(n){return 32767&n}function ym(n,e){let t=function uae(n){return n>>16}(n),r=e;for(;t>0;)r=r[Dh],t--;return r}let CC=!0;function J0(n){const e=CC;return CC=n,e}const Cz=255,Az=5;let dae=0;const ya={};function eE(n,e){const t=Mz(n,e);if(-1!==t)return t;const r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,AC(r.data,n),AC(e,null),AC(r.blueprint,null));const i=tE(n,e),s=n.injectorIndex;if(IC(i)){const o=_m(i),a=ym(i,e),c=a[Me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function AC(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Mz(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function tE(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Fz(i),null===r)return Vh;if(t++,i=i[Dh],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Vh}function MC(n,e,t){!function hae(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(sm)&&(r=t[sm]),null==r&&(r=t[sm]=dae++);const i=r&Cz;e.data[n+(i>>Az)]|=1<<i}(n,e,t)}function Rz(n,e,t){if(t&Vt.Optional||void 0!==n)return n;KI()}function Pz(n,e,t,r){if(t&Vt.Optional&&void 0===r&&(r=null),!(t&(Vt.Self|Vt.Host))){const i=n[hl],s=gs(void 0);try{return i?i.get(e,r,t&Vt.Optional):vB(e,r,t&Vt.Optional)}finally{gs(s)}}return Rz(r,0,t)}function Dz(n,e,t,r=Vt.Default,i){if(null!==n){if(2048&e[Et]&&!(r&Vt.Self)){const o=function yae(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Et]&&!(512&o[Et]);){const a=Nz(s,o,t,r|Vt.Self,ya);if(a!==ya)return a;let c=s.parent;if(!c){const l=o[FB];if(l){const u=l.get(t,ya,r);if(u!==ya)return u}c=Fz(o),o=o[Dh]}s=c}return i}(n,e,t,r,ya);if(o!==ya)return o}const s=Nz(n,e,t,r,ya);if(s!==ya)return s}return Pz(e,t,r,i)}function Nz(n,e,t,r,i){const s=function gae(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(sm)?n[sm]:void 0;return"number"==typeof e?e>=0?e&Cz:_ae:e}(t);if("function"==typeof s){if(!yz(e,n,r))return r&Vt.Host?Rz(i,0,r):Pz(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Vt.Optional)return o;KI()}finally{Tz()}}else if("number"==typeof s){let o=null,a=Mz(n,e),c=Vh,l=r&Vt.Host?e[mr][Ii]:null;for((-1===a||r&Vt.SkipSelf)&&(c=-1===a?tE(n,e):e[a+8],c!==Vh&&kz(r,!1)?(o=e[Me],a=_m(c),e=ym(c,e)):a=-1);-1!==a;){const u=e[Me];if(Oz(s,a,u.data)){const d=pae(a,e,t,o,r,l);if(d!==ya)return d}c=e[a+8],c!==Vh&&kz(r,e[Me].data[a+8]===l)&&Oz(s,a,e)?(o=u,a=_m(c),e=ym(c,e)):a=-1}}return i}function pae(n,e,t,r,i,s){const o=e[Me],a=o.data[n+8],u=nE(a,o,t,null==r?Nu(a)&&CC:r!=o&&0!=(3&a.type),i&Vt.Host&&s===a);return null!==u?Fu(e,o,u,a):ya}function nE(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(i){const f=o[c];if(f&&Ho(f)&&f.type===t)return c}return null}function Fu(n,e,t,r){let i=n[t];const s=e.data;if(function aae(n){return n instanceof mm}(i)){const o=i;o.resolving&&function Vse(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ge(-200,`Circular dependency in DI detected for ${n}${t}`)}(sn(s[t]));const a=J0(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?gs(o.injectImpl):null;yz(n,r,Vt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function sae(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=tz(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&gs(l),J0(a),o.resolving=!1,Tz()}}return i}function Oz(n,e,t){return!!(t[e+(n>>Az)]&1<<n)}function kz(n,e){return!(n&Vt.Self||n&Vt.Host&&e)}class Xi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Dz(this._tNode,this._lView,e,B0(r),t)}}function _ae(){return new Xi(gi(),te())}function RC(n){return jI(n)?()=>{const e=RC(it(n));return e&&e()}:Ou(n)}function Fz(n){const e=n[Me],t=e.type;return 2===t?e.declTNode:1===t?n[Ii]:null}const zh="__parameters__";function Gh(n,e,t){return oc(()=>{const r=function PC(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(zh)?c[zh]:Object.defineProperty(c,zh,{value:[]})[zh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function $h(n,e){n.forEach(t=>Array.isArray(t)?$h(t,e):e(t))}function Vz(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function iE(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const Gt=im(Gh("Optional"),8),oE=im(Gh("SkipSelf"),4);function dE(n){return 128==(128&n.flags)}var _l=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_l||{});const FC=new Map;let Yae=0;const VC="__ngContext__";function Ci(n,e){_s(e)?(n[VC]=e[um],function Qae(n){FC.set(n[um],n)}(e)):n[VC]=e}let BC;function zC(n,e){return BC(n,e)}function xm(n){const e=n[zn];return qi(e)?e[zn]:e}function o4(n){return c4(n[cm])}function a4(n){return c4(n[zo])}function c4(n){for(;null!==n&&!qi(n);)n=n[zo];return n}function Yh(n,e,t,r,i){if(null!=r){let s,o=!1;qi(r)?s=r:_s(r)&&(o=!0,r=r[nr]);const a=Sn(r);0===n&&null!==t?null==i?h4(e,t,a):Uu(e,t,a,i||null,!0):1===n&&null!==t?Uu(e,t,a,i||null,!0):2===n?function yE(n,e,t){const r=mE(n,e);r&&function mce(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function vce(n,e,t,r,i){const s=t[ga];s!==Sn(t)&&Yh(e,n,r,s,i);for(let a=fi;a<t.length;a++){const c=t[a];Im(c[Me],c,n,e,r,s)}}(e,n,s,t,i)}}function pE(n,e,t){return n.createElement(e,t)}function u4(n,e){const t=n[Oh],r=t.indexOf(e);cz(e),t.splice(r,1)}function gE(n,e){if(n.length<=fi)return;const t=fi+e,r=n[t];if(r){const i=r[lm];null!==i&&i!==n&&u4(i,r),e>0&&(n[t-1][zo]=r[zo]);const s=iE(n,fi+e);!function cce(n,e){Im(n,e,e[ht],2,null,null),e[nr]=null,e[Ii]=null}(r[Me],r);const o=s[pa];null!==o&&o.detachView(s[Me]),r[zn]=null,r[zo]=null,r[Et]&=-129}return r}function GC(n,e){if(!(256&e[Et])){const t=e[ht];e[dm]&&qB(e[dm]),e[hm]&&qB(e[hm]),t.destroyNode&&Im(n,e,t,3,null,null),function dce(n){let e=n[cm];if(!e)return WC(n[Me],n);for(;e;){let t=null;if(_s(e))t=e[cm];else{const r=e[fi];r&&(t=r)}if(!t){for(;e&&!e[zo]&&e!==n;)_s(e)&&WC(e[Me],e),e=e[zn];null===e&&(e=n),_s(e)&&WC(e[Me],e),t=e&&e[zo]}e=t}}(e)}}function WC(n,e){if(!(256&e[Et])){e[Et]&=-129,e[Et]|=256,function gce(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof mm)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];ma(4,a,c);try{c.call(a)}finally{ma(5,a,c)}}else{ma(4,i,s);try{s.call(i)}finally{ma(5,i,s)}}}}}(n,e),function pce(n,e){const t=n.cleanup,r=e[Rh];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Rh]=null);const i=e[fl];if(null!==i){e[fl]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Me].type&&e[ht].destroy();const t=e[lm];if(null!==t&&qi(e[zn])){t!==e[zn]&&u4(t,e);const r=e[pa];null!==r&&r.detachView(n)}!function Zae(n){FC.delete(n[um])}(e)}}function $C(n,e,t){return function d4(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[nr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Vo.None||s===Vo.Emulated)return null}return ys(r,t)}}(n,e.parent,t)}function Uu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function h4(n,e,t){n.appendChild(e,t)}function f4(n,e,t,r,i){null!==r?Uu(n,e,t,r,i):h4(n,e,t)}function mE(n,e){return n.parentNode(e)}let jC,XC,m4=function g4(n,e,t){return 40&n.type?ys(n,t):null};function _E(n,e,t,r){const i=$C(n,r,e),s=e[ht],a=function p4(n,e,t){return m4(n,e,t)}(r.parent||e[Ii],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)f4(s,i,t[c],a,!1);else f4(s,i,t,a,!1);void 0!==jC&&jC(s,r,e,t,i)}function Sm(n,e){if(null!==e){const t=e.type;if(3&t)return ys(e,n);if(4&t)return qC(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Sm(n,r);{const i=n[e.index];return qi(i)?qC(-1,i):Sn(i)}}if(32&t)return zC(e,n)()||Sn(n[e.index]);{const r=y4(n,e);return null!==r?Array.isArray(r)?r[0]:Sm(xm(n[mr]),r):Sm(n,e.next)}}return null}function y4(n,e){return null!==e?n[mr][Ii].projection[e.projection]:null}function qC(n,e){const t=fi+n+1;if(t<e.length){const r=e[t],i=r[Me].firstChild;if(null!==i)return Sm(r,i)}return e[ga]}function KC(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Ci(Sn(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)KC(n,e,t.child,r,i,s,!1),Yh(e,n,i,a,s);else if(32&c){const l=zC(t,r);let u;for(;u=l();)Yh(e,n,i,u,s);Yh(e,n,i,a,s)}else 16&c?E4(n,e,r,t,i,s):Yh(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Im(n,e,t,r,i,s){KC(t,r,n.firstChild,e,i,s,!1)}function E4(n,e,t,r,i,s){const o=t[mr],c=o[Ii].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Yh(e,n,i,c[l],s);else{let l=c;const u=o[zn];dE(r)&&(l.flags|=128),KC(n,e,l,u,i,s,!0)}}function w4(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function T4(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&sC(n,e,r),null!==i&&w4(n,e,i),null!==s&&function wce(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Rm=new De("ENVIRONMENT_INITIALIZER"),L4=new De("INJECTOR",-1),F4=new De("INJECTOR_DEF_TYPES");class nA{get(e,t=rm){if(t===rm){const r=new Error(`NullInjectorError: No provider for ${kr(e)}!`);throw r.name="NullInjectorError",r}return t}}function Kce(...n){return{\u0275providers:V4(0,n),\u0275fromNgModule:!0}}function V4(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return $h(e,o=>{const a=o;TE(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&B4(i,s),t}function B4(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];rA(i,s=>{e(s,r)})}}function TE(n,e,t,r){if(!(n=it(n)))return!1;let i=null,s=F0(n);const o=!s&&jt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=F0(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)TE(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{$h(s.imports,u=>{TE(u,e,t,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&B4(l,e)}if(!a){const l=Ou(i)||(()=>new i);e({provide:i,useFactory:l,deps:Zt},i),e({provide:F4,useValue:i,multi:!0},i),e({provide:Rm,useValue:()=>Ve(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const l=n;rA(c,u=>{e(u,l)})}}}return i!==n&&void 0!==n.providers}function rA(n,e){for(let t of n)qI(t)&&(t=t.\u0275providers),Array.isArray(t)?rA(t,e):e(t)}const Yce=ln({provide:String,useValue:ln});function iA(n){return null!==n&&"object"==typeof n&&Yce in n}function Vu(n){return"function"==typeof n}const sA=new De("Set Injector scope."),bE={},Qce={};let oA;function xE(){return void 0===oA&&(oA=new nA),oA}class wo{}class Jh extends wo{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cA(e,o=>this.processProvider(o)),this.records.set(L4,ef(void 0,this)),i.has("environment")&&this.records.set(wo,ef(void 0,this));const s=this.records.get(sA);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(F4.multi,Zt,Vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=dl(this),r=gs(void 0);try{return e()}finally{dl(t),gs(r)}}get(e,t=rm,r=Vt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xB))return e[xB](this);r=B0(r);const s=dl(this),o=gs(void 0);try{if(!(r&Vt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function nle(n){return"function"==typeof n||"object"==typeof n&&n instanceof De}(e)&&L0(e);c=l&&this.injectableDefInScope(l)?ef(aA(e),bE):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Vt.Self?xE():this.parent).get(e,t=r&Vt.Optional&&t===rm?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[V0]=a[V0]||[]).unshift(kr(e)),s)throw a;return function eoe(n,e,t,r){const i=n[V0];throw e[wB]&&i.unshift(e[wB]),n.message=function toe(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=kr(e);if(Array.isArray(e))i=e.map(kr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):kr(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Yse,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[V0]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{gs(o),dl(s)}}resolveInjectorInitializers(){const e=dl(this),t=gs(void 0);try{const i=this.get(Rm.multi,Zt,Vt.Self);for(const s of i)s()}finally{dl(e),gs(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(kr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(e){let t=Vu(e=it(e))?e:it(e&&e.provide);const r=function Jce(n){return iA(n)?ef(void 0,n.useValue):ef(function G4(n,e,t){let r;if(Vu(n)){const i=it(n);return Ou(i)||aA(i)}if(iA(n))r=()=>it(n.useValue);else if(function H4(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...nC(n.deps||[]));else if(function z4(n){return!(!n||!n.useExisting)}(n))r=()=>Ve(it(n.useExisting));else{const i=it(n&&(n.useClass||n.provide));if(!function ele(n){return!!n.deps}(n))return Ou(i)||aA(i);r=()=>new i(...nC(n.deps))}return r}(n),bE)}(e);if(Vu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ef(void 0,bE,!0),i.factory=()=>nC(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===bE&&(t.value=Qce,t.value=t.factory()),"object"==typeof t.value&&t.value&&function tle(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=it(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function aA(n){const e=L0(n),t=null!==e?e.factory:Ou(n);if(null!==t)return t;if(n instanceof De)throw new ge(204,!1);if(n instanceof Function)return function Zce(n){const e=n.length;if(e>0)throw function wm(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new ge(204,!1);const t=function $se(n){return n&&(n[U0]||n[_B])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ge(204,!1)}function ef(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cA(n,e){for(const t of n)Array.isArray(t)?cA(t,e):t&&qI(t)?cA(t.\u0275providers,e):e(t)}const SE=new De("AppId",{providedIn:"root",factory:()=>rle}),rle="ng",W4=new De("Platform Initializer"),Go=new De("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$4=new De("CSP nonce",{providedIn:"root",factory:()=>function Qh(){if(void 0!==XC)return XC;if(typeof document<"u")return document;throw new ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let j4=(n,e,t)=>null;function mA(n,e,t=!1){return j4(n,e,t)}class fle{}class Y4{}class gle{resolveComponentFactory(e){throw function ple(n){const e=Error(`No component factory found for ${kr(n)}.`);return e.ngComponent=n,e}(e)}}let Nm=(()=>{class n{static#e=this.NULL=new gle}return n})();function mle(){return rf(gi(),te())}function rf(n,e){return new vl(ys(n,e))}let vl=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=mle}return n})();function _le(n){return n instanceof vl?n.nativeElement:n}class Q4{}let PE=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function yle(){const n=te(),t=Hs(gi().index,n);return(_s(t)?t:n)[ht]}()}return n})(),vle=(()=>{class n{static#e=this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>null})}return n})();class Om{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Z4=new Om("16.2.12"),vA={};function nH(n,e=null,t=null,r){const i=rH(n,e,t,r);return i.resolveInjectorInitializers(),i}function rH(n,e=null,t=null,r,i=new Set){const s=[t||Zt,Kce(n)];return r=r||("object"==typeof n?void 0:kr(n)),new Jh(s,e||xE(),r||null,i)}let Nn=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=rm;static#t=this.NULL=new nA;static create(t,r){if(Array.isArray(t))return nH({name:""},r,t,"");{const i=t.name??"";return nH({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=Xe({token:n,providedIn:"any",factory:()=>Ve(L4)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function wA(n){return n.ngOriginalError}class hc{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&wA(e);for(;t&&wA(t);)t=wA(t);return t||null}}function bA(n){return e=>{setTimeout(n,void 0,e)}}const Qi=class Ile extends go{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=bA(s),i&&(i=bA(i)),o&&(o=bA(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ps&&e.add(a),a}};function sH(...n){}class At{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qi(!1),this.onMicrotaskEmpty=new Qi(!1),this.onStable=new Qi(!1),this.onError=new Qi(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Cle(){const n="function"==typeof xn.requestAnimationFrame;let e=xn[n?"requestAnimationFrame":"setTimeout"],t=xn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Rle(n){const e=()=>{!function Mle(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,SA(n),n.isCheckStableRunning=!0,xA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),SA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Dle(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return oH(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),aH(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return oH(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),aH(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,SA(n),xA(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!At.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(At.isInAngularZone())throw new ge(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ale,sH,sH);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Ale={};function xA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function SA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function oH(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aH(n){n._nesting--,xA(n)}class Ple{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qi,this.onMicrotaskEmpty=new Qi,this.onStable=new Qi,this.onError=new Qi}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const cH=new De("",{providedIn:"root",factory:lH});function lH(){const n=Fe(At);let e=!0;return function Lse(...n){const e=nm(n),t=function Mse(n,e){return"number"==typeof HI(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Vs(r[0]):Ih(t)(di(r,e)):ha}(new jn(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new jn(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{At.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(fB()))}function fc(n){return n instanceof Function?n():n}let IA=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}return n})();function km(n){for(;n;){n[Et]|=64;const e=xm(n);if(lC(n)&&!e)return n;n=e}return null}const pH=new De("",{providedIn:"root",factory:()=>!1});let NE=null;function yH(n,e){return n[e]??wH()}function vH(n,e){const t=wH();t.producerNode?.length&&(n[e]=NE,t.lView=n,NE=EH())}const Hle={...zB,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{km(n.lView)},lView:null};function EH(){return Object.create(Hle)}function wH(){return NE??=EH(),NE}const yt={};function qr(n){TH(qt(),te(),Yi()+n,!1)}function TH(n,e,t,r){if(!r)if(3==(3&e[Et])){const s=n.preOrderCheckHooks;null!==s&&Q0(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Z0(e,s,0,t)}Lu(t)}function Qe(n,e=Vt.Default){const t=te();return null===t?Ve(n,e):Dz(gi(),t,it(n),e)}function OE(n,e,t,r,i,s,o,a,c,l,u){const d=e.blueprint.slice();return d[nr]=i,d[Et]=140|r,(null!==l||n&&2048&n[Et])&&(d[Et]|=2048),az(d),d[zn]=d[Dh]=n,d[gr]=t,d[Ph]=o||n&&n[Ph],d[ht]=a||n&&n[ht],d[hl]=c||n&&n[hl]||null,d[Ii]=s,d[um]=function Xae(){return Yae++}(),d[cc]=u,d[FB]=l,d[mr]=2==e.type?n[mr]:d,d}function cf(n,e,t,r,i){let s=n.data[e];if(null===s)s=function CA(n,e,t,r,i){const s=fz(),o=_C(),c=n.data[e]=function Xle(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Fh(){return null!==nt.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function Qoe(){return nt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function gm(){const n=nt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return _a(s,!0),s}function Lm(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xH(n,e,t,r,i){const s=yH(e,dm),o=Yi(),a=2&r;try{Lu(-1),a&&e.length>Bt&&TH(n,e,Bt,!1),ma(a?2:0,i);const l=a?s:null,u=dC(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{hC(l,u)}}finally{a&&null===e[dm]&&vH(e,dm),Lu(o),ma(a?3:1,i)}}function AA(n,e,t){if(cC(e)){const r=vo(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{vo(r)}}}function MA(n,e,t){hz()&&(function rue(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Nu(t)&&function uue(n,e,t){const r=ys(e,n),i=SH(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=kE(n,OE(n,i,null,o,r,e,null,n[Ph].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||eE(t,e),Ci(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=Fu(e,n,a,t);Ci(l,e),null!==o&&due(0,a-i,l,c,0,o),Ho(c)&&(Hs(t.index,e)[gr]=Fu(e,n,a,t))}}(n,e,t,ys(t,e)),64==(64&t.flags)&&RH(n,e,t))}function RA(n,e,t=ys){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function SH(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=PA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function PA(n,e,t,r,i,s,o,a,c,l,u){const d=Bt+r,h=d+i,f=function Wle(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:yt);return t}(d,h),p="function"==typeof l?l():l;return f[Me]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let IH=n=>null;function CH(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?AH(t,e,i,s):r.hasOwnProperty(i)&&AH(t,e,r[i],s)}return t}function AH(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function DA(n,e,t,r){if(hz()){const i=null===r?null:{"":-1},s=function sue(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(PB(e,o.selectors,!1))if(r||(r=[]),Ho(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),NA(n,e,a.length)}else r.unshift(o),NA(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&MH(n,e,t,o,i,a),i&&function oue(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ge(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=om(t.mergedAttrs,t.attrs)}function MH(n,e,t,r,i,s){for(let l=0;l<r.length;l++)MC(eE(t,e),n,r[l].type);!function cue(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Lm(n,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];t.mergedAttrs=om(t.mergedAttrs,u.hostAttrs),lue(n,t,e,c,u),aue(c,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Qle(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;c=CH(d.inputs,u,c,h?h.inputs:null),l=CH(d.outputs,u,l,p);const g=null===c||null===o||RB(e)?null:hue(c,u,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function RH(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Joe(){return nt.lFrame.currentDirectiveIndex}();try{Lu(s);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];vC(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&iue(c,l)}}finally{Lu(-1),vC(o)}}function iue(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function NA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function aue(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ho(e)&&(t[""]=n)}}function lue(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ou(i.type)),o=new mm(s,Ho(i),Qe);n.blueprint[r]=o,t[r]=o,function tue(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function nue(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Lm(n,t,i.hostVars,yt),i)}function due(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)PH(r,t,o[a++],o[a++],o[a++])}function PH(n,e,t,r,i){const s=vo(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{vo(s)}}function hue(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function DH(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function NH(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];wC(t[r]),o.contentQueries(2,e[s],s)}}}function kE(n,e){return n[cm]?n[LB][zo]=e:n[cm]=e,n[LB]=e,e}function kA(n,e,t){wC(0);const r=vo(null);try{e(n,t)}finally{vo(r)}}function OH(n){return n[Rh]||(n[Rh]=[])}function kH(n){return n.cleanup||(n.cleanup=[])}function FH(n,e){const t=n[hl],r=t?t.get(hc,null):null;r&&r.handleError(e)}function LA(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];PH(n.data[o],e[o],r,a,i)}}function fue(n,e){const t=Hs(e,n),r=t[Me];!function pue(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[nr];null!==i&&null===t[cc]&&(t[cc]=mA(i,t[hl])),FA(r,t,t[gr])}function FA(n,e,t){TC(e);try{const r=n.viewQuery;null!==r&&kA(1,r,t);const i=n.template;null!==i&&xH(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&NH(n,e),n.staticViewQueries&&kA(2,n.viewQuery,t);const s=n.components;null!==s&&function gue(n,e){for(let t=0;t<e.length;t++)fue(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Et]&=-5,bC()}}let UH=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Moe(n,e,t){const r=Object.create(Roe);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>$B(r),run:()=>{if(r.dirty=!1,r.hasRun&&!jB(r))return;r.hasRun=!0;const o=dC(r);try{r.cleanupFn(),r.cleanupFn=ez,r.fn(i)}finally{hC(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}return n})();function LE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=WI(i,a):2==s&&(r=WI(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Fm(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Sn(s)),qi(s)&&VH(s,r);const o=t.type;if(8&o)Fm(n,e,t.child,r);else if(32&o){const a=zC(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=y4(e,t);if(Array.isArray(a))r.push(...a);else{const c=xm(e[mr]);Fm(c[Me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function VH(n,e){for(let t=fi;t<n.length;t++){const r=n[t],i=r[Me].firstChild;null!==i&&Fm(r[Me],r,i,e)}n[ga]!==n[nr]&&e.push(n[ga])}function FE(n,e,t,r=!0){const i=e[Ph],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{BH(n,e,n.template,t)}catch(c){throw r&&FH(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function BH(n,e,t,r){const i=e[Et];if(256!=(256&i)){e[Ph].effectManager?.flush(),TC(e);try{az(e),function gz(n){return nt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&xH(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Q0(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Z0(e,l,0,null),xC(e,0)}if(function yue(n){for(let e=o4(n);null!==e;e=a4(e)){if(!e[UB])continue;const t=e[Oh];for(let r=0;r<t.length;r++){Boe(t[r])}}}(e),zH(e,2),null!==n.contentQueries&&NH(n,e),o){const l=n.contentCheckHooks;null!==l&&Q0(e,l)}else{const l=n.contentHooks;null!==l&&Z0(e,l,1),xC(e,1)}!function Gle(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=yH(e,hm);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Lu(~s);else{const o=s,a=t[++i],c=t[++i];Zoe(a,o),r.dirty=!1;const l=dC(r);try{c(2,e[o])}finally{hC(r,l)}}}}finally{null===e[hm]&&vH(e,hm),Lu(-1)}}(n,e);const a=n.components;null!==a&&GH(e,a,0);const c=n.viewQuery;if(null!==c&&kA(2,c,r),o){const l=n.viewCheckHooks;null!==l&&Q0(e,l)}else{const l=n.viewHooks;null!==l&&Z0(e,l,2),xC(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Et]&=-73,cz(e)}finally{bC()}}}function zH(n,e){for(let t=o4(n);null!==t;t=a4(t))for(let r=fi;r<t.length;r++)HH(t[r],e)}function vue(n,e,t){HH(Hs(e,n),t)}function HH(n,e){if(!function Uoe(n){return 128==(128&n[Et])}(n))return;const t=n[Me],r=n[Et];if(80&r&&0===e||1024&r||2===e)BH(t,n,t.template,n[gr]);else if(n[am]>0){zH(n,1);const i=t.components;null!==i&&GH(n,i,1)}}function GH(n,e,t){for(let r=0;r<e.length;r++)vue(n,e[r],t)}class Um{get rootNodes(){const e=this._lView,t=e[Me];return Fm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gr]}set context(e){this._lView[gr]=e}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[zn];if(qi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(gE(e,r),iE(t,r))}this._attachedToViewContainer=!1}GC(this._lView[Me],this._lView)}onDestroy(e){!function uz(n,e){if(256==(256&n[Et]))throw new ge(911,!1);null===n[fl]&&(n[fl]=[]),n[fl].push(e)}(this._lView,e)}markForCheck(){km(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){FE(this._lView[Me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uce(n,e){Im(n,e,e[ht],2,null,null)}(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=e}}class Eue extends Um{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;FE(e[Me],e,e[gr],!1)}checkNoChanges(){}get context(){return null}}class WH extends Nm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=jt(e);return new Vm(t,this.ngModule)}}function $H(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Tue{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=B0(r);const i=this.injector.get(e,vA,r);return i!==vA||t===vA?i:this.parentInjector.get(e,t,r)}}class Vm extends Y4{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=$H(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return $H(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function doe(n){return n.map(uoe).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof wo?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Tue(e,s):e,a=o.get(Q4,null);if(null===a)throw new ge(407,!1);const d={rendererFactory:a,sanitizer:o.get(vle,null),effectManager:o.get(UH,null),afterRenderEventManager:o.get(IA,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function $le(n,e,t,r){const s=r.get(pH,!1)||t===Vo.ShadowDom,o=n.selectRootElement(e,s);return function jle(n){IH(n)}(o),o}(h,r,this.componentDef.encapsulation,o):pE(h,f,function wue(n){const e=n.toLowerCase();return"svg"===e?iz:"math"===e?"math":null}(f)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=mA(p,o,!0));const v=PA(0,null,null,1,0,null,null,null,null,null,null),E=OE(null,v,null,_,null,null,d,h,o,null,y);let w,b;TC(E);try{const x=this.componentDef;let A,T=null;x.findHostDirectiveDefs?(A=[],T=new Map,x.findHostDirectiveDefs(x,A,T),A.push(x)):A=[x];const C=function xue(n,e){const t=n[Me],r=Bt;return n[r]=e,cf(t,r,2,"#host",null)}(E,p),F=function Sue(n,e,t,r,i,s,o){const a=i[Me];!function Iue(n,e,t,r){for(const i of n)e.mergedAttrs=om(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(LE(e,e.mergedAttrs,!0),null!==t&&T4(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=mA(e,i[hl]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=OE(i,SH(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&NA(a,n,r.length-1),kE(i,d),i[n.index]=d}(C,p,x,A,E,d,h);b=oz(v,Bt),p&&function Aue(n,e,t,r){if(r)sC(n,t,["ng-version",Z4.full]);else{const{attrs:i,classes:s}=function hoe(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Bo(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&sC(n,t,i),s&&s.length>0&&w4(n,t,s.join(" "))}}(h,x,p,r),void 0!==t&&function Mue(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(b,this.ngContentSelectors,t),w=function Cue(n,e,t,r,i,s){const o=gi(),a=i[Me],c=ys(o,i);MH(a,i,o,t,null,r);for(let u=0;u<t.length;u++)Ci(Fu(i,a,o.directiveStart+u,o),i);RH(a,i,o),c&&Ci(c,i);const l=Fu(i,a,o.directiveStart+o.componentOffset,o);if(n[gr]=i[gr]=l,null!==s)for(const u of s)u(l,e);return AA(a,o,n),l}(F,x,A,T,E,[Rue]),FA(v,E,null)}finally{bC()}return new bue(this.componentType,w,rf(b,E),E,b)}}class bue extends fle{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Eue(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;LA(s[Me],s,i,e,t),this.previousInputValues.set(e,t),km(Hs(this._tNode.index,s))}}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Rue(){const n=gi();X0(te()[Me],n)}function VE(n){return!!UA(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function UA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ai(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Mi(n,e,t,r,i,s,o,a){const c=te(),l=qt(),u=n+Bt,d=l.firstCreatePass?function sde(n,e,t,r,i,s,o,a,c){const l=e.consts,u=cf(e,n,4,o||null,gl(l,a));DA(e,t,u,gl(l,c)),X0(e,u);const d=u.tView=PA(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,i,s,o):l.data[u];_a(d,!1);const h=u5(l,c,d,n);Y0()&&_E(l,c,h,d),Ci(h,c),kE(c,c[u]=DH(h,c,h,d)),$0(d)&&MA(l,c,d),null!=o&&RA(c,d,a)}let u5=function d5(n,e,t,r){return ml(!0),e[ht].createComment("")};function en(n){return function Lh(n,e){return n[e]}(function Xoe(){return nt.lFrame.contextLView}(),Bt+n)}function Ur(n,e,t){const r=te();return Ai(r,function Uh(){return nt.lFrame.bindingIndex++}(),e)&&function Ws(n,e,t,r,i,s,o,a){const c=ys(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(LA(n,t,u,r,i),Nu(e)&&function Jle(n,e){const t=Hs(e,n);16&t[Et]||(t[Et]|=64)}(t,e.index)):3&e.type&&(r=function Zle(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}(qt(),function qn(){const n=nt.lFrame;return oz(n.tView,n.selectedIndex)}(),r,n,e,r[ht],t,!1),Ur}function $A(n,e,t,r,i){const o=i?"class":"style";LA(n,t,e.inputs[o],o,r)}function I(n,e,t,r){const i=te(),s=qt(),o=Bt+n,a=i[ht],c=s.firstCreatePass?function lde(n,e,t,r,i,s){const o=e.consts,c=cf(e,n,2,r,gl(o,i));return DA(e,t,c,gl(o,s)),null!==c.attrs&&LE(c,c.attrs,!1),null!==c.mergedAttrs&&LE(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],l=h5(s,i,c,a,e,n);i[o]=l;const u=$0(c);return _a(c,!0),T4(a,l,c),32!=(32&c.flags)&&Y0()&&_E(s,i,l,c),0===function Hoe(){return nt.lFrame.elementDepthCount}()&&Ci(l,i),function Goe(){nt.lFrame.elementDepthCount++}(),u&&(MA(s,i,c),AA(s,c,i)),null!==r&&RA(i,c),I}function P(){let n=gi();_C()?function yC(){nt.lFrame.isParent=!1}():(n=n.parent,_a(n,!1));const e=n;(function $oe(n){return nt.skipHydrationRootTNode===n})(e)&&function Yoe(){nt.skipHydrationRootTNode=null}(),function Woe(){nt.lFrame.elementDepthCount--}();const t=qt();return t.firstCreatePass&&(X0(t,n),cC(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function cae(n){return 0!=(8&n.flags)}(e)&&$A(t,e,te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lae(n){return 0!=(16&n.flags)}(e)&&$A(t,e,te(),e.stylesWithoutHost,!1),P}function ue(n,e,t,r){return I(n,e,t,r),P(),ue}let h5=(n,e,t,r,i,s)=>(ml(!0),pE(r,i,function bz(){return nt.lFrame.currentNamespace}()));function WE(){return te()}function $E(n){return!!n&&"function"==typeof n.then}function g5(n){return!!n&&"function"==typeof n.subscribe}function kt(n,e,t,r){const i=te(),s=qt(),o=gi();return function _5(n,e,t,r,i,s,o){const a=$0(r),l=n.firstCreatePass&&kH(n),u=e[gr],d=OH(e);let h=!0;if(3&r.type||o){const g=ys(r,e),m=o?o(g):g,_=d.length,y=o?E=>o(Sn(E[r.index])):r.index;let v=null;if(!o&&a&&(v=function gde(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Rh],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,h=!1;else{s=v5(r,e,u,s,!1);const E=t.listen(m,i,s);d.push(s,E),l&&l.push(i,y,_,_+1)}}else s=v5(r,e,u,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const w=e[p[m]][p[m+1]].subscribe(s),b=d.length;d.push(s,w),l&&l.push(i,r.index,b,-(b+1))}}}(s,i,i[ht],o,n,e,r),kt}function y5(n,e,t,r){try{return ma(6,e,t),!1!==t(r)}catch(i){return FH(n,i),!1}finally{ma(7,e,t)}}function v5(n,e,t,r,i){return function s(o){if(o===Function)return r;km(n.componentOffset>-1?Hs(n.index,e):e);let c=y5(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)c=y5(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function zu(n=1){return function tae(n){return(nt.lFrame.contextLView=function nae(n,e){for(;n>0;)e=e[Dh],n--;return e}(n,nt.lFrame.contextLView))[gr]}(n)}function U(n,e=""){const t=te(),r=qt(),i=n+Bt,s=r.firstCreatePass?cf(r,i,1,e,null):r.data[i],o=W5(r,t,s,e,n);t[i]=o,Y0()&&_E(r,t,o,s),_a(s,!1)}let W5=(n,e,t,r,i)=>(ml(!0),function fE(n,e){return n.createText(e)}(e[ht],r));const Ef="en-US";let fG=Ef;class Wu{}class VG{}class oM extends Wu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new WH(this);const i=zs(e);this._bootstrapComponents=fc(i.bootstrap),this._r3Injector=rH(e,t,[{provide:Wu,useValue:this},{provide:Nm,useValue:this.componentFactoryResolver},...r],kr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class aM extends VG{constructor(e){super(),this.moduleType=e}create(e){return new oM(this.moduleType,e,[])}}class BG extends Wu{constructor(e){super(),this.componentFactoryResolver=new WH(this),this.instance=null;const t=new Jh([...e.providers,{provide:Wu,useValue:this},{provide:Nm,useValue:this.componentFactoryResolver}],e.parent||xE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function cM(n,e,t=null){return new BG({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let dfe=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=V4(0,t.type),i=r.length>0?cM([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Xe({token:n,providedIn:"environment",factory:()=>new n(Ve(wo))})}return n})();function zG(n){n.getStandaloneInjector=e=>e.get(dfe).getOrCreateStandaloneInjector(n)}function KG(n,e,t,r){return function YG(n,e,t,r,i,s){const o=e+t;return Ai(n,o,i)?function Ea(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function Xm(n,e){const t=n[e];return t===yt?void 0:t}(n,o+1)}(te(),function Ki(){const n=nt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function Lfe(){return this._results[Symbol.iterator]()}class uM{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Qi)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=uM.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Lfe)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function Eo(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function bae(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ufe(n,e,t,r=!0){const i=e[Me];if(function hce(n,e,t,r){const i=fi+r,s=t.length;r>0&&(t[i-1][zo]=e),r<s-fi?(e[zo]=t[i],Vz(t,fi+r,e)):(t.push(e),e[zo]=null),e[zn]=t;const o=e[lm];null!==o&&t!==o&&function fce(n,e){const t=n[Oh];e[mr]!==e[zn][zn][mr]&&(n[UB]=!0),null===t?n[Oh]=[e]:t.push(e)}(o,e);const a=e[pa];null!==a&&a.insertView(n),e[Et]|=128}(i,e,n,t),r){const s=qC(t,n),o=e[ht],a=mE(o,n[ga]);null!==a&&function lce(n,e,t,r,i,s){r[nr]=i,r[Ii]=e,Im(n,r,t,1,i,s)}(i,n[Ii],o,e,a,s)}}let gc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=zfe}return n})();const Vfe=gc,Bfe=class extends Vfe{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Ffe(n,e,t,r){const i=e.tView,a=OE(n,i,t,4096&n[Et]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[lm]=n[e.index];const l=n[pa];return null!==l&&(a[pa]=l.createEmbeddedView(i)),FA(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Um(i)}};function zfe(){return ZE(gi(),te())}function ZE(n,e){return 4&n.type?new Bfe(e,n,rf(n,e)):null}let jo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qfe}return n})();function qfe(){return oW(gi(),te())}const Kfe=jo,iW=class extends Kfe{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return rf(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){const e=tE(this._hostTNode,this._hostLView);if(IC(e)){const t=ym(e,this._hostLView),r=_m(e);return new Xi(t[Me].data[r+8],t)}return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=sW(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fi}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Em(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const g=t||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const c=o?e:new Vm(jt(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const m=(o?l:this.parentInjector).get(wo,null);m&&(s=m)}jt(c.componentType??{});const f=c.create(l,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Voe(n){return qi(n[zn])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=i[zn],u=new iW(l,l[Ii],l[zn]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Ufe(a,i,o,!r),e.attachToViewContainerRef(),Vz(dM(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=sW(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=gE(this._lContainer,t);r&&(iE(dM(this._lContainer),t),GC(r[Me],r))}detach(e){const t=this._adjustIndex(e,-1),r=gE(this._lContainer,t);return r&&null!=iE(dM(this._lContainer),t)?new Um(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sW(n){return n[8]}function dM(n){return n[8]||(n[8]=[])}function oW(n,e){let t;const r=e[n.index];return qi(r)?t=r:(t=DH(r,e,null,n),e[n.index]=t,kE(e,t)),aW(t,e,n,r),new iW(t,n,e)}let aW=function cW(n,e,t,r){if(n[ga])return;let i;i=8&t.type?Sn(r):function Yfe(n,e){const t=n[ht],r=t.createComment(""),i=ys(e,n);return Uu(t,mE(t,i),r,function _ce(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ga]=i};class hM{constructor(e){this.queryList=e,this.matches=null}clone(){return new hM(this.queryList)}setDirty(){this.queryList.setDirty()}}class fM{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new fM(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==pW(e,t).matches&&this.queries[t].setDirty()}}class lW{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class pM{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new pM(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class gM{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new gM(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,Zfe(t,s)),this.matchTNodeWithReadOption(e,t,nE(t,e,s,!1,!1))}else r===gc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,nE(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===vl||i===jo||i===gc&&4&t.type)this.addMatch(t.index,-2);else{const s=nE(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Zfe(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function epe(n,e,t,r){return-1===t?function Jfe(n,e){return 11&n.type?rf(n,e):4&n.type?ZE(n,e):null}(e,n):-2===t?function tpe(n,e,t){return t===vl?rf(e,n):t===gc?ZE(e,n):t===jo?oW(e,n):void 0}(n,e,r):Fu(n,n[Me],t,e)}function uW(n,e,t,r){const i=e[pa].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:epe(e,s[l],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function mM(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=uW(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=fi;d<u.length;d++){const h=u[d];h[lm]===h[zn]&&mM(h[Me],h,l,r)}if(null!==u[Oh]){const d=u[Oh];for(let h=0;h<d.length;h++){const f=d[h];mM(f[Me],f,l,r)}}}}}return r}function Zm(n){const e=te(),t=qt(),r=_z();wC(r+1);const i=pW(t,r);if(n.dirty&&function Foe(n){return 4==(4&n[Et])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?mM(t,e,r,[]):uW(t,e,i,r);n.reset(s,_le),n.notifyOnChanges()}return!0}return!1}function ew(n,e,t){const r=qt();r.firstCreatePass&&(function fW(n,e,t){null===n.queries&&(n.queries=new pM),n.queries.track(new gM(e,t))}(r,new lW(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function hW(n,e,t){const r=new uM(4==(4&t));(function Yle(n,e,t,r){const i=OH(e);i.push(t),n.firstCreatePass&&kH(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[pa]&&(e[pa]=new fM),e[pa].queries.push(new hM(r))}(r,te(),e)}function Jm(){return function npe(n,e){return n[pa].queries[e].queryList}(te(),_z())}function pW(n,e){return n.queries.getByIndex(e)}const bf=new De("Application Initializer");let TM=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(bf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if($E(s))t.push(s);else if(g5(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PW=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const mc=new De("LocaleId",{providedIn:"root",factory:()=>Fe(mc,Vt.Optional|Vt.SkipSelf)||function Spe(){return typeof $localize<"u"&&$localize.locale||Ef}()});let DW=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mo(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Ape{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let NW=(()=>{class n{compileModuleSync(t){return new aM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=fc(zs(t).declarations).reduce((o,a)=>{const c=jt(a);return c&&o.push(new Vm(c)),o},[]);return new Ape(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const FW=new De(""),rw=new De("");let CM,SM=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CM||(function Xpe(n){CM=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(At),Ve(IM),Ve(rw))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),IM=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return CM?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),wl=null;const UW=new De("AllowMultipleToken"),AM=new De("PlatformDestroyListeners"),MM=new De("appBootstrapListener");class BW{constructor(e,t){this.name=e,this.token=t}}function HW(n,e,t=[]){const r=`Platform: ${e}`,i=new De(r);return(s=[])=>{let o=RM();if(!o||o.injector.get(UW,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Jpe(n){if(wl&&!wl.get(UW,!1))throw new ge(400,!1);(function VW(){!function xoe(n){XB=n}(()=>{throw new ge(600,!1)})})(),wl=n;const e=n.get(WW);(function zW(n){n.get(W4,null)?.forEach(t=>t())})(n)}(function GW(n=[],e){return Nn.create({name:e,providers:[{provide:sA,useValue:"platform"},{provide:AM,useValue:new Set([()=>wl=null])},...n]})}(a,r))}return function tge(n){const e=RM();if(!e)throw new ge(401,!1);return e}()}}function RM(){return wl?.get(WW)??null}let WW=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function nge(n="zone.js",e){return"noop"===n?new Ple:"zone.js"===n?new At(e):n}(r?.ngZone,function $W(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function ufe(n,e,t){return new oM(n,e,t)}(t.moduleType,this.injector,function XW(n){return[{provide:At,useFactory:n},{provide:Rm,multi:!0,useFactory:()=>{const e=Fe(ige,{optional:!0});return()=>e.initialize()}},{provide:YW,useFactory:rge},{provide:cH,useFactory:lH}]}(()=>i)),o=s.injector.get(hc,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{iw(this._modules,s),a.unsubscribe()})}),function jW(n,e,t){try{const r=t();return $E(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(TM);return a.runInitializers(),a.donePromise.then(()=>(function pG(n){yo(n,"Expected localeId to be defined"),"string"==typeof n&&(fG=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(mc,Ef)||Ef),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=qW({},r);return function Qpe(n,e,t){const r=new aM(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(xf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new ge(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(AM,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(Nn))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function qW(n,e){return Array.isArray(e)?e.reduce(qW,n):{...n,...e}}let xf=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(YW),this.zoneIsStable=Fe(cH),this.componentTypes=[],this.components=[],this.isStable=Fe(DW).hasPendingTasks.pipe(_o(t=>t?Je(!1):this.zoneIsStable),pB(),fB()),this._injector=Fe(wo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Y4;if(!this._injector.get(TM).done)throw!i&&function Mh(n){const e=jt(n)||hi(n)||ji(n);return null!==e&&e.standalone}(t),new ge(405,!1);let o;o=i?t:this._injector.get(Nm).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Zpe(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Wu),l=o.create(Nn.NULL,[],r||o.selector,a),u=l.location.nativeElement,d=l.injector.get(FW,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),iw(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;iw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(MM,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>iw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ge(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const YW=new De("",{providedIn:"root",factory:()=>Fe(hc).handleError.bind(void 0)});function rge(){const n=Fe(At),e=Fe(hc);return t=>n.runOutsideAngular(()=>e.handleError(t))}let ige=(()=>{class n{constructor(){this.zone=Fe(At),this.applicationRef=Fe(xf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let PM=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=age}return n})();function age(n){return function cge(n,e,t){if(Nu(n)&&!t){const r=Hs(n.index,e);return new Um(r,r)}return 47&n.type?new Um(e[mr],e):null}(gi(),te(),16==(16&n))}class e6{constructor(){}supports(e){return VE(e)}create(e){return new pge(e)}}const fge=(n,e)=>e;class pge{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fge}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<n6(r,i,s)?t:r,a=n6(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!VE(e))throw new ge(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function zue(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new gge(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new t6),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new t6),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class gge{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mge{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class t6{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new mge,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function n6(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class r6{constructor(){}supports(e){return e instanceof Map||UA(e)}create(){return new _ge}}class _ge{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||UA(e)))throw new ge(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new yge(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class yge{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function i6(){return new aw([new e6])}let aw=(()=>{class n{static#e=this.\u0275prov=Xe({token:n,providedIn:"root",factory:i6});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||i6()),deps:[[n,new oE,new Gt]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new ge(901,!1)}}return n})();function s6(){return new n_([new r6])}let n_=(()=>{class n{static#e=this.\u0275prov=Xe({token:n,providedIn:"root",factory:s6});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||s6()),deps:[[n,new oE,new Gt]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ge(901,!1)}}return n})();const wge=HW(null,"core",[]);let Tge=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(xf))};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Lr({})}return n})(),UM=null;function Sf(){return UM}class Lge{}const bo=new De("DocumentToken");let VM=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return Fe(Uge)},providedIn:"platform"})}return n})();const Fge=new De("Location Initialized");let Uge=(()=>{class n extends VM{constructor(){super(),this._doc=Fe(bo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sf().getBaseHref(this._doc)}onPopState(t){const r=Sf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Sf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function BM(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function p6(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _c(n){return n&&"?"!==n[0]?"?"+n:n}let ju=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return Fe(m6)},providedIn:"root"})}return n})();const g6=new De("appBaseHref");let m6=(()=>{class n extends ju{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Fe(bo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return BM(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+_c(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+_c(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+_c(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(VM),Ve(g6,8))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vge=(()=>{class n extends ju{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=BM(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+_c(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+_c(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(VM),Ve(g6,8))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),zM=(()=>{class n{constructor(t){this._subject=new Qi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Hge(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(p6(_6(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_c(r))}normalize(t){return n.stripTrailingSlash(function zge(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,_6(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_c(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_c(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=_c;static#t=this.joinWithSlash=BM;static#n=this.stripTrailingSlash=p6;static#r=this.\u0275fac=function(r){return new(r||n)(Ve(ju))};static#i=this.\u0275prov=Xe({token:n,factory:function(){return function Bge(){return new zM(Ve(ju))}()},providedIn:"root"})}return n})();function _6(n){return n.replace(/\/index.html$/,"")}const QM=/\s+/,I6=[];let C6=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=I6,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(QM):I6}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(QM):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(QM).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(aw),Qe(n_),Qe(vl),Qe(PE))};static#t=this.\u0275dir=$i({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})(),s_=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Rme,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R6("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R6("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(jo),Qe(gc))};static#t=this.\u0275dir=$i({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Rme{constructor(){this.$implicit=null,this.ngIf=null}}function R6(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${kr(e)}'.`)}let t_e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Lr({})}return n})();const N6="browser",n_e="server";function O6(n){return n===N6}function n1(n){return n===n_e}let s_e=(()=>{class n{static#e=this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new o_e(Ve(bo),window)})}return n})();class o_e{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function a_e(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class P_e extends Lge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class s1 extends P_e{static makeCurrent(){!function kge(n){UM||(UM=n)}(new s1)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function D_e(){return a_=a_||document.querySelector("base"),a_?a_.getAttribute("href"):null}();return null==t?null:function N_e(n){ww=ww||document.createElement("a"),ww.setAttribute("href",n);const e=ww.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){a_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ime(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ww,a_=null,k_e=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();const o1=new De("EventManagerPlugins");let V6=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ge(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(o1),Ve(At))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();class B6{constructor(e){this._doc=e}}const a1="ng-app-id";let z6=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=n1(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${a1}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(a1),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(a1,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(bo),Ve(SE),Ve($4,8),Ve(Go))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();const c1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},l1=/%COMP%/g,V_e=new De("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function G6(n,e){return e.map(t=>t.replace(l1,n))}let W6=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=n1(a),this.defaultRenderer=new u1(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vo.ShadowDom&&(r={...r,encapsulation:Vo.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof j6?i.applyToHost(t):i instanceof d1&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Vo.Emulated:s=new j6(c,l,r,this.appId,u,o,a,d);break;case Vo.ShadowDom:return new G_e(c,l,t,r,o,a,this.nonce,d);default:s=new d1(c,l,r,u,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(V6),Ve(z6),Ve(SE),Ve(V_e),Ve(bo),Ve(Go),Ve(At),Ve($4))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();class u1{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(c1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($6(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($6(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ge(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=c1[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=c1[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_l.DashCase|_l.Important)?e.style.setProperty(t,r,i&_l.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_l.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Sf().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function $6(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class G_e extends u1{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=G6(i.id,i.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class d1 extends u1{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?G6(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class j6 extends d1{constructor(e,t,r,i,s,o,a,c){const l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=function B_e(n){return"_ngcontent-%COMP%".replace(l1,n)}(l),this.hostAttr=function z_e(n){return"_nghost-%COMP%".replace(l1,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let W_e=(()=>{class n extends B6{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(bo))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();const q6=["alt","control","meta","shift"],$_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},j_e={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let q_e=(()=>{class n extends B6{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sf().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),q6.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=$_e[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),q6.forEach(o=>{o!==i&&(0,j_e[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(bo))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();const Y6=[{provide:Go,useValue:N6},{provide:W4,useValue:function K_e(){s1.makeCurrent()},multi:!0},{provide:bo,useFactory:function X_e(){return function Sce(n){XC=n}(document),document},deps:[]}],Q_e=HW(wge,"browser",Y6),Z_e=new De(""),X6=[{provide:rw,useClass:class O_e{addToWindow(e){xn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new ge(5103,!1);return s},xn.getAllAngularTestabilities=()=>e.getAllTestabilities(),xn.getAllAngularRootElements=()=>e.getAllRootElements(),xn.frameworkStabilizers||(xn.frameworkStabilizers=[]),xn.frameworkStabilizers.push(r=>{const i=xn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Sf().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:FW,useClass:SM,deps:[At,IM,rw]},{provide:SM,useClass:SM,deps:[At,IM,rw]}],Q6=[{provide:sA,useValue:"root"},{provide:hc,useFactory:function Y_e(){return new hc},deps:[]},{provide:o1,useClass:W_e,multi:!0,deps:[bo,At,Go]},{provide:o1,useClass:q_e,multi:!0,deps:[bo]},W6,z6,V6,{provide:Q4,useExisting:W6},{provide:class c_e{},useClass:k_e,deps:[]},[]];let J_e=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:SE,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(Z_e,12))};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Lr({providers:[...Q6,...X6],imports:[t_e,Tge]})}return n})(),h1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(bo))};static#t=this.\u0275prov=Xe({token:n,factory:function(r){let i=null;return i=r?new r:function tye(){return new h1(Ve(bo))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:aye}=Array,{getPrototypeOf:cye,prototype:lye,keys:uye}=Object;const{isArray:fye}=Array;function p1(...n){const e=nm(n),t=function Ase(n){return pn(HI(n))?n.pop():void 0}(n),{args:r,keys:i}=function dye(n){if(1===n.length){const e=n[0];if(aye(e))return{args:e,keys:null};if(function hye(n){return n&&"object"==typeof n&&cye(n)===lye}(e)){const t=uye(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return di([],e);const s=new jn(function _ye(n,e,t=ll){return r=>{t$(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)t$(e,()=>{const l=di(n[c],e);let u=!1;l.subscribe(pr(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function mye(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,o):ll));return t?s.pipe(function gye(n){return gn(e=>function pye(n,e){return fye(e)?n(...e):n(e)}(n,e))}(t)):s}function t$(n,e,t){n?sc(t,n,e):e()}const Tw=em(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function g1(...n){return function yye(){return Ih(1)}()(di(n,nm(n)))}function n$(n){return new jn(e=>{Vs(n()).subscribe(e)})}function c_(n,e){const t=pn(n)?n:()=>n,r=i=>i.error(t());return new jn(e?i=>e.schedule(r,0,i):r)}function m1(){return fr((n,e)=>{let t=null;n._refCount++;const r=pr(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class r$ extends jn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,X3(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ps;const t=this.getSubject();e.add(this.source.subscribe(pr(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ps.EMPTY)}return e}refCount(){return m1()(this)}}function Cf(n){return n<=0?()=>ha:fr((e,t)=>{let r=0;e.subscribe(pr(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function i$(...n){const e=nm(n);return fr((t,r)=>{(e?g1(n,t,e):g1(n,t)).subscribe(r)})}function ba(n,e){return fr((t,r)=>{let i=0;t.subscribe(pr(r,s=>n.call(e,s,i++)&&r.next(s)))})}function bw(n){return fr((e,t)=>{let r=!1;e.subscribe(pr(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function s$(n=vye){return fr((e,t)=>{let r=!1;e.subscribe(pr(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vye(){return new Tw}function qu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ba((i,s)=>n(i,s,r)):ll,Cf(1),t?bw(e):s$(()=>new Tw))}function l_(n,e){return pn(e)?$r(n,e,1):$r(n,1)}function mi(n,e,t){const r=pn(n)||e||t?{next:n,error:e,complete:t}:n;return r?fr((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(pr(s,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),s.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ll}function Ku(n){return fr((e,t)=>{let s,r=null,i=!1;r=e.subscribe(pr(t,void 0,void 0,o=>{s=Vs(n(o,Ku(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function _1(n){return n<=0?()=>ha:fr((e,t)=>{let r=[];e.subscribe(pr(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function y1(n){return fr((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",u_=Symbol("RouteTitle");class Sye{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Af(n){return new Sye(n)}function Iye(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xa(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!o$(n[i],e[i]))return!1;return!0}function o$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function a$(n){return n.length>0?n[n.length-1]:null}function bl(n){return function oye(n){return!!n&&(n instanceof jn||pn(n.lift)&&pn(n.subscribe))}(n)?n:$E(n)?di(Promise.resolve(n)):Je(n)}const Aye={exact:function u$(n,e,t){if(!Yu(n.segments,e.segments)||!xw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!u$(n.children[r],e.children[r],t))return!1;return!0},subset:d$},c$={exact:function Mye(n,e){return xa(n,e)},subset:function Rye(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>o$(n[t],e[t]))},ignored:()=>!0};function l$(n,e,t){return Aye[t.paths](n.root,e.root,t.matrixParams)&&c$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function d$(n,e,t){return h$(n,e,e.segments,t)}function h$(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Yu(i,t)||e.hasChildren()||!xw(i,t,r))}if(n.segments.length===t.length){if(!Yu(n.segments,t)||!xw(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!d$(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Yu(n.segments,i)&&xw(n.segments,i,r)&&n.children[Tt])&&h$(n.children[Tt],e,s,r)}}function xw(n,e,t){return e.every((r,i)=>c$[t](n[i].parameters,r.parameters))}class Mf{constructor(e=new un([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Af(this.queryParams)),this._queryParamMap}toString(){return Nye.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sw(this)}}class d_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Af(this.parameters)),this._parameterMap}toString(){return g$(this)}}function Yu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let h_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return new v1},providedIn:"root"})}return n})();class v1{parse(e){const t=new Wye(e);return new Mf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${f_(e.root,!0)}`,r=function Lye(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Iw(t)}=${Iw(i)}`).join("&"):`${Iw(t)}=${Iw(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Oye(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nye=new v1;function Sw(n){return n.segments.map(e=>g$(e)).join("/")}function f_(n,e){if(!n.hasChildren())return Sw(n);if(e){const t=n.children[Tt]?f_(n.children[Tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Tt&&r.push(`${i}:${f_(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dye(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Tt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Tt?[f_(n.children[Tt],!1)]:[`${i}:${f_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Sw(n)}/${t[0]}`:`${Sw(n)}/(${t.join("//")})`}}function f$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Iw(n){return f$(n).replace(/%3B/gi,";")}function E1(n){return f$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cw(n){return decodeURIComponent(n)}function p$(n){return Cw(n.replace(/\+/g,"%20"))}function g$(n){return`${E1(n.path)}${function kye(n){return Object.keys(n).map(e=>`;${E1(e)}=${E1(n[e])}`).join("")}(n.parameters)}`}const Fye=/^[^\/()?;#]+/;function w1(n){const e=n.match(Fye);return e?e[0]:""}const Uye=/^[^\/()?;=#]+/,Bye=/^[^=?&#]+/,Hye=/^[^&#]+/;class Wye{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new un(e,t)),r}parseSegment(){const e=w1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ge(4009,!1);return this.capture(e),new d_(Cw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Vye(n){const e=n.match(Uye);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=w1(this.remaining);i&&(r=i,this.capture(r))}e[Cw(t)]=Cw(r)}parseQueryParam(e){const t=function zye(n){const e=n.match(Bye);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Gye(n){const e=n.match(Hye);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=p$(t),s=p$(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=w1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ge(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Tt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Tt]:new un([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ge(4011,!1)}}function m$(n){return n.segments.length>0?new un([],{[Tt]:n}):n}function _$(n){const e={};for(const r of Object.keys(n.children)){const s=_$(n.children[r]);if(r===Tt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function $ye(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function Xu(n){return n instanceof Mf}function y$(n){let e;const r=function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new un(s.url,o);return s===n&&(e=a),a}(n.root),i=m$(r);return e??i}function v$(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return T1(i,i,i,t,r);const s=function qye(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new w$(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new w$(t,e,r)}(e);if(s.toRoot())return T1(i,i,new un([],{}),t,r);const o=function Kye(n,e,t){if(n.isAbsolute)return new Mw(e,!0,0);if(!t)return new Mw(e,!1,NaN);if(null===t.parent)return new Mw(t,!0,0);const r=Aw(n.commands[0])?0:1;return function Yye(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ge(4005,!1);i=r.segments.length}return new Mw(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?g_(o.segmentGroup,o.index,s.commands):T$(o.segmentGroup,o.index,s.commands);return T1(i,o.segmentGroup,a,t,r)}function Aw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function p_(n){return"object"==typeof n&&null!=n&&n.outlets}function T1(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:E$(n,e,t);const a=m$(_$(o));return new Mf(a,s,i)}function E$(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:E$(s,e,t)}),new un(n.segments,r)}class w${constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Aw(r[0]))throw new ge(4003,!1);const i=r.find(p_);if(i&&i!==a$(r))throw new ge(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mw{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function T$(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return g_(n,e,t);const r=function Qye(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(p_(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!x$(c,l,o))return s;r+=2}else{if(!x$(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,r.pathIndex),{});return s.children[Tt]=new un(n.segments.slice(r.pathIndex),n.children),g_(s,0,i)}return r.match&&0===i.length?new un(n.segments,{}):r.match&&!n.hasChildren()?b1(n,e,t):r.match?g_(n,0,i):b1(n,e,t)}function g_(n,e,t){if(0===t.length)return new un(n.segments,{});{const r=function Xye(n){return p_(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Tt)&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const s=g_(n.children[Tt],e,t);return new un(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=T$(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new un(n.segments,i)}}function b1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(p_(s)){const c=Zye(s.outlets);return new un(r,c)}if(0===i&&Aw(t[0])){r.push(new d_(n.segments[e].path,b$(t[0]))),i++;continue}const o=p_(s)?s.outlets[Tt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Aw(a)?(r.push(new d_(o,b$(a))),i+=2):(r.push(new d_(o,{})),i++)}return new un(r,{})}function Zye(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=b1(new un([],{}),0,r))}),e}function b$(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function x$(n,e,t){return n==t.path&&xa(e,t.parameters)}const m_="imperative";class Sa{constructor(e,t){this.id=e,this.url=t}}class Rw extends Sa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xl extends Sa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class __ extends Sa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rf extends Sa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Pw extends Sa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class S$ extends Sa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jye extends Sa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eve extends Sa{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tve extends Sa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nve extends Sa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rve{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ive{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sve{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ove{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ave{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I${constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C${constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class x1{}class S1{constructor(e){this.url=e}}class cve{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new y_,this.attachRef=null}}let y_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cve,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class A${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=I1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=I1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=C1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return C1(e,this._root).map(t=>t.value)}}function I1(n,e){if(n===e.value)return e;for(const t of e.children){const r=I1(n,t);if(r)return r}return null}function C1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=C1(n,t);if(r.length)return r.unshift(e),r}return[]}class Ec{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class M$ extends A${constructor(e,t){super(e),this.snapshot=t,A1(this,e)}toString(){return this.snapshot.toString()}}function R$(n,e){const t=function lve(n,e){const o=new Dw([],{},{},"",{},Tt,e,null,{});return new D$("",new Ec(o,[]))}(0,e),r=new mo([new d_("",{})]),i=new mo({}),s=new mo({}),o=new mo({}),a=new mo(""),c=new Df(r,i,o,a,s,Tt,e,t.root);return c.snapshot=t.root,new M$(new Ec(c,[]),t)}class Df{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(gn(l=>l[u_]))??Je(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(gn(e=>Af(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(gn(e=>Af(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function P$(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function uve(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Dw{get title(){return this.data?.[u_]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Af(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Af(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D$ extends A${constructor(e,t){super(t),this.url=e,A1(this,t)}toString(){return N$(this._root)}}function A1(n,e){e.value._routerState=n,e.children.forEach(t=>A1(n,t))}function N$(n){const e=n.children.length>0?` { ${n.children.map(N$).join(", ")} } `:"";return`${n.value}${e}`}function M1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xa(e.params,t.params)||n.paramsSubject.next(t.params),function Cye(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),xa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function R1(n,e){const t=xa(n.params,e.params)&&function Pye(n,e){return Yu(n,e)&&n.every((t,r)=>xa(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||R1(n.parent,e.parent))}let O$=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new Qi,this.deactivateEvents=new Qi,this.attachEvents=new Qi,this.detachEvents=new Qi,this.parentContexts=Fe(y_),this.location=Fe(jo),this.changeDetector=Fe(PM),this.environmentInjector=Fe(wo),this.inputBinder=Fe(Nw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ge(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ge(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ge(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ge(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new dve(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=$i({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ku]})}return n})();class dve{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Df?this.route:e===y_?this.childContexts:this.parent.get(e,t)}}const Nw=new De("");let k$=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=p1([r.queryParams,r.params,r.data]).pipe(_o(([s,o,a],c)=>(a={...s,...o,...a},0===c?Je(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function Oge(n){const e=jt(n);if(!e)return null;const t=new Vm(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();function v_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function fve(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return v_(n,r,i);return v_(n,r)})}(n,e,t);return new Ec(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>v_(n,a)),o}}const r=function pve(n){return new Df(new mo(n.url),new mo(n.params),new mo(n.queryParams),new mo(n.fragment),new mo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>v_(n,s));return new Ec(r,i)}}const P1="ngNavigationCancelingError";function L$(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Xu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=F$(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function F$(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[P1]=!0,r.cancellationCode=e,t&&(r.url=t),r}function U$(n){return n&&n[P1]}let D1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ah({type:n,selectors:[["ng-component"]],standalone:!0,features:[zG],decls:1,vars:0,template:function(r,i){1&r&&ue(0,"router-outlet")},dependencies:[O$],encapsulation:2})}return n})();function N1(n){const e=n.children&&n.children.map(N1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=D1),t}function Yo(n){return n.outlet||Tt}function E_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Tve{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),M1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Pf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Pf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Pf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Pf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new I$(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ove(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(M1(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),M1(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=E_(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class V${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ow{constructor(e,t){this.component=e,this.route=t}}function bve(n,e,t){const r=n._root;return w_(r,e?e._root:null,t,[r.value])}function Nf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Wse(n){return null!==L0(n)}(n)?e.get(n):n:r}function w_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Pf(e);return n.children.forEach(o=>{(function Sve(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Ive(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Yu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yu(n.url,e.url)||!xa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!R1(n,e)||!xa(n.queryParams,e.queryParams);default:return!R1(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new V$(r)):(s.data=o.data,s._resolvedData=o._resolvedData),w_(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ow(a.outlet.component,o))}else o&&T_(e,a,i),i.canActivateChecks.push(new V$(r)),w_(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>T_(a,t.getContext(o),i)),i}function T_(n,e,t){const r=Pf(n),i=n.value;Object.entries(r).forEach(([s,o])=>{T_(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ow(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function b_(n){return"function"==typeof n}function B$(n){return n instanceof Tw||"EmptyError"===n?.name}const kw=Symbol("INITIAL_VALUE");function Of(){return _o(n=>p1(n.map(e=>e.pipe(Cf(1),i$(kw)))).pipe(gn(e=>{for(const t of e)if(!0!==t){if(t===kw)return kw;if(!1===t||t instanceof Mf)return t}return!0}),ba(e=>e!==kw),Cf(1)))}function z$(n){return function Kie(...n){return q3(n)}(mi(e=>{if(Xu(e))throw L$(0,e)}),gn(e=>!0===e))}class Lw{constructor(e){this.segmentGroup=e||null}}class H${constructor(e){this.urlTree=e}}function kf(n){return c_(new Lw(n))}function G$(n){return c_(new H$(n))}class jve{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ge(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[Tt])return c_(new ge(4e3,!1));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Mf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new un(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new ge(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const O1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qve(n,e,t,r,i){const s=k1(n,e,t);return s.matched?(r=function mve(n,e){return n.providers&&!n._injector&&(n._injector=cM(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Gve(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(o=>{const a=Nf(o,n);return bl(function Dve(n){return n&&b_(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Of(),z$()):Je(!0)}(r,e,t).pipe(gn(o=>!0===o?s:{...O1}))):Je(s)}function k1(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...O1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Iye)(t,n,e);if(!i)return{...O1};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function W$(n,e,t,r){return t.length>0&&function Xve(n,e,t){return t.some(r=>Fw(n,e,r)&&Yo(r)!==Tt)}(n,t,r)?{segmentGroup:new un(e,Yve(r,new un(t,n.children))),slicedSegments:[]}:0===t.length&&function Qve(n,e,t){return t.some(r=>Fw(n,e,r))}(n,t,r)?{segmentGroup:new un(n.segments,Kve(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new un(n.segments,n.children),slicedSegments:t}}function Kve(n,e,t,r,i){const s={};for(const o of r)if(Fw(n,t,o)&&!i[Yo(o)]){const a=new un([],{});s[Yo(o)]=a}return{...i,...s}}function Yve(n,e){const t={};t[Tt]=e;for(const r of n)if(""===r.path&&Yo(r)!==Tt){const i=new un([],{});t[Yo(r)]=i}return t}function Fw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class t0e{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new jve(this.urlSerializer,this.urlTree)}noMatchError(e){return new ge(4002,!1)}recognize(){const e=W$(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe(Ku(t=>{if(t instanceof H$)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Lw?this.noMatchError(t):t}),gn(t=>{const r=new Dw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,{}),i=new Ec(r,t),s=new D$("",i),o=function jye(n,e,t=null,r=null){return v$(y$(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Tt).pipe(Ku(r=>{throw r instanceof Lw?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=P$(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return di(i).pipe(l_(s=>{const o=r.children[s],a=function Eve(n,e){const t=n.filter(r=>Yo(r)===e);return t.push(...n.filter(r=>Yo(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),function wye(n,e){return fr(function Eye(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(pr(o,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),bw(null),function Tye(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ba((i,s)=>n(i,s,r)):ll,_1(1),t?bw(e):s$(()=>new Tw))}(),$r(s=>{if(null===s)return kf(r);const o=$$(s);return function n0e(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Je(o)}))}processSegment(e,t,r,i,s,o){return di(t).pipe(l_(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Ku(c=>{if(c instanceof Lw)return Je(null);throw c}))),qu(a=>!!a),Ku(a=>{if(B$(a))return function Jve(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Je([]):kf(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function Zve(n,e,t,r){return!!(Yo(n)===r||r!==Tt&&Fw(e,t,n))&&("**"===n.path||k1(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):kf(i):kf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?G$(s):this.applyRedirects.lineralizeSegments(r,s).pipe($r(o=>{const a=new un(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=k1(t,i,s);if(!a)return kf(t);const d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return i.redirectTo.startsWith("/")?G$(d):this.applyRedirects.lineralizeSegments(i,d).pipe($r(h=>this.processSegment(e,r,t,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?a$(i).parameters:{};a=Je({snapshot:new Dw(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j$(r),Yo(r),r.component??r._loadedComponent??null,r,q$(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=qve(t,r,i,e).pipe(gn(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new Dw(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j$(r),Yo(r),r.component??r._loadedComponent??null,r,q$(r)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(_o(c=>null===c?kf(t):this.getChildConfig(e=r._injector??e,r,i).pipe(_o(({routes:l})=>{const u=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:p,slicedSegments:g}=W$(t,h,f,l);if(0===g.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(gn(_=>null===_?null:[new Ec(d,_)]));if(0===l.length&&0===g.length)return Je([new Ec(d,[])]);const m=Yo(r)===s;return this.processSegment(u,l,p,g,m?Tt:s,!0).pipe(gn(_=>[new Ec(d,_)]))}))))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function Hve(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(o=>{const a=Nf(o,n);return bl(function Ave(n){return n&&b_(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Of(),z$())}(e,t,r).pipe($r(i=>i?this.configLoader.loadChildren(e,t).pipe(mi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function $ve(n){return c_(F$(!1,3))}())):Je({routes:[],injector:e})}}function r0e(n){const e=n.value.routeConfig;return e&&""===e.path}function $$(n){const e=[],t=new Set;for(const r of n){if(!r0e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=$$(r.children);e.push(new Ec(r.value,i))}return e.filter(r=>!t.has(r))}function j$(n){return n.data||{}}function q$(n){return n.resolve||{}}function K$(n){return"string"==typeof n.title||null===n.title}function L1(n){return _o(e=>{const t=n(e);return t?di(t).pipe(gn(()=>e)):Je(e)})}const Lf=new De("ROUTES");let F1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Fe(NW)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=bl(t.loadComponent()).pipe(gn(Y$),mi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),y1(()=>{this.componentLoaders.delete(t)})),i=new r$(r,()=>new go).pipe(m1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function u0e(n,e,t,r){return bl(n.loadChildren()).pipe(gn(Y$),$r(i=>i instanceof VG||Array.isArray(i)?Je(i):di(e.compileModuleAsync(i))),gn(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Lf,[],{optional:!0,self:!0}).flat()),{routes:o.map(N1),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(y1(()=>{this.childrenLoaders.delete(r)})),o=new r$(s,()=>new go).pipe(m1());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Y$(n){return function d0e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Uw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new go,this.transitionAbortSubject=new go,this.configLoader=Fe(F1),this.environmentInjector=Fe(wo),this.urlSerializer=Fe(h_),this.rootContexts=Fe(y_),this.inputBindingEnabled=null!==Fe(Nw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Je(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ive(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new rve(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new mo({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:m_,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ba(s=>0!==s.id),gn(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),_o(s=>{this.currentTransition=s;let o=!1,a=!1;return Je(s).pipe(mi(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_o(c=>{const l=c.currentBrowserUrl.toString(),u=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new Rf(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),ha}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Je(c).pipe(_o(h=>{const f=this.transitions?.getValue();return this.events.next(new Rw(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ha:Promise.resolve(h)}),function i0e(n,e,t,r,i,s){return $r(o=>function e0e(n,e,t,r,i,s,o="emptyOnly"){return new t0e(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(gn(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),mi(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new S$(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=c,_=new Rw(h,this.urlSerializer.serialize(f),p,g);this.events.next(_);const y=R$(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:y,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},Je(s)}{const h="";return this.events.next(new Rf(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),ha}}),mi(c=>{const l=new Jye(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),gn(c=>(this.currentTransition=s={...c,guards:bve(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function Ove(n,e){return $r(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Je({...t,guardsResult:!0}):function kve(n,e,t,r){return di(n).pipe($r(i=>function zve(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Je(!0);const o=s.map(a=>{const c=E_(e)??i,l=Nf(a,c);return bl(function Pve(n){return n&&b_(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):c.runInContext(()=>l(n,e,t,r))).pipe(qu())});return Je(o).pipe(Of())}(i.component,i.route,t,e,r)),qu(i=>!0!==i,!0))}(o,r,i,n).pipe($r(a=>a&&function Cve(n){return"boolean"==typeof n}(a)?function Lve(n,e,t,r){return di(e).pipe(l_(i=>g1(function Uve(n,e){return null!==n&&e&&e(new sve(n)),Je(!0)}(i.route.parent,r),function Fve(n,e){return null!==n&&e&&e(new ave(n)),Je(!0)}(i.route,r),function Bve(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function xve(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>n$(()=>Je(o.guards.map(c=>{const l=E_(o.node)??t,u=Nf(c,l);return bl(function Rve(n){return n&&b_(n.canActivateChild)}(u)?u.canActivateChild(r,n):l.runInContext(()=>u(r,n))).pipe(qu())})).pipe(Of())));return Je(s).pipe(Of())}(n,i.path,t),function Vve(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(s=>n$(()=>{const o=E_(e)??t,a=Nf(s,o);return bl(function Mve(n){return n&&b_(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(qu())}));return Je(i).pipe(Of())}(n,i.route,t))),qu(i=>!0!==i,!0))}(r,s,n,e):Je(a)),gn(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),mi(c=>{if(s.guardsResult=c.guardsResult,Xu(c.guardsResult))throw L$(0,c.guardsResult);const l=new eve(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ba(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),L1(c=>{if(c.guards.canActivateChecks.length)return Je(c).pipe(mi(l=>{const u=new tve(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),_o(l=>{let u=!1;return Je(l).pipe(function s0e(n,e){return $r(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let s=0;return di(i).pipe(l_(o=>function o0e(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!K$(i)&&(s[u_]=i.title),function a0e(n,e,t,r){const i=function c0e(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const s={};return di(i).pipe($r(o=>function l0e(n,e,t,r){const i=E_(e)??r,s=Nf(n,i);return bl(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(qu(),mi(a=>{s[o]=a}))),_1(1),function bye(n){return gn(()=>n)}(s),Ku(o=>B$(o)?ha:c_(o)))}(s,n,e,r).pipe(gn(o=>(n._resolvedData=o,n.data=P$(n,t).resolve,i&&K$(i)&&(n.data[u_]=i.title),null)))}(o.route,r,n,e)),mi(()=>s++),_1(1),$r(o=>s===i.length?Je(t):ha))})}(t.paramsInheritanceStrategy,this.environmentInjector),mi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),mi(l=>{const u=new nve(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),L1(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(mi(h=>{u.component=h}),gn(()=>{})));for(const h of u.children)d.push(...l(h));return d};return p1(l(c.targetSnapshot.root)).pipe(bw(),Cf(1))}),L1(()=>this.afterPreactivation()),gn(c=>{const l=function hve(n,e,t){const r=v_(n,e._root,t?t._root:void 0);return new M$(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},s}),mi(()=>{this.events.next(new x1)}),((n,e,t,r)=>gn(i=>(new Tve(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Cf(1),mi({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),function xye(n){return fr((e,t)=>{Vs(n).subscribe(pr(t,()=>t.complete(),PI)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(mi(c=>{throw c}))),y1(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ku(c=>{if(a=!0,U$(c))this.events.next(new __(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function gve(n){return U$(n)&&Xu(n.url)}(c)?this.events.next(new S1(c.url)):s.resolve(!1);else{this.events.next(new Pw(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(l){s.reject(l)}}return ha}))}))}cancelNavigationTransition(t,r,i){const s=new __(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X$(n){return n!==m_}let Q$=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[u_]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return Fe(h0e)},providedIn:"root"})}return n})(),h0e=(()=>{class n extends Q${constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(h1))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),f0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return Fe(g0e)},providedIn:"root"})}return n})();class p0e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let g0e=(()=>{class n extends p0e{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=function Lz(n){return oc(()=>{const e=n.prototype.constructor,t=e[ac]||RC(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ac]||RC(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(i||n)}}();static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vw=new De("",{providedIn:"root",factory:()=>({})});let m0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:function(){return Fe(_0e)},providedIn:"root"})}return n})(),_0e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var x_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(x_||{});function Z$(n,e){n.events.pipe(ba(t=>t instanceof xl||t instanceof __||t instanceof Pw||t instanceof Rf),gn(t=>t instanceof xl||t instanceof Rf?x_.COMPLETE:t instanceof __&&(0===t.code||1===t.code)?x_.REDIRECTING:x_.FAILED),ba(t=>t!==x_.REDIRECTING),Cf(1)).subscribe(()=>{e()})}function y0e(n){throw n}function v0e(n,e,t){return e.parse("/")}const E0e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w0e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let js=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Fe(PW),this.isNgZoneEnabled=!1,this._events=new go,this.options=Fe(Vw,{optional:!0})||{},this.pendingTasks=Fe(DW),this.errorHandler=this.options.errorHandler||y0e,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||v0e,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Fe(m0e),this.routeReuseStrategy=Fe(f0e),this.titleStrategy=Fe(Q$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Fe(Lf,{optional:!0})?.flat()??[],this.navigationTransitions=Fe(Uw),this.urlSerializer=Fe(h_),this.location=Fe(zM),this.componentInputBindingEnabled=!!Fe(Nw,{optional:!0}),this.eventsSubscription=new ps,this.isNgZoneEnabled=Fe(At)instanceof At&&At.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=R$(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(J$(r)&&this._events.next(r));if(r instanceof Rw)X$(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Rf)this.rawUrlTree=i.rawUrl;else if(r instanceof S$){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof x1)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof __)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof S1){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||X$(i.source)};this.scheduleNavigation(s,m_,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Pw&&this.restoreHistory(i,!0),r instanceof xl&&(this.navigated=!0),J$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),m_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(N1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=y$(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return v$(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Xu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,m_,null,r)}navigate(t,r={skipLocationChange:!1}){return function T0e(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ge(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...E0e}:!1===r?{...w0e}:r,Xu(t))return l$(this.currentUrlTree,t,i);const s=this.parseUrl(t);return l$(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return Z$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J$(n){return!(n instanceof x1||n instanceof S1)}class e8{}let S0e=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ba(t=>t instanceof xl),l_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=cM(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return di(i).pipe(Ih())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const s=i.pipe($r(o=>null===o?Je(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?di([s,this.loader.loadComponent(r)]).pipe(Ih()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(js),Ve(NW),Ve(wo),Ve(e8),Ve(F1))};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const V1=new De("");let t8=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xl?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Rf&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof C$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new C$(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function bH(){throw new Error("invalid")}()};static#t=this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();function wc(n,e){return{\u0275kind:n,\u0275providers:e}}function r8(){const n=Fe(Nn);return e=>{const t=n.get(xf);if(e!==t.components[0])return;const r=n.get(js),i=n.get(i8);1===n.get(B1)&&r.initialNavigation(),n.get(s8,null,Vt.Optional)?.setUpPreloading(),n.get(V1,null,Vt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const i8=new De("",{factory:()=>new go}),B1=new De("",{providedIn:"root",factory:()=>1}),s8=new De("");function M0e(n){return wc(0,[{provide:s8,useExisting:S0e},{provide:e8,useExisting:n}])}const o8=new De("ROUTER_FORROOT_GUARD"),P0e=[zM,{provide:h_,useClass:v1},js,y_,{provide:Df,useFactory:function n8(n){return n.routerState.root},deps:[js]},F1,[]];function D0e(){return new BW("Router",js)}let a8=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[P0e,[],{provide:Lf,multi:!0,useValue:t},{provide:o8,useFactory:L0e,deps:[[js,new Gt,new oE]]},{provide:Vw,useValue:r||{}},r?.useHash?{provide:ju,useClass:Vge}:{provide:ju,useClass:m6},{provide:V1,useFactory:()=>{const n=Fe(s_e),e=Fe(At),t=Fe(Vw),r=Fe(Uw),i=Fe(h_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new t8(i,r,n,e,t)}},r?.preloadingStrategy?M0e(r.preloadingStrategy).\u0275providers:[],{provide:BW,multi:!0,useFactory:D0e},r?.initialNavigation?F0e(r):[],r?.bindToComponentInputs?wc(8,[k$,{provide:Nw,useExisting:k$}]).\u0275providers:[],[{provide:c8,useFactory:r8},{provide:MM,multi:!0,useExisting:c8}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Lf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ve(o8,8))};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Lr({})}return n})();function L0e(n){return"guarded"}function F0e(n){return["disabled"===n.initialNavigation?wc(3,[{provide:bf,multi:!0,useFactory:()=>{const e=Fe(js);return()=>{e.setUpLocationChangeListener()}}},{provide:B1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wc(2,[{provide:B1,useValue:0},{provide:bf,multi:!0,deps:[Nn],useFactory:e=>{const t=e.get(Fge,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(js),s=e.get(i8);Z$(i,()=>{r(!0)}),e.get(Uw).afterPreactivation=()=>(r(!0),s.closed?Je(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const c8=new De("");function l8(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,i)}function O(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){l8(s,r,i,o,a,"next",c)}function a(c){l8(s,r,i,o,a,"throw",c)}o(void 0)})}}const d8=1,z0e=2,Tc=3,zw=0,dEe=1,hEe=2,Cl=0,fEe=1,pEe=2,gEe=3,mEe=4,_Ee=5,Al=301,Zu=302,S_=306,ts=1001,Cr=1003,Ar=1006,Ju=1008,Ml=1009,Rl=1014,Ia=1015,I_=1016,ed=1020,qs=1023,td=1026,Uf=1027,nd=3001,Kr="srgb",xc="srgb-linear",eR="display-p3",Xw="display-p3-linear",Qw="linear",On="srgb",Zw="rec709",Jw="p3",zf=7680,t9="300 es",Ca=2e3;class Hf{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Ri=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],id=Math.PI/180,Gf=180/Math.PI;function Ks(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Ri[255&n]+Ri[n>>8&255]+Ri[n>>16&255]+Ri[n>>24&255]+"-"+Ri[255&e]+Ri[e>>8&255]+"-"+Ri[e>>16&15|64]+Ri[e>>24&255]+"-"+Ri[63&t|128]+Ri[t>>8&255]+"-"+Ri[t>>16&255]+Ri[t>>24&255]+Ri[255&r]+Ri[r>>8&255]+Ri[r>>16&255]+Ri[r>>24&255]).toLowerCase()}function ir(n,e,t){return Math.max(e,Math.min(t,n))}function A_(n,e,t){return(1-t)*n+t*e}function rR(n){return 0==(n&n-1)&&0!==n}function tT(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function bs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function It(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}class ie{constructor(e=0,t=0){ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(ir(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pt{constructor(e,t,r,i,s,o,a,c,l){Pt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,r,i,s,o,a,c,l)}set(e,t,r,i,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],c=r[6],l=r[1],u=r[4],d=r[7],h=r[2],f=r[5],p=r[8],g=i[0],m=i[3],_=i[6],y=i[1],v=i[4],E=i[7],w=i[2],b=i[5],x=i[8];return s[0]=o*g+a*y+c*w,s[3]=o*m+a*v+c*b,s[6]=o*_+a*E+c*x,s[1]=l*g+u*y+d*w,s[4]=l*m+u*v+d*b,s[7]=l*_+u*E+d*x,s[2]=h*g+f*y+p*w,s[5]=h*m+f*v+p*b,s[8]=h*_+f*E+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-r*s*u+r*a*c+i*s*l-i*o*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,p=t*d+r*h+i*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(i*l-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=h*g,e[4]=(u*t-i*c)*g,e[5]=(i*s-a*t)*g,e[6]=f*g,e[7]=(r*c-l*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(r*c,r*l,-r*(c*o+l*a)+o+e,-i*l,i*c,-i*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(iR.makeScale(e,t)),this}rotate(e){return this.premultiply(iR.makeRotation(-e)),this}translate(e,t){return this.premultiply(iR.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const iR=new Pt;function r9(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function M_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function twe(){const n=M_("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const i9={};function R_(n){n in i9||(i9[n]=!0,console.warn(n))}const s9=(new Pt).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),o9=(new Pt).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),nT={[xc]:{transfer:Qw,primaries:Zw,toReference:n=>n,fromReference:n=>n},[Kr]:{transfer:On,primaries:Zw,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Xw]:{transfer:Qw,primaries:Jw,toReference:n=>n.applyMatrix3(o9),fromReference:n=>n.applyMatrix3(s9)},[eR]:{transfer:On,primaries:Jw,toReference:n=>n.convertSRGBToLinear().applyMatrix3(o9),fromReference:n=>n.applyMatrix3(s9).convertLinearToSRGB()}},nwe=new Set([xc,Xw]),mn={enabled:!0,_workingColorSpace:xc,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!nwe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,nT[t].fromReference)((0,nT[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return nT[n].primaries},getTransfer:function(n){return""===n?Qw:nT[n].transfer}};function $f(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function sR(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let jf;class a9{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===jf&&(jf=M_("canvas")),jf.width=e.width,jf.height=e.height;const r=jf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=jf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=M_("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=255*$f(s[o]/255);return r.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*$f(t[r]/255)):$f(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rwe=0;class qf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rwe++}),this.uuid=Ks(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)s.push(oR(i[o].isDataTexture?i[o].image:i[o]))}else s=oR(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function oR(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?a9.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iwe=0,Pl=(()=>{class n extends Hf{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=ts,s=ts,o=Ar,a=Ju,c=qs,l=Ml,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iwe++}),this.uuid=Ks(),this.name="",this.source=new qf(t),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new ie(0,0),this.repeat=new ie(1,1),this.center=new ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof d?this.colorSpace=d:(R_("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===nd?Kr:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case ts:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case ts:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return R_("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Kr?nd:3e3}set encoding(t){R_("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===nd?Kr:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class _n{constructor(e=0,t=0,r=0,i=1){_n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],g=c[2],m=c[6],_=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(l+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(l+1)/2,E=(f+1)/2,w=(_+1)/2,b=(u+h)/4,x=(d+g)/4,A=(p+m)/4;return v>E&&v>w?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=b/r,s=x/r):E>w?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=b/i,s=A/i):w<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=x/s,i=A/s),this.set(r,i,s,t),this}let y=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(d-g)/y,this.z=(h-u)/y,this.w=Math.acos((l+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class swe extends Hf{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new _n(0,0,e,t),this.scissorTest=!1,this.viewport=new _n(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==r.encoding&&(R_("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===nd?Kr:""),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ar,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Pl(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new qf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class sd extends swe{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class aR extends Pl{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Cr,this.minFilter=Cr,this.wrapR=ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class c9 extends Pl{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Cr,this.minFilter=Cr,this.wrapR=ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ys{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let c=r[i+0],l=r[i+1],u=r[i+2],d=r[i+3];const h=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=g);if(d!==g||c!==h||l!==f||u!==p){let m=1-a;const _=c*h+l*f+u*p+d*g,y=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){const w=Math.sqrt(v),b=Math.atan2(w,_*y);m=Math.sin(m*b)/w,a=Math.sin(a*b)/w}const E=a*y;if(c=c*m+h*E,l=l*m+f*E,u=u*m+p*E,d=d*m+g*E,m===1-a){const w=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=w,l*=w,u*=w,d*=w}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],c=r[i+1],l=r[i+2],u=r[i+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+c*f-l*h,e[t+1]=c*p+u*h+l*d-a*f,e[t+2]=l*p+u*f+a*h-c*d,e[t+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(r/2),u=a(i/2),d=a(s/2),h=c(r/2),f=c(i/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+l)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(s-l)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-i)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ir(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=r*u+o*a+i*l-s*c,this._y=i*u+o*c+s*a-r*l,this._z=s*u+o*l+r*c-i*a,this._w=o*u-r*a-i*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class R{constructor(e=0,t=0,r=0){R.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(l9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(l9.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*i-a*r),u=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+c*l+o*d-a*u,this.y=r+c*u+a*l-s*d,this.z=i+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-r*c,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return cR.copy(this).projectOnVector(e),this.sub(cR)}reflect(e){return this.sub(cR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(ir(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cR=new R,l9=new Ys;class xs{constructor(e=new R(1/0,1/0,1/0),t=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Xo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Xo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Xo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r){const s=r.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,Xo):Xo.fromBufferAttribute(s,o),Xo.applyMatrix4(e.matrixWorld),this.expandByPoint(Xo);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),rT.copy(e.boundingBox)):(null===r.boundingBox&&r.computeBoundingBox(),rT.copy(r.boundingBox)),rT.applyMatrix4(e.matrixWorld),this.union(rT)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xo),Xo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(P_),iT.subVectors(this.max,P_),Kf.subVectors(e.a,P_),Yf.subVectors(e.b,P_),Xf.subVectors(e.c,P_),Dl.subVectors(Yf,Kf),Nl.subVectors(Xf,Yf),od.subVectors(Kf,Xf);let t=[0,-Dl.z,Dl.y,0,-Nl.z,Nl.y,0,-od.z,od.y,Dl.z,0,-Dl.x,Nl.z,0,-Nl.x,od.z,0,-od.x,-Dl.y,Dl.x,0,-Nl.y,Nl.x,0,-od.y,od.x,0];return!(!lR(t,Kf,Yf,Xf,iT)||(t=[1,0,0,0,1,0,0,0,1],!lR(t,Kf,Yf,Xf,iT)))&&(sT.crossVectors(Dl,Nl),t=[sT.x,sT.y,sT.z],lR(t,Kf,Yf,Xf,iT))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Xo).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sc=[new R,new R,new R,new R,new R,new R,new R,new R],Xo=new R,rT=new xs,Kf=new R,Yf=new R,Xf=new R,Dl=new R,Nl=new R,od=new R,P_=new R,iT=new R,sT=new R,ad=new R;function lR(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){ad.fromArray(n,s);const a=i.x*Math.abs(ad.x)+i.y*Math.abs(ad.y)+i.z*Math.abs(ad.z),c=e.dot(ad),l=t.dot(ad),u=r.dot(ad);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const owe=new xs,D_=new R,uR=new R;class ns{constructor(e=new R,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):owe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;D_.subVectors(e,this.center);const t=D_.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=.5*(r-this.radius);this.center.addScaledVector(D_,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(uR.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(D_.copy(e.center).add(uR)),this.expandByPoint(D_.copy(e.center).sub(uR))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ic=new R,dR=new R,oT=new R,Ol=new R,hR=new R,aT=new R,fR=new R;class N_{constructor(e=new R,t=new R(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ic)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ic.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ic.copy(this.origin).addScaledVector(this.direction,t),Ic.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){dR.copy(e).add(t).multiplyScalar(.5),oT.copy(t).sub(e).normalize(),Ol.copy(this.origin).sub(dR);const s=.5*e.distanceTo(t),o=-this.direction.dot(oT),a=Ol.dot(this.direction),c=-Ol.dot(oT),l=Ol.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*c-a,h=o*a-c,p=s*u,d>=0)if(h>=-p)if(h<=p){const g=1/u;d*=g,h*=g,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(dR).addScaledVector(oT,h),f}intersectSphere(e,t){Ic.subVectors(e.center,this.origin);const r=Ic.dot(this.direction),i=Ic.dot(Ic)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,c=r+o;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),r>c||a>i)||((a>r||r!=r)&&(r=a),(c<i||i!=i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Ic)}intersectTriangle(e,t,r,i,s){hR.subVectors(t,e),aT.subVectors(r,e),fR.crossVectors(hR,aT);let a,o=this.direction.dot(fR);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ol.subVectors(this.origin,e);const c=a*this.direction.dot(aT.crossVectors(Ol,aT));if(c<0)return null;const l=a*this.direction.dot(hR.cross(Ol));if(l<0||c+l>o)return null;const u=-a*Ol.dot(fR);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ct{constructor(e,t,r,i,s,o,a,c,l,u,d,h,f,p,g,m){ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,r,i,s,o,a,c,l,u,d,h,f,p,g,m)}set(e,t,r,i,s,o,a,c,l,u,d,h,f,p,g,m){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=c,_[2]=l,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=p,_[11]=g,_[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ct).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Qf.setFromMatrixColumn(e,0).length(),s=1/Qf.setFromMatrixColumn(e,1).length(),o=1/Qf.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+p*l,t[5]=h-g*l,t[9]=-a*c,t[2]=g-h*l,t[6]=p+f*l,t[10]=o*c}else if("YXZ"===e.order){const h=c*u,f=c*d,p=l*u,g=l*d;t[0]=h+g*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+h*a,t[10]=o*c}else if("ZXY"===e.order){const h=c*u,f=c*d,p=l*u,g=l*d;t[0]=h-g*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,g=a*d;t[0]=c*u,t[4]=p*l-f,t[8]=h*l+g,t[1]=c*d,t[5]=g*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const h=o*c,f=o*l,p=a*c,g=a*l;t[0]=c*u,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+p,t[10]=h-g*d}else if("XZY"===e.order){const h=o*c,f=o*l,p=a*c,g=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+g,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(awe,e,cwe)}lookAt(e,t,r){const i=this.elements;return Xs.subVectors(e,t),0===Xs.lengthSq()&&(Xs.z=1),Xs.normalize(),kl.crossVectors(r,Xs),0===kl.lengthSq()&&(1===Math.abs(r.z)?Xs.x+=1e-4:Xs.z+=1e-4,Xs.normalize(),kl.crossVectors(r,Xs)),kl.normalize(),cT.crossVectors(Xs,kl),i[0]=kl.x,i[4]=cT.x,i[8]=Xs.x,i[1]=kl.y,i[5]=cT.y,i[9]=Xs.y,i[2]=kl.z,i[6]=cT.z,i[10]=Xs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],c=r[8],l=r[12],u=r[1],d=r[5],h=r[9],f=r[13],p=r[2],g=r[6],m=r[10],_=r[14],y=r[3],v=r[7],E=r[11],w=r[15],b=i[0],x=i[4],A=i[8],T=i[12],C=i[1],F=i[5],z=i[9],Q=i[13],N=i[2],H=i[6],K=i[10],$=i[14],le=i[3],X=i[7],re=i[11],ce=i[15];return s[0]=o*b+a*C+c*N+l*le,s[4]=o*x+a*F+c*H+l*X,s[8]=o*A+a*z+c*K+l*re,s[12]=o*T+a*Q+c*$+l*ce,s[1]=u*b+d*C+h*N+f*le,s[5]=u*x+d*F+h*H+f*X,s[9]=u*A+d*z+h*K+f*re,s[13]=u*T+d*Q+h*$+f*ce,s[2]=p*b+g*C+m*N+_*le,s[6]=p*x+g*F+m*H+_*X,s[10]=p*A+g*z+m*K+_*re,s[14]=p*T+g*Q+m*$+_*ce,s[3]=y*b+v*C+E*N+w*le,s[7]=y*x+v*F+E*H+w*X,s[11]=y*A+v*z+E*K+w*re,s[15]=y*T+v*Q+E*$+w*ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*c*d-i*l*d-s*a*h+r*l*h+i*a*f-r*c*f)+e[7]*(+t*c*f-t*l*h+s*o*h-i*o*f+i*l*u-s*c*u)+e[11]*(+t*l*d-t*a*f-s*o*d+r*o*f+s*a*u-r*l*u)+e[15]*(-i*a*u-t*c*d+t*a*h+i*o*d-r*o*h+r*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],_=e[15],y=d*m*l-g*h*l+g*c*f-a*m*f-d*c*_+a*h*_,v=p*h*l-u*m*l-p*c*f+o*m*f+u*c*_-o*h*_,E=u*g*l-p*d*l+p*a*f-o*g*f-u*a*_+o*d*_,w=p*d*c-u*g*c-p*a*h+o*g*h+u*a*m-o*d*m,b=t*y+r*v+i*E+s*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=y*x,e[1]=(g*h*s-d*m*s-g*i*f+r*m*f+d*i*_-r*h*_)*x,e[2]=(a*m*s-g*c*s+g*i*l-r*m*l-a*i*_+r*c*_)*x,e[3]=(d*c*s-a*h*s-d*i*l+r*h*l+a*i*f-r*c*f)*x,e[4]=v*x,e[5]=(u*m*s-p*h*s+p*i*f-t*m*f-u*i*_+t*h*_)*x,e[6]=(p*c*s-o*m*s-p*i*l+t*m*l+o*i*_-t*c*_)*x,e[7]=(o*h*s-u*c*s+u*i*l-t*h*l-o*i*f+t*c*f)*x,e[8]=E*x,e[9]=(p*d*s-u*g*s-p*r*f+t*g*f+u*r*_-t*d*_)*x,e[10]=(o*g*s-p*a*s+p*r*l-t*g*l-o*r*_+t*a*_)*x,e[11]=(u*a*s-o*d*s-u*r*l+t*d*l+o*r*f-t*a*f)*x,e[12]=w*x,e[13]=(u*g*i-p*d*i+p*r*h-t*g*h-u*r*m+t*d*m)*x,e[14]=(p*a*i-o*g*i-p*r*c+t*g*c+o*r*m-t*a*m)*x,e[15]=(o*d*i-u*a*i+u*r*c-t*d*c-o*r*h+t*a*h)*x,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+r,l*a-i*c,l*c+i*a,0,l*a+i*c,u*a+r,u*c-i*o,0,l*c-i*a,u*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,p=s*d,g=o*u,m=o*d,_=a*d,y=c*l,v=c*u,E=c*d,w=r.x,b=r.y,x=r.z;return i[0]=(1-(g+_))*w,i[1]=(f+E)*w,i[2]=(p-v)*w,i[3]=0,i[4]=(f-E)*b,i[5]=(1-(h+_))*b,i[6]=(m+y)*b,i[7]=0,i[8]=(p+v)*x,i[9]=(m-y)*x,i[10]=(1-(h+g))*x,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Qf.set(i[0],i[1],i[2]).length();const o=Qf.set(i[4],i[5],i[6]).length(),a=Qf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Qo.copy(this);const l=1/s,u=1/o,d=1/a;return Qo.elements[0]*=l,Qo.elements[1]*=l,Qo.elements[2]*=l,Qo.elements[4]*=u,Qo.elements[5]*=u,Qo.elements[6]*=u,Qo.elements[8]*=d,Qo.elements[9]*=d,Qo.elements[10]*=d,t.setFromRotationMatrix(Qo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Ca){const c=this.elements,l=2*s/(t-e),u=2*s/(r-i),d=(t+e)/(t-e),h=(r+i)/(r-i);let f,p;if(a===Ca)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),p=-o*s/(o-s)}return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Ca){const c=this.elements,l=1/(t-e),u=1/(r-i),d=1/(o-s),h=(t+e)*l,f=(r+i)*u;let p,g;if(a===Ca)p=(o+s)*d,g=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,g=-1*d}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=g,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Qf=new R,Qo=new ct,awe=new R(0,0,0),cwe=new R(1,1,1),kl=new R,cT=new R,Xs=new R,u9=new ct,d9=new Ys;let lwe=(()=>{class n{constructor(t=0,r=0,i=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,i,s=this._order){return this._x=t,this._y=r,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,i=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(r){case"XYZ":this._y=Math.asin(ir(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ir(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(ir(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-ir(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ir(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-ir(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,r,i){return u9.makeRotationFromQuaternion(t),this.setFromRotationMatrix(u9,r,i)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return d9.setFromEuler(this),this.setFromQuaternion(d9,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class pR{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let uwe=0;const h9=new R,Zf=new Ys,Cc=new ct,lT=new R,O_=new R,dwe=new R,hwe=new Ys,f9=new R(1,0,0),p9=new R(0,1,0),g9=new R(0,0,1),fwe={type:"added"},pwe={type:"removed"};let Co=(()=>{class n extends Hf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uwe++}),this.uuid=Ks(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new R,r=new lwe,i=new Ys,s=new R(1,1,1);r._onChange(function o(){i.setFromEuler(r,!1)}),i._onChange(function a(){r.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ct},normalMatrix:{value:new Pt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pR,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return Zf.setFromAxisAngle(t,r),this.quaternion.multiply(Zf),this}rotateOnWorldAxis(t,r){return Zf.setFromAxisAngle(t,r),this.quaternion.premultiply(Zf),this}rotateX(t){return this.rotateOnAxis(f9,t)}rotateY(t){return this.rotateOnAxis(p9,t)}rotateZ(t){return this.rotateOnAxis(g9,t)}translateOnAxis(t,r){return h9.copy(t).applyQuaternion(this.quaternion),this.position.add(h9.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(f9,t)}translateY(t){return this.translateOnAxis(p9,t)}translateZ(t){return this.translateOnAxis(g9,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Cc.copy(this.matrixWorld).invert())}lookAt(t,r,i){t.isVector3?lT.copy(t):lT.set(t,r,i);const s=this.parent;this.updateWorldMatrix(!0,!1),O_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cc.lookAt(O_,lT,this.up):Cc.lookAt(lT,O_,this.up),this.quaternion.setFromRotationMatrix(Cc),s&&(Cc.extractRotation(s.matrixWorld),Zf.setFromRotationMatrix(Cc),this.quaternion.premultiply(Zf.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(fwe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(pwe)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Cc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Cc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Cc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectByProperty(t,r);if(void 0!==a)return a}}getObjectsByProperty(t,r,i=[]){this[t]===r&&i.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,r,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(O_,t,dwe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(O_,hwe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].traverseVisible(t)}traverseAncestors(t){const r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let i=0,s=r.length;i<s;i++){const o=r[i];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=void 0===t||"string"==typeof t,i={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(r){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),g=a(t.nodes);c.length>0&&(i.geometries=c),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=s,i;function a(c){const l=[];for(const u in c){const d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(let i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}return n.DEFAULT_UP=new R(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Zo=new R,Ac=new R,gR=new R,Mc=new R,Jf=new R,ep=new R,m9=new R,mR=new R,_R=new R,yR=new R;let uT=!1;class Qs{constructor(e=new R,t=new R,r=new R){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Zo.subVectors(e,t),i.cross(Zo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Zo.subVectors(i,t),Ac.subVectors(r,t),gR.subVectors(e,t);const o=Zo.dot(Zo),a=Zo.dot(Ac),c=Zo.dot(gR),l=Ac.dot(Ac),u=Ac.dot(gR),d=o*l-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Mc),Mc.x>=0&&Mc.y>=0&&Mc.x+Mc.y<=1}static getUV(e,t,r,i,s,o,a,c){return!1===uT&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),uT=!0),this.getInterpolation(e,t,r,i,s,o,a,c)}static getInterpolation(e,t,r,i,s,o,a,c){return this.getBarycoord(e,t,r,i,Mc),c.setScalar(0),c.addScaledVector(s,Mc.x),c.addScaledVector(o,Mc.y),c.addScaledVector(a,Mc.z),c}static isFrontFacing(e,t,r,i){return Zo.subVectors(r,t),Ac.subVectors(e,t),Zo.cross(Ac).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zo.subVectors(this.c,this.b),Ac.subVectors(this.a,this.b),.5*Zo.cross(Ac).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Qs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Qs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return!1===uT&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),uT=!0),Qs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Qs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Qs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Qs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Jf.subVectors(i,r),ep.subVectors(s,r),mR.subVectors(e,r);const c=Jf.dot(mR),l=ep.dot(mR);if(c<=0&&l<=0)return t.copy(r);_R.subVectors(e,i);const u=Jf.dot(_R),d=ep.dot(_R);if(u>=0&&d<=u)return t.copy(i);const h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(r).addScaledVector(Jf,o);yR.subVectors(e,s);const f=Jf.dot(yR),p=ep.dot(yR);if(p>=0&&f<=p)return t.copy(s);const g=f*l-c*p;if(g<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(r).addScaledVector(ep,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return m9.subVectors(s,i),a=(d-u)/(d-u+(f-p)),t.copy(i).addScaledVector(m9,a);const _=1/(m+g+h);return o=g*_,a=h*_,t.copy(r).addScaledVector(Jf,o).addScaledVector(ep,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ll={h:0,s:0,l:0},dT={h:0,s:0,l:0};function vR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Ne{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(void 0===t&&void 0===r){const i=e;i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Kr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,mn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=mn.workingColorSpace){return this.r=e,this.g=t,this.b=r,mn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=mn.workingColorSpace){if(e=function nR(n,e){return(n%e+e)%e}(e,1),t=ir(t,0,1),r=ir(r,0,1),0===t)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=vR(o,s,e+1/3),this.g=vR(o,s,e),this.b=vR(o,s,e-1/3)}return mn.toWorkingColorSpace(this,i),this}setStyle(e,t=Kr){function r(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[2];switch(i[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Kr){const r=_9[e.toLowerCase()];return void 0!==r?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$f(e.r),this.g=$f(e.g),this.b=$f(e.b),this}copyLinearToSRGB(e){return this.r=sR(e.r),this.g=sR(e.g),this.b=sR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Kr){return mn.fromWorkingColorSpace(Pi.copy(this),e),65536*Math.round(ir(255*Pi.r,0,255))+256*Math.round(ir(255*Pi.g,0,255))+Math.round(ir(255*Pi.b,0,255))}getHexString(e=Kr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=mn.workingColorSpace){mn.fromWorkingColorSpace(Pi.copy(this),t);const r=Pi.r,i=Pi.g,s=Pi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case r:c=(i-s)/d+(i<s?6:0);break;case i:c=(s-r)/d+2;break;case s:c=(r-i)/d+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=mn.workingColorSpace){return mn.fromWorkingColorSpace(Pi.copy(this),t),e.r=Pi.r,e.g=Pi.g,e.b=Pi.b,e}getStyle(e=Kr){mn.fromWorkingColorSpace(Pi.copy(this),e);const t=Pi.r,r=Pi.g,i=Pi.b;return e!==Kr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*r)},${Math.round(255*i)})`}offsetHSL(e,t,r){return this.getHSL(Ll),this.setHSL(Ll.h+e,Ll.s+t,Ll.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ll),e.getHSL(dT);const r=A_(Ll.h,dT.h,t),i=A_(Ll.s,dT.s,t),s=A_(Ll.l,dT.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pi=new Ne;Ne.NAMES=_9;let gwe=0;class k_ extends Hf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gwe++}),this.uuid=Ks(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ne(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=zf,this.stencilZFail=zf,this.stencilZPass=zf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(r.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),!0===this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=!0),204!==this.blendSrc&&(r.blendSrc=this.blendSrc),205!==this.blendDst&&(r.blendDst=this.blendDst),100!==this.blendEquation&&(r.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(r.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(r.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(r.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(r.depthFunc=this.depthFunc),!1===this.depthTest&&(r.depthTest=this.depthTest),!1===this.depthWrite&&(r.depthWrite=this.depthWrite),!1===this.colorWrite&&(r.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(r.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(r.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(r.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==zf&&(r.stencilFail=this.stencilFail),this.stencilZFail!==zf&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==zf&&(r.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(r.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaHash&&(r.alphaHash=!0),!0===this.alphaToCoverage&&(r.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=!0),!0===this.forceSinglePass&&(r.forceSinglePass=!0),!0===this.wireframe&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Aa extends k_{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Mr=new R,hT=new ie;class Rr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=r,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ia,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)hT.fromBufferAttribute(this,t),hT.applyMatrix3(e),this.setXY(t,hT.x,hT.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Mr.fromBufferAttribute(this,t),Mr.applyMatrix3(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Mr.fromBufferAttribute(this,t),Mr.applyMatrix4(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Mr.fromBufferAttribute(this,t),Mr.applyNormalMatrix(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Mr.fromBufferAttribute(this,t),Mr.transformDirection(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=bs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=It(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=bs(t,this.array)),t}setX(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=bs(t,this.array)),t}setY(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=bs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=bs(t,this.array)),t}setW(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),r=It(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),r=It(r,this.array),i=It(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),r=It(r,this.array),i=It(i,this.array),s=It(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class y9 extends Rr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class v9 extends Rr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Ge extends Rr{constructor(e,t,r){super(new Float32Array(e),t,r)}}let _we=0;const Ao=new ct,ER=new Co,tp=new R,Zs=new xs,F_=new xs,Yr=new R;class Lt extends Hf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_we++}),this.uuid=Ks(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(r9(e)?v9:y9)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const s=(new Pt).getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ao.makeRotationFromQuaternion(e),this.applyMatrix4(Ao),this}rotateX(e){return Ao.makeRotationX(e),this.applyMatrix4(Ao),this}rotateY(e){return Ao.makeRotationY(e),this.applyMatrix4(Ao),this}rotateZ(e){return Ao.makeRotationZ(e),this.applyMatrix4(Ao),this}translate(e,t,r){return Ao.makeTranslation(e,t,r),this.applyMatrix4(Ao),this}scale(e,t,r){return Ao.makeScale(e,t,r),this.applyMatrix4(Ao),this}lookAt(e){return ER.lookAt(e),ER.updateMatrix(),this.applyMatrix4(ER.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tp).negate(),this.translate(tp.x,tp.y,tp.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ge(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++)Zs.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Yr.addVectors(this.boundingBox.min,Zs.min),this.boundingBox.expandByPoint(Yr),Yr.addVectors(this.boundingBox.max,Zs.max),this.boundingBox.expandByPoint(Yr)):(this.boundingBox.expandByPoint(Zs.min),this.boundingBox.expandByPoint(Zs.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ns);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new R,1/0);if(e){const r=this.boundingSphere.center;if(Zs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)F_.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Yr.addVectors(Zs.min,F_.min),Zs.expandByPoint(Yr),Yr.addVectors(Zs.max,F_.max),Zs.expandByPoint(Yr)):(Zs.expandByPoint(F_.min),Zs.expandByPoint(F_.max));Zs.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Yr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Yr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Yr.fromBufferAttribute(a,l),c&&(tp.fromBufferAttribute(e,l),Yr.add(tp)),i=Math.max(i,r.distanceToSquared(Yr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Rr(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let C=0;C<a;C++)l[C]=new R,u[C]=new R;const d=new R,h=new R,f=new R,p=new ie,g=new ie,m=new ie,_=new R,y=new R;function v(C,F,z){d.fromArray(i,3*C),h.fromArray(i,3*F),f.fromArray(i,3*z),p.fromArray(o,2*C),g.fromArray(o,2*F),m.fromArray(o,2*z),h.sub(d),f.sub(d),g.sub(p),m.sub(p);const Q=1/(g.x*m.y-m.x*g.y);isFinite(Q)&&(_.copy(h).multiplyScalar(m.y).addScaledVector(f,-g.y).multiplyScalar(Q),y.copy(f).multiplyScalar(g.x).addScaledVector(h,-m.x).multiplyScalar(Q),l[C].add(_),l[F].add(_),l[z].add(_),u[C].add(y),u[F].add(y),u[z].add(y))}let E=this.groups;0===E.length&&(E=[{start:0,count:r.length}]);for(let C=0,F=E.length;C<F;++C){const z=E[C],Q=z.start;for(let H=Q,K=Q+z.count;H<K;H+=3)v(r[H+0],r[H+1],r[H+2])}const w=new R,b=new R,x=new R,A=new R;function T(C){x.fromArray(s,3*C),A.copy(x);const F=l[C];w.copy(F),w.sub(x.multiplyScalar(x.dot(F))).normalize(),b.crossVectors(A,F);const Q=b.dot(u[C])<0?-1:1;c[4*C]=w.x,c[4*C+1]=w.y,c[4*C+2]=w.z,c[4*C+3]=Q}for(let C=0,F=E.length;C<F;++C){const z=E[C],Q=z.start;for(let H=Q,K=Q+z.count;H<K;H+=3)T(r[H+0]),T(r[H+1]),T(r[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new Rr(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new R,s=new R,o=new R,a=new R,c=new R,l=new R,u=new R,d=new R;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),m=e.getX(h+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,p),c.fromBufferAttribute(r,g),l.fromBufferAttribute(r,m),a.add(u),c.add(u),l.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,c.x,c.y,c.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Yr.fromBufferAttribute(e,t),Yr.normalize(),e.setXYZ(t,Yr.x,Yr.y,Yr.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u);let f=0,p=0;for(let g=0,m=c.length;g<m;g++){f=a.isInterleavedBufferAttribute?c[g]*a.data.stride+a.offset:c[g]*u;for(let _=0;_<u;_++)h[p++]=l[f++]}return new Rr(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Lt,r=this.index.array,i=this.attributes;for(const a in i){const l=e(i[a],r);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){const f=e(l[u],r);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r)e.data.attributes[c]=r[c].toJSON(e.data);const i={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++)u.push(l[d].toJSON(e.data));u.length>0&&(i[c]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const i=e.attributes;for(const l in i)this.setAttribute(l,i[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const E9=new ct,cd=new N_,fT=new ns,w9=new R,np=new R,rp=new R,ip=new R,wR=new R,pT=new R,gT=new ie,mT=new ie,_T=new ie,T9=new R,b9=new R,x9=new R,yT=new R,vT=new R;class _i extends Co{constructor(e=new Lt,t=new Aa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(r.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){pT.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c];0!==u&&(wR.fromBufferAttribute(s[c],e),pT.addScaledVector(o?wR:wR.sub(t),u))}t.add(pT)}return t}raycast(e,t){const r=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===r.boundingSphere&&r.computeBoundingSphere(),fT.copy(r.boundingSphere),fT.applyMatrix4(s),cd.copy(e.ray).recast(e.near),(!1!==fT.containsPoint(cd.origin)||!(null===cd.intersectSphere(fT,w9)||cd.origin.distanceToSquared(w9)>(e.far-e.near)**2))&&(E9.copy(s).invert(),cd.copy(e.ray).applyMatrix4(E9),(null===r.boundingBox||!1!==cd.intersectsBox(r.boundingBox))&&this._computeIntersections(e,t,cd)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const m=h[p],_=o[m.materialIndex];for(let E=Math.max(m.start,f.start),w=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));E<w;E+=3)i=ET(this,_,e,r,l,u,d,a.getX(E),a.getX(E+1),a.getX(E+2)),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=m.materialIndex,t.push(i))}else for(let m=Math.max(0,f.start),_=Math.min(a.count,f.start+f.count);m<_;m+=3)i=ET(this,o,e,r,l,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),i&&(i.faceIndex=Math.floor(m/3),t.push(i));else if(void 0!==c)if(Array.isArray(o))for(let p=0,g=h.length;p<g;p++){const m=h[p],_=o[m.materialIndex];for(let E=Math.max(m.start,f.start),w=Math.min(c.count,Math.min(m.start+m.count,f.start+f.count));E<w;E+=3)i=ET(this,_,e,r,l,u,d,E,E+1,E+2),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=m.materialIndex,t.push(i))}else for(let m=Math.max(0,f.start),_=Math.min(c.count,f.start+f.count);m<_;m+=3)i=ET(this,o,e,r,l,u,d,m,m+1,m+2),i&&(i.faceIndex=Math.floor(m/3),t.push(i))}}function ET(n,e,t,r,i,s,o,a,c,l){n.getVertexPosition(a,np),n.getVertexPosition(c,rp),n.getVertexPosition(l,ip);const u=function ywe(n,e,t,r,i,s,o,a){let c;if(c=1===e.side?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,0===e.side,a),null===c)return null;vT.copy(a),vT.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(vT);return l<t.near||l>t.far?null:{distance:l,point:vT.clone(),object:n}}(n,e,t,r,np,rp,ip,yT);if(u){i&&(gT.fromBufferAttribute(i,a),mT.fromBufferAttribute(i,c),_T.fromBufferAttribute(i,l),u.uv=Qs.getInterpolation(yT,np,rp,ip,gT,mT,_T,new ie)),s&&(gT.fromBufferAttribute(s,a),mT.fromBufferAttribute(s,c),_T.fromBufferAttribute(s,l),u.uv1=Qs.getInterpolation(yT,np,rp,ip,gT,mT,_T,new ie),u.uv2=u.uv1),o&&(T9.fromBufferAttribute(o,a),b9.fromBufferAttribute(o,c),x9.fromBufferAttribute(o,l),u.normal=Qs.getInterpolation(yT,np,rp,ip,T9,b9,x9,new R),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new R,materialIndex:0};Qs.getNormal(np,rp,ip,d.normal),u.face=d}return u}class sp extends Lt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],d=[];let h=0,f=0;function p(g,m,_,y,v,E,w,b,x,A,T){const C=E/x,F=w/A,z=E/2,Q=w/2,N=b/2,H=x+1,K=A+1;let $=0,le=0;const X=new R;for(let re=0;re<K;re++){const ce=re*F-Q;for(let Ce=0;Ce<H;Ce++)X[g]=(Ce*C-z)*y,X[m]=ce*v,X[_]=N,l.push(X.x,X.y,X.z),X[g]=0,X[m]=0,X[_]=b>0?1:-1,u.push(X.x,X.y,X.z),d.push(Ce/x),d.push(1-re/A),$+=1}for(let re=0;re<A;re++)for(let ce=0;ce<x;ce++){const Z=h+ce+H*(re+1),ne=h+(ce+1)+H*(re+1),he=h+(ce+1)+H*re;c.push(h+ce+H*re,Z,he),c.push(Z,ne,he),le+=6}a.addGroup(f,le,T),f+=le,h+=$}p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(u,3)),this.setAttribute("uv",new Ge(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function op(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():e[t][r]=Array.isArray(i)?i.slice():i}}return e}function rs(n){const e={};for(let t=0;t<n.length;t++){const r=op(n[t]);for(const i in r)e[i]=r[i]}return e}function S9(n){return null===n.getRenderTarget()?n.outputColorSpace:mn.workingColorSpace}const Ewe={clone:op,merge:rs};class Fl extends k_{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=op(e.uniforms),this.uniformsGroups=function vwe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;t.uniforms[i]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class TR extends Co{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=Ca}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class yi extends TR{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Gf*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*id*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Gf*Math.atan(Math.tan(.5*id*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*id*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*r/l,i*=o.width/c,r*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class bwe extends Co{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new yi(-90,1,e,t);i.layers=this.layers,this.add(i);const s=new yi(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new yi(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new yi(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new yi(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new yi(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===Ca)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,l),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class wT extends Pl{constructor(e,t,r,i,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:Al,r,i,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xwe extends sd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];void 0!==t.encoding&&(R_("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===nd?Kr:""),this.texture=new wT(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ar}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new sp(5,5,5),s=new Fl({name:"CubemapFromEquirect",uniforms:op(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new _i(i,s),a=t.minFilter;return t.minFilter===Ju&&(t.minFilter=Ar),new bwe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const bR=new R,Swe=new R,Iwe=new Pt;class ld{constructor(e=new R(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=bR.subVectors(r,t).cross(Swe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(bR),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Iwe.getNormalMatrix(e),i=this.coplanarPoint(bR).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ud=new ns,TT=new R;class bT{constructor(e=new ld,t=new ld,r=new ld,i=new ld,s=new ld,o=new ld){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Ca){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],g=i[10],m=i[11],_=i[12],y=i[13],v=i[14],E=i[15];if(r[0].setComponents(c-s,h-l,m-f,E-_).normalize(),r[1].setComponents(c+s,h+l,m+f,E+_).normalize(),r[2].setComponents(c+o,h+u,m+p,E+y).normalize(),r[3].setComponents(c-o,h-u,m-p,E-y).normalize(),r[4].setComponents(c-a,h-d,m-g,E-v).normalize(),t===Ca)r[5].setComponents(c+a,h+d,m+g,E+v).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);r[5].setComponents(a,d,g,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),ud.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ud.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ud)}intersectsSprite(e){return ud.center.set(0,0,0),ud.radius=.7071067811865476,ud.applyMatrix4(e.matrixWorld),this.intersectsSphere(ud)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(TT.x=i.normal.x>0?e.max.x:e.min.x,TT.y=i.normal.y>0?e.max.y:e.min.y,TT.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(TT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function I9(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Cwe(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),r.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=r.get(l);u&&(n.deleteBuffer(u.buffer),r.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const h=r.get(l);return void((!h||h.version<l.version)&&r.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const d=r.get(l);if(void 0===d)r.set(l,function i(l,u){const d=l.array,h=l.usage,f=d.byteLength,p=n.createBuffer();let g;if(n.bindBuffer(u,p),n.bufferData(u,d,h),l.onUploadCallback(),d instanceof Float32Array)g=n.FLOAT;else if(d instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");g=n.HALF_FLOAT}else g=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=n.SHORT;else if(d instanceof Uint32Array)g=n.UNSIGNED_INT;else if(d instanceof Int32Array)g=n.INT;else if(d instanceof Int8Array)g=n.BYTE;else if(d instanceof Uint8Array)g=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);g=n.UNSIGNED_BYTE}return{buffer:p,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:f}}(l,u));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(l,u,d){const h=u.array,f=u._updateRange,p=u.updateRanges;if(n.bindBuffer(d,l),-1===f.count&&0===p.length&&n.bufferSubData(d,0,h),0!==p.length){for(let g=0,m=p.length;g<m;g++){const _=p[g];t?n.bufferSubData(d,_.start*h.BYTES_PER_ELEMENT,h,_.start,_.count):n.bufferSubData(d,_.start*h.BYTES_PER_ELEMENT,h.subarray(_.start,_.start+_.count))}u.clearUpdateRanges()}-1!==f.count&&(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()})(d.buffer,l,u),d.version=l.version}}}}class xT extends Lt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),c=Math.floor(i),l=a+1,u=c+1,d=e/a,h=t/c,f=[],p=[],g=[],m=[];for(let _=0;_<u;_++){const y=_*h-o;for(let v=0;v<l;v++)p.push(v*d-s,-y,0),g.push(0,0,1),m.push(v/a),m.push(1-_/c)}for(let _=0;_<c;_++)for(let y=0;y<a;y++){const E=y+l*(_+1),w=y+1+l*(_+1),b=y+1+l*_;f.push(y+l*_,E,b),f.push(E,w,b)}this.setIndex(f),this.setAttribute("position",new Ge(p,3)),this.setAttribute("normal",new Ge(g,3)),this.setAttribute("uv",new Ge(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xT(e.width,e.height,e.widthSegments,e.heightSegments)}}const Mt={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ie={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Pt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Pt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Pt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Pt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Pt},normalScale:{value:new ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Pt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Pt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Pt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Pt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0},uvTransform:{value:new Pt}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}}},Ma={basic:{uniforms:rs([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:Mt.meshbasic_vert,fragmentShader:Mt.meshbasic_frag},lambert:{uniforms:rs([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Mt.meshlambert_vert,fragmentShader:Mt.meshlambert_frag},phong:{uniforms:rs([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:Mt.meshphong_vert,fragmentShader:Mt.meshphong_frag},standard:{uniforms:rs([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag},toon:{uniforms:rs([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Mt.meshtoon_vert,fragmentShader:Mt.meshtoon_frag},matcap:{uniforms:rs([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:Mt.meshmatcap_vert,fragmentShader:Mt.meshmatcap_frag},points:{uniforms:rs([Ie.points,Ie.fog]),vertexShader:Mt.points_vert,fragmentShader:Mt.points_frag},dashed:{uniforms:rs([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mt.linedashed_vert,fragmentShader:Mt.linedashed_frag},depth:{uniforms:rs([Ie.common,Ie.displacementmap]),vertexShader:Mt.depth_vert,fragmentShader:Mt.depth_frag},normal:{uniforms:rs([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:Mt.meshnormal_vert,fragmentShader:Mt.meshnormal_frag},sprite:{uniforms:rs([Ie.sprite,Ie.fog]),vertexShader:Mt.sprite_vert,fragmentShader:Mt.sprite_frag},background:{uniforms:{uvTransform:{value:new Pt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mt.background_vert,fragmentShader:Mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Mt.backgroundCube_vert,fragmentShader:Mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mt.cube_vert,fragmentShader:Mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mt.equirect_vert,fragmentShader:Mt.equirect_frag},distanceRGBA:{uniforms:rs([Ie.common,Ie.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mt.distanceRGBA_vert,fragmentShader:Mt.distanceRGBA_frag},shadow:{uniforms:rs([Ie.lights,Ie.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:Mt.shadow_vert,fragmentShader:Mt.shadow_frag}};Ma.physical={uniforms:rs([Ma.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Pt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Pt},clearcoatNormalScale:{value:new ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Pt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Pt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Pt},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Pt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Pt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Pt},transmissionSamplerSize:{value:new ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Pt},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Pt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Pt},anisotropyVector:{value:new ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Pt}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag};const ST={r:0,b:0,g:0};function Cbe(n,e,t,r,i,s,o){const a=new Ne(0);let l,u,c=!0===s?0:1,d=null,h=0,f=null;function g(m,_){m.getRGB(ST,S9(n)),r.buffers.color.setClear(ST.r,ST.g,ST.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(m,_=1){a.set(m),c=_,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(m){c=m,g(a,c)},render:function p(m,_){let y=!1,v=!0===_.isScene?_.background:null;v&&v.isTexture&&(v=(_.backgroundBlurriness>0?t:e).get(v)),null===v?g(a,c):v&&v.isColor&&(g(v,1),y=!0);const E=n.xr.getEnvironmentBlendMode();"additive"===E?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===E&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===S_)?(void 0===u&&(u=new _i(new sp(1,1,1),new Fl({name:"BackgroundCubeMaterial",uniforms:op(Ma.backgroundCube.uniforms),vertexShader:Ma.backgroundCube.vertexShader,fragmentShader:Ma.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,b,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=mn.getTransfer(v.colorSpace)!==On,(d!==v||h!==v.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new _i(new xT(2,2),new Fl({name:"BackgroundMaterial",uniforms:op(Ma.background.uniforms),vertexShader:Ma.background.vertexShader,fragmentShader:Ma.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,l.material.toneMapped=mn.getTransfer(v.colorSpace)!==On,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||h!==v.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}}}function Abe(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},c=m(null);let l=c,u=!1;function f(N){return r.isWebGL2?n.bindVertexArray(N):s.bindVertexArrayOES(N)}function p(N){return r.isWebGL2?n.deleteVertexArray(N):s.deleteVertexArrayOES(N)}function m(N){const H=[],K=[],$=[];for(let le=0;le<i;le++)H[le]=0,K[le]=0,$[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:K,attributeDivisors:$,object:N,attributes:{},index:null}}function v(){const N=l.newAttributes;for(let H=0,K=N.length;H<K;H++)N[H]=0}function E(N){w(N,0)}function w(N,H){const $=l.enabledAttributes,le=l.attributeDivisors;l.newAttributes[N]=1,0===$[N]&&(n.enableVertexAttribArray(N),$[N]=1),le[N]!==H&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,H),le[N]=H)}function b(){const N=l.newAttributes,H=l.enabledAttributes;for(let K=0,$=H.length;K<$;K++)H[K]!==N[K]&&(n.disableVertexAttribArray(K),H[K]=0)}function x(N,H,K,$,le,X,re){!0===re?n.vertexAttribIPointer(N,H,K,le,X):n.vertexAttribPointer(N,H,K,$,le,X)}function z(){Q(),u=!0,l!==c&&(l=c,f(l.object))}function Q(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function d(N,H,K,$,le){let X=!1;if(o){const re=function g(N,H,K){const $=!0===K.wireframe;let le=a[N.id];void 0===le&&(le={},a[N.id]=le);let X=le[H.id];void 0===X&&(X={},le[H.id]=X);let re=X[$];return void 0===re&&(re=m(function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),X[$]=re),re}($,K,H);l!==re&&(l=re,f(l.object)),X=function _(N,H,K,$){const le=l.attributes,X=H.attributes;let re=0;const ce=K.getAttributes();for(const Ce in ce)if(ce[Ce].location>=0){const ne=le[Ce];let he=X[Ce];if(void 0===he&&("instanceMatrix"===Ce&&N.instanceMatrix&&(he=N.instanceMatrix),"instanceColor"===Ce&&N.instanceColor&&(he=N.instanceColor)),void 0===ne||ne.attribute!==he||he&&ne.data!==he.data)return!0;re++}return l.attributesNum!==re||l.index!==$}(N,$,K,le),X&&function y(N,H,K,$){const le={},X=H.attributes;let re=0;const ce=K.getAttributes();for(const Ce in ce)if(ce[Ce].location>=0){let ne=X[Ce];void 0===ne&&("instanceMatrix"===Ce&&N.instanceMatrix&&(ne=N.instanceMatrix),"instanceColor"===Ce&&N.instanceColor&&(ne=N.instanceColor));const he={};he.attribute=ne,ne&&ne.data&&(he.data=ne.data),le[Ce]=he,re++}l.attributes=le,l.attributesNum=re,l.index=$}(N,$,K,le)}else{const re=!0===H.wireframe;(l.geometry!==$.id||l.program!==K.id||l.wireframe!==re)&&(l.geometry=$.id,l.program=K.id,l.wireframe=re,X=!0)}null!==le&&t.update(le,n.ELEMENT_ARRAY_BUFFER),(X||u)&&(u=!1,function A(N,H,K,$){if(!1===r.isWebGL2&&(N.isInstancedMesh||$.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;v();const le=$.attributes,X=K.getAttributes(),re=H.defaultAttributeValues;for(const ce in X){const Ce=X[ce];if(Ce.location>=0){let Z=le[ce];if(void 0===Z&&("instanceMatrix"===ce&&N.instanceMatrix&&(Z=N.instanceMatrix),"instanceColor"===ce&&N.instanceColor&&(Z=N.instanceColor)),void 0!==Z){const ne=Z.normalized,he=Z.itemSize,je=t.get(Z);if(void 0===je)continue;const Be=je.buffer,pt=je.type,ut=je.bytesPerElement,Ke=!0===r.isWebGL2&&(pt===n.INT||pt===n.UNSIGNED_INT||1013===Z.gpuType);if(Z.isInterleavedBufferAttribute){const et=Z.data,k=et.stride,be=Z.offset;if(et.isInstancedInterleavedBuffer){for(let ee=0;ee<Ce.locationSize;ee++)w(Ce.location+ee,et.meshPerAttribute);!0!==N.isInstancedMesh&&void 0===$._maxInstanceCount&&($._maxInstanceCount=et.meshPerAttribute*et.count)}else for(let ee=0;ee<Ce.locationSize;ee++)E(Ce.location+ee);n.bindBuffer(n.ARRAY_BUFFER,Be);for(let ee=0;ee<Ce.locationSize;ee++)x(Ce.location+ee,he/Ce.locationSize,pt,ne,k*ut,(be+he/Ce.locationSize*ee)*ut,Ke)}else{if(Z.isInstancedBufferAttribute){for(let et=0;et<Ce.locationSize;et++)w(Ce.location+et,Z.meshPerAttribute);!0!==N.isInstancedMesh&&void 0===$._maxInstanceCount&&($._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let et=0;et<Ce.locationSize;et++)E(Ce.location+et);n.bindBuffer(n.ARRAY_BUFFER,Be);for(let et=0;et<Ce.locationSize;et++)x(Ce.location+et,he/Ce.locationSize,pt,ne,he*ut,he/Ce.locationSize*et*ut,Ke)}}else if(void 0!==re){const ne=re[ce];if(void 0!==ne)switch(ne.length){case 2:n.vertexAttrib2fv(Ce.location,ne);break;case 3:n.vertexAttrib3fv(Ce.location,ne);break;case 4:n.vertexAttrib4fv(Ce.location,ne);break;default:n.vertexAttrib1fv(Ce.location,ne)}}}}b()}(N,H,K,$),null!==le&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(le).buffer))},reset:z,resetDefaultState:Q,dispose:function T(){z();for(const N in a){const H=a[N];for(const K in H){const $=H[K];for(const le in $)p($[le].object),delete $[le];delete H[K]}delete a[N]}},releaseStatesOfGeometry:function C(N){if(void 0===a[N.id])return;const H=a[N.id];for(const K in H){const $=H[K];for(const le in $)p($[le].object),delete $[le];delete H[K]}delete a[N.id]},releaseStatesOfProgram:function F(N){for(const H in a){const K=a[H];if(void 0===K[N.id])continue;const $=K[N.id];for(const le in $)p($[le].object),delete $[le];delete K[N.id]}},initAttributes:v,enableAttribute:E,disableUnusedAttributes:b}}function Mbe(n,e,t,r){const i=r.isWebGL2;let s;this.setMode=function o(u){s=u},this.render=function a(u,d){n.drawArrays(s,u,d),t.update(d,s,1)},this.renderInstances=function c(u,d,h){if(0===h)return;let f,p;if(i)f=n,p="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",null===f)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[p](s,u,d,h),t.update(d,s,h)},this.renderMultiDraw=function l(u,d,h){if(0===h)return;const f=e.get("WEBGL_multi_draw");if(null===f)for(let p=0;p<h;p++)this.render(u[p],d[p]);else{f.multiDrawArraysWEBGL(s,u,0,d,0,h);let p=0;for(let g=0;g<h;g++)p+=d[g];t.update(p,s,1)}}}function Rbe(n,e,t){let r;function s(x){if("highp"===x){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return"mediump"===x&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,E=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const x=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:m,maxVaryings:_,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:E,floatVertexTextures:v&&E,maxSamples:o?n.getParameter(n.MAX_SAMPLES):0}}function Pbe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new ld,a=new Pt,c={value:null,needsUpdate:!1};function u(d,h,f,p){const g=null!==d?d.length:0;let m=null;if(0!==g){if(m=c.value,!0!==p||null===m){const _=f+4*g,y=h.matrixWorldInverse;a.getNormalMatrix(y),(null===m||m.length<_)&&(m=new Float32Array(_));for(let v=0,E=f;v!==g;++v,E+=4)o.copy(d[v]).applyMatrix4(y,a),o.normal.toArray(m,E),m[E+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=0!==d.length||h||0!==r||i;return i=h,r=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,_=n.get(d);if(!i||null===p||0===p.length||s&&!m)s?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}();else{const y=s?0:r,v=4*y;let E=_.clippingState||null;c.value=E,E=u(p,h,v,f);for(let w=0;w!==v;++w)E[w]=t[w];_.clippingState=E,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}}}function Dbe(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=Al:304===a&&(o.mapping=Zu),o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function r(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new xwe(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",i),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class xR extends TR{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,c=i-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const C9=[.125,.215,.35,.446,.526,.582],SR=new xR,A9=new Ne;let IR=null,CR=0,AR=0;const hd=(1+Math.sqrt(5))/2,up=1/hd,M9=[new R(1,1,1),new R(-1,1,1),new R(1,1,-1),new R(-1,1,-1),new R(0,hd,up),new R(0,hd,-up),new R(up,0,hd),new R(-up,0,hd),new R(hd,up,0),new R(-hd,up,0)];class R9{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){IR=this._renderer.getRenderTarget(),CR=this._renderer.getActiveCubeFace(),AR=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=N9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=D9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IR,CR,AR),e.scissorTest=!1,IT(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Al||e.mapping===Zu?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),IR=this._renderer.getRenderTarget(),CR=this._renderer.getActiveCubeFace(),AR=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ar,minFilter:Ar,generateMipmaps:!1,type:I_,format:qs,colorSpace:xc,depthBuffer:!1},i=P9(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=P9(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Nbe(n){const e=[],t=[],r=[];let i=n;const s=n-4+1+C9.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let c=1/a;o>n-4?c=C9[o-n+4-1]:0===o&&(c=0),r.push(c);const l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,g=3,m=2,_=1,y=new Float32Array(g*p*f),v=new Float32Array(m*p*f),E=new Float32Array(_*p*f);for(let b=0;b<f;b++){const x=b%3*2/3-1,A=b>2?0:-1;y.set([x,A,0,x+2/3,A,0,x+2/3,A+1,0,x,A,0,x+2/3,A+1,0,x,A+1,0],g*p*b),v.set(h,m*p*b),E.set([b,b,b,b,b,b],_*p*b)}const w=new Lt;w.setAttribute("position",new Rr(y,g)),w.setAttribute("uv",new Rr(v,m)),w.setAttribute("faceIndex",new Rr(E,_)),e.push(w),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(s)),this._blurMaterial=function Obe(n,e,t){const r=new Float32Array(20),i=new R(0,1,0);return new Fl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return i}_compileMaterial(e){const t=new _i(this._lodPlanes[0],e);this._renderer.compile(t,SR)}_sceneToCubeUV(e,t,r,i){const a=new yi(90,1,t,r),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(A9),u.toneMapping=Cl,u.autoClear=!1;const f=new Aa({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new _i(new sp,f);let g=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,g=!0):(f.color.copy(A9),g=!0);for(let _=0;_<6;_++){const y=_%3;0===y?(a.up.set(0,c[_],0),a.lookAt(l[_],0,0)):1===y?(a.up.set(0,0,c[_]),a.lookAt(0,l[_],0)):(a.up.set(0,c[_],0),a.lookAt(0,0,l[_]));const v=this._cubeSize;IT(i,y*v,_>2?v:0,v,v),u.setRenderTarget(i),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Al||e.mapping===Zu;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=N9()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=D9());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new _i(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;IT(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(o,SR)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,s,M9[(i-1)%M9.length])}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new _i(this._lodPlanes[i],l),h=l.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,g=s/p,m=isFinite(s)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const _=[];let y=0;for(let x=0;x<20;++x){const A=x/g,T=Math.exp(-A*A/2);_.push(T),0===x?y+=T:x<m&&(y+=2*T)}for(let x=0;x<_.length;x++)_[x]=_[x]/y;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=p,h.mipInt.value=v-r;const E=this._sizeLods[i];IT(t,3*E*(i>v-4?i-v+4:0),4*(this._cubeSize-E),3*E,2*E),c.setRenderTarget(t),c.render(d,SR)}}function P9(n,e,t){const r=new sd(n,e,t);return r.texture.mapping=S_,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function IT(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function D9(){return new Fl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function N9(){return new Fl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function kbe(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function r(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=c===Al||c===Zu;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new R9(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(l&&d&&d.height>0||u&&d&&function i(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(d)){null===t&&(t=new R9(n));const h=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Lbe(n){const e={};function t(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Fbe(n,e,t,r){const i={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const g=h.morphAttributes[p];for(let m=0,_=g.length;m<_;m++)e.remove(g[m])}h.removeEventListener("dispose",o),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function l(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(null!==f){const y=f.array;g=f.version;for(let v=0,E=y.length;v<E;v+=3){const w=y[v+0],b=y[v+1],x=y[v+2];h.push(w,b,b,x,x,w)}}else{if(void 0===p)return;g=p.version;for(let v=0,E=p.array.length/3-1;v<E;v+=3){const w=v+0,b=v+1,x=v+2;h.push(w,b,b,x,x,w)}}const m=new(r9(h)?v9:y9)(h,1);m.version=g;const _=s.get(d);_&&e.remove(_),s.set(d,m)}return{get:function a(d,h){return!0===i[h.id]||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h},update:function c(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const f=d.morphAttributes;for(const p in f){const g=f[p];for(let m=0,_=g.length;m<_;m++)e.update(g[m],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&l(d)}else l(d);return s.get(d)}}}function Ube(n,e,t,r){const i=r.isWebGL2;let s,a,c;this.setMode=function o(f){s=f},this.setIndex=function l(f){a=f.type,c=f.bytesPerElement},this.render=function u(f,p){n.drawElements(s,p,a,f*c),t.update(p,s,1)},this.renderInstances=function d(f,p,g){if(0===g)return;let m,_;if(i)m=n,_="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[_](s,p,a,f*c,g),t.update(p,s,g)},this.renderMultiDraw=function h(f,p,g){if(0===g)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let _=0;_<g;_++)this.render(f[_]/c,p[_]);else{m.multiDrawElementsWEBGL(s,p,0,a,f,0,g);let _=0;for(let y=0;y<g;y++)_+=p[y];t.update(_,s,1)}}}function Vbe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Bbe(n,e){return n[0]-e[0]}function zbe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Hbe(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new _n,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,d){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0;let g=s.get(u);if(void 0===g||g.count!==p){let N=function(){z.dispose(),s.delete(u),u.removeEventListener("dispose",N)};void 0!==g&&g.texture.dispose();const y=void 0!==u.morphAttributes.position,v=void 0!==u.morphAttributes.normal,E=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let A=0;!0===y&&(A=1),!0===v&&(A=2),!0===E&&(A=3);let T=u.attributes.position.count*A,C=1;T>e.maxTextureSize&&(C=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const F=new Float32Array(T*C*4*p),z=new aR(F,T,C,p);z.type=Ia,z.needsUpdate=!0;const Q=4*A;for(let H=0;H<p;H++){const K=w[H],$=b[H],le=x[H],X=T*C*4*H;for(let re=0;re<K.count;re++){const ce=re*Q;!0===y&&(o.fromBufferAttribute(K,re),F[X+ce+0]=o.x,F[X+ce+1]=o.y,F[X+ce+2]=o.z,F[X+ce+3]=0),!0===v&&(o.fromBufferAttribute($,re),F[X+ce+4]=o.x,F[X+ce+5]=o.y,F[X+ce+6]=o.z,F[X+ce+7]=0),!0===E&&(o.fromBufferAttribute(le,re),F[X+ce+8]=o.x,F[X+ce+9]=o.y,F[X+ce+10]=o.z,F[X+ce+11]=4===le.itemSize?o.w:1)}}g={count:p,texture:z,size:new ie(T,C)},s.set(u,g),u.addEventListener("dispose",N)}let m=0;for(let y=0;y<h.length;y++)m+=h[y];const _=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",_),d.getUniforms().setValue(n,"morphTargetInfluences",h),d.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const f=void 0===h?0:h.length;let p=r[u.id];if(void 0===p||p.length!==f){p=[];for(let v=0;v<f;v++)p[v]=[v,0];r[u.id]=p}for(let v=0;v<f;v++){const E=p[v];E[0]=v,E[1]=h[v]}p.sort(zbe);for(let v=0;v<8;v++)v<f&&p[v][1]?(a[v][0]=p[v][0],a[v][1]=p[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(Bbe);const g=u.morphAttributes.position,m=u.morphAttributes.normal;let _=0;for(let v=0;v<8;v++){const E=a[v],w=E[0],b=E[1];w!==Number.MAX_SAFE_INTEGER&&b?(g&&u.getAttribute("morphTarget"+v)!==g[w]&&u.setAttribute("morphTarget"+v,g[w]),m&&u.getAttribute("morphNormal"+v)!==m[w]&&u.setAttribute("morphNormal"+v,m[w]),i[v]=b,_+=b):(g&&!0===u.hasAttribute("morphTarget"+v)&&u.deleteAttribute("morphTarget"+v),m&&!0===u.hasAttribute("morphNormal"+v)&&u.deleteAttribute("morphNormal"+v),i[v]=0)}const y=u.morphTargetsRelative?1:1-_;d.getUniforms().setValue(n,"morphTargetBaseInfluence",y),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}}}function Gbe(n,e,t,r){let i=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=r.render.frame,d=e.get(c,c.geometry);if(i.get(d)!==l&&(e.update(d),i.set(d,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),i.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,l))),c.isSkinnedMesh){const h=c.skeleton;i.get(h)!==l&&(h.update(),i.set(h,l))}return d},dispose:function o(){i=new WeakMap}}}class O9 extends Pl{constructor(e,t,r,i,s,o,a,c,l,u){if((u=void 0!==u?u:td)!==td&&u!==Uf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===td&&(r=Rl),void 0===r&&u===Uf&&(r=ed),super(null,i,s,o,a,c,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Cr,this.minFilter=void 0!==c?c:Cr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const k9=new Pl,L9=new O9(1,1);L9.compareFunction=515;const F9=new aR,U9=new c9,V9=new wT,B9=[],z9=[],H9=new Float32Array(16),G9=new Float32Array(9),W9=new Float32Array(4);function dp(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=B9[i];if(void 0===s&&(s=new Float32Array(i),B9[i]=s),0!==e){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Br(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function zr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function CT(n,e){let t=z9[e];void 0===t&&(t=new Int32Array(e),z9[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Wbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $be(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2fv(this.addr,e),zr(t,e)}}function jbe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Br(t,e))return;n.uniform3fv(this.addr,e),zr(t,e)}}function qbe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4fv(this.addr,e),zr(t,e)}}function Kbe(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Br(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zr(t,e)}else{if(Br(t,r))return;W9.set(r),n.uniformMatrix2fv(this.addr,!1,W9),zr(t,r)}}function Ybe(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Br(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zr(t,e)}else{if(Br(t,r))return;G9.set(r),n.uniformMatrix3fv(this.addr,!1,G9),zr(t,r)}}function Xbe(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Br(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zr(t,e)}else{if(Br(t,r))return;H9.set(r),n.uniformMatrix4fv(this.addr,!1,H9),zr(t,r)}}function Qbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Zbe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2iv(this.addr,e),zr(t,e)}}function Jbe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3iv(this.addr,e),zr(t,e)}}function exe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4iv(this.addr,e),zr(t,e)}}function txe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nxe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2uiv(this.addr,e),zr(t,e)}}function rxe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3uiv(this.addr,e),zr(t,e)}}function ixe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4uiv(this.addr,e),zr(t,e)}}function sxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||(this.type===n.SAMPLER_2D_SHADOW?L9:k9),i)}function oxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||U9,i)}function axe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||V9,i)}function cxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||F9,i)}function uxe(n,e){n.uniform1fv(this.addr,e)}function dxe(n,e){const t=dp(e,this.size,2);n.uniform2fv(this.addr,t)}function hxe(n,e){const t=dp(e,this.size,3);n.uniform3fv(this.addr,t)}function fxe(n,e){const t=dp(e,this.size,4);n.uniform4fv(this.addr,t)}function pxe(n,e){const t=dp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function gxe(n,e){const t=dp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function mxe(n,e){const t=dp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _xe(n,e){n.uniform1iv(this.addr,e)}function yxe(n,e){n.uniform2iv(this.addr,e)}function vxe(n,e){n.uniform3iv(this.addr,e)}function Exe(n,e){n.uniform4iv(this.addr,e)}function wxe(n,e){n.uniform1uiv(this.addr,e)}function Txe(n,e){n.uniform2uiv(this.addr,e)}function bxe(n,e){n.uniform3uiv(this.addr,e)}function xxe(n,e){n.uniform4uiv(this.addr,e)}function Sxe(n,e,t){const r=this.cache,i=e.length,s=CT(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),zr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||k9,s[o])}function Ixe(n,e,t){const r=this.cache,i=e.length,s=CT(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),zr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||U9,s[o])}function Cxe(n,e,t){const r=this.cache,i=e.length,s=CT(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),zr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||V9,s[o])}function Axe(n,e,t){const r=this.cache,i=e.length,s=CT(t,i);Br(r,s)||(n.uniform1iv(this.addr,s),zr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||F9,s[o])}class Rxe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=function lxe(n){switch(n){case 5126:return Wbe;case 35664:return $be;case 35665:return jbe;case 35666:return qbe;case 35674:return Kbe;case 35675:return Ybe;case 35676:return Xbe;case 5124:case 35670:return Qbe;case 35667:case 35671:return Zbe;case 35668:case 35672:return Jbe;case 35669:case 35673:return exe;case 5125:return txe;case 36294:return nxe;case 36295:return rxe;case 36296:return ixe;case 35678:case 36198:case 36298:case 36306:case 35682:return sxe;case 35679:case 36299:case 36307:return oxe;case 35680:case 36300:case 36308:case 36293:return axe;case 36289:case 36303:case 36311:case 36292:return cxe}}(t.type)}}class Pxe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function Mxe(n){switch(n){case 5126:return uxe;case 35664:return dxe;case 35665:return hxe;case 35666:return fxe;case 35674:return pxe;case 35675:return gxe;case 35676:return mxe;case 5124:case 35670:return _xe;case 35667:case 35671:return yxe;case 35668:case 35672:return vxe;case 35669:case 35673:return Exe;case 5125:return wxe;case 36294:return Txe;case 36295:return bxe;case 36296:return xxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Sxe;case 35679:case 36299:case 36307:return Ixe;case 35680:case 36300:case 36308:case 36293:return Cxe;case 36289:case 36303:case 36311:case 36292:return Axe}}(t.type)}}class Dxe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const RR=/(\w+)(\])?(\[|\.)?/g;function $9(n,e){n.seq.push(e),n.map[e.id]=e}function Nxe(n,e,t){const r=n.name,i=r.length;for(RR.lastIndex=0;;){const s=RR.exec(r);let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&RR.lastIndex+2===i){$9(t,void 0===l?new Rxe(a,n,e):new Pxe(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new Dxe(a),$9(t,d)),t=d}}}class AT{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i);Nxe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,r,i){const s=this.map[t];void 0!==s&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];void 0!==i&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=r[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function j9(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Oxe=37297;let kxe=0;function q9(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function Lxe(n,e){const t=n.split("\n"),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join("\n")}(n.getShaderSource(e),o)}return i}function Uxe(n,e){const t=function Fxe(n){const e=mn.getPrimaries(mn.workingColorSpace),t=mn.getPrimaries(n);let r;switch(e===t?r="":e===Jw&&t===Zw?r="LinearDisplayP3ToLinearSRGB":e===Zw&&t===Jw&&(r="LinearSRGBToLinearDisplayP3"),n){case xc:case Xw:return[r,"LinearTransferOETF"];case Kr:case eR:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Vxe(n,e){let t;switch(e){case fEe:t="Linear";break;case pEe:t="Reinhard";break;case gEe:t="OptimizedCineon";break;case mEe:t="ACESFilmic";break;case _Ee:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function U_(n){return""!==n}function K9(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Y9(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Gxe=/^[ \t]*#include +<([\w\d./]+)>/gm;function PR(n){return n.replace(Gxe,$xe)}const Wxe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function $xe(n,e){let t=Mt[e];if(void 0===t){const r=Wxe.get(e);if(void 0===r)throw new Error("Can not resolve #include <"+e+">");t=Mt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r)}return PR(t)}const jxe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function X9(n){return n.replace(jxe,qxe)}function qxe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Q9(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Jxe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function Kxe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===d8?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===z0e?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Tc&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function Yxe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Al:case Zu:e="ENVMAP_TYPE_CUBE";break;case S_:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Xxe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Zu&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Qxe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case zw:e="ENVMAP_BLENDING_MULTIPLY";break;case dEe:e="ENVMAP_BLENDING_MIX";break;case hEe:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function Zxe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),f=t.isWebGL2?"":function Bxe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(U_).join("\n")}(t),p=function zxe(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(s),g=i.createProgram();let m,_,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(U_).join("\n"),m.length>0&&(m+="\n"),_=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(U_).join("\n"),_.length>0&&(_+="\n")):(m=[Q9(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(U_).join("\n"),_=[f,Q9(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Cl?"#define TONE_MAPPING":"",t.toneMapping!==Cl?Mt.tonemapping_pars_fragment:"",t.toneMapping!==Cl?Vxe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mt.colorspace_pars_fragment,Uxe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(U_).join("\n")),o=PR(o),o=K9(o,t),o=Y9(o,t),a=PR(a),a=K9(a,t),a=Y9(a,t),o=X9(o),a=X9(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===t9?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===t9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const E=y+_+a,w=j9(i,i.VERTEX_SHADER,y+m+o),b=j9(i,i.FRAGMENT_SHADER,E);function x(F){if(n.debug.checkShaderErrors){const z=i.getProgramInfoLog(g).trim(),Q=i.getShaderInfoLog(w).trim(),N=i.getShaderInfoLog(b).trim();let H=!0,K=!0;if(!1===i.getProgramParameter(g,i.LINK_STATUS))if(H=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(i,g,w,b);else{const $=q9(i,w,"vertex"),le=q9(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+z+"\n"+$+"\n"+le)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===Q||""===N)&&(K=!1);K&&(F.diagnostics={runnable:H,programLog:z,vertexShader:{log:Q,prefix:m},fragmentShader:{log:N,prefix:_}})}i.deleteShader(w),i.deleteShader(b),A=new AT(i,g),T=function Hxe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(i,g)}let A,T;i.attachShader(g,w),i.attachShader(g,b),void 0!==t.index0AttributeName?i.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),this.getUniforms=function(){return void 0===A&&x(this),A},this.getAttributes=function(){return void 0===T&&x(this),T};let C=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=i.getProgramParameter(g,Oxe)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=kxe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=b,this}let eSe=0;class tSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,i=this._getShaderStage(e.vertexShader),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return void 0===r&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return void 0===r&&(r=new nSe(e),t.set(e,r)),r}}class nSe{constructor(e){this.id=eSe++,this.code=e,this.usedTimes=0}}function rSe(n,e,t,r,i,s,o){const a=new pR,c=new tSe,l=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(T){return 0===T?"uv":`uv${T}`}return{getParameters:function m(T,C,F,z,Q){const N=z.fog,H=Q.geometry,$=(T.isMeshStandardMaterial?t:e).get(T.envMap||(T.isMeshStandardMaterial?z.environment:null)),le=$&&$.mapping===S_?$.image.height:null,X=p[T.type];null!==T.precision&&(f=i.getMaxPrecision(T.precision),f!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",f,"instead."));const re=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,ce=void 0!==re?re.length:0;let Z,ne,he,je,Ce=0;if(void 0!==H.morphAttributes.position&&(Ce=1),void 0!==H.morphAttributes.normal&&(Ce=2),void 0!==H.morphAttributes.color&&(Ce=3),X){const hs=Ma[X];Z=hs.vertexShader,ne=hs.fragmentShader}else Z=T.vertexShader,ne=T.fragmentShader,c.update(T),he=c.getVertexShaderID(T),je=c.getFragmentShaderID(T);const Be=n.getRenderTarget(),pt=!0===Q.isInstancedMesh,Ke=!!T.map,k=!!$,be=!!T.aoMap,ee=!!T.lightMap,Ee=!!T.bumpMap,ae=!!T.normalMap,Ye=!!T.displacementMap,Pe=!!T.emissiveMap,Ue=!!T.metalnessMap,vt=!!T.roughnessMap,$t=T.anisotropy>0,er=T.clearcoat>0,D=T.iridescence>0,S=T.sheen>0,W=T.transmission>0,pe=$t&&!!T.anisotropyMap,de=er&&!!T.clearcoatMap,me=er&&!!T.clearcoatNormalMap,$e=er&&!!T.clearcoatRoughnessMap,we=D&&!!T.iridescenceMap,Re=D&&!!T.iridescenceThicknessMap,gt=S&&!!T.sheenColorMap,rn=S&&!!T.sheenRoughnessMap,ye=!!T.specularMap,vn=!!T.specularColorMap,xt=!!T.specularIntensityMap,mt=W&&!!T.transmissionMap,Ze=W&&!!T.thicknessMap,Ht=!!T.alphaMap,_e=!!T.extensions,J=!!H.attributes.uv1,xe=!!H.attributes.uv2,ot=!!H.attributes.uv3;let Qt=Cl;return T.toneMapped&&(null===Be||!0===Be.isXRRenderTarget)&&(Qt=n.toneMapping),{isWebGL2:u,shaderID:X,shaderType:T.type,shaderName:T.name,vertexShader:Z,fragmentShader:ne,defines:T.defines,customVertexShaderID:he,customFragmentShaderID:je,isRawShaderMaterial:!0===T.isRawShaderMaterial,glslVersion:T.glslVersion,precision:f,batching:!0===Q.isBatchedMesh,instancing:pt,instancingColor:pt&&null!==Q.instanceColor,supportsVertexTextures:h,outputColorSpace:null===Be?n.outputColorSpace:!0===Be.isXRRenderTarget?Be.texture.colorSpace:xc,map:Ke,matcap:!!T.matcap,envMap:k,envMapMode:k&&$.mapping,envMapCubeUVHeight:le,aoMap:be,lightMap:ee,bumpMap:Ee,normalMap:ae,displacementMap:h&&Ye,emissiveMap:Pe,normalMapObjectSpace:ae&&1===T.normalMapType,normalMapTangentSpace:ae&&0===T.normalMapType,metalnessMap:Ue,roughnessMap:vt,anisotropy:$t,anisotropyMap:pe,clearcoat:er,clearcoatMap:de,clearcoatNormalMap:me,clearcoatRoughnessMap:$e,iridescence:D,iridescenceMap:we,iridescenceThicknessMap:Re,sheen:S,sheenColorMap:gt,sheenRoughnessMap:rn,specularMap:ye,specularColorMap:vn,specularIntensityMap:xt,transmission:W,transmissionMap:mt,thicknessMap:Ze,gradientMap:!!T.gradientMap,opaque:!1===T.transparent&&1===T.blending,alphaMap:Ht,alphaTest:T.alphaTest>0,alphaHash:!!T.alphaHash,combine:T.combine,mapUv:Ke&&g(T.map.channel),aoMapUv:be&&g(T.aoMap.channel),lightMapUv:ee&&g(T.lightMap.channel),bumpMapUv:Ee&&g(T.bumpMap.channel),normalMapUv:ae&&g(T.normalMap.channel),displacementMapUv:Ye&&g(T.displacementMap.channel),emissiveMapUv:Pe&&g(T.emissiveMap.channel),metalnessMapUv:Ue&&g(T.metalnessMap.channel),roughnessMapUv:vt&&g(T.roughnessMap.channel),anisotropyMapUv:pe&&g(T.anisotropyMap.channel),clearcoatMapUv:de&&g(T.clearcoatMap.channel),clearcoatNormalMapUv:me&&g(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$e&&g(T.clearcoatRoughnessMap.channel),iridescenceMapUv:we&&g(T.iridescenceMap.channel),iridescenceThicknessMapUv:Re&&g(T.iridescenceThicknessMap.channel),sheenColorMapUv:gt&&g(T.sheenColorMap.channel),sheenRoughnessMapUv:rn&&g(T.sheenRoughnessMap.channel),specularMapUv:ye&&g(T.specularMap.channel),specularColorMapUv:vn&&g(T.specularColorMap.channel),specularIntensityMapUv:xt&&g(T.specularIntensityMap.channel),transmissionMapUv:mt&&g(T.transmissionMap.channel),thicknessMapUv:Ze&&g(T.thicknessMap.channel),alphaMapUv:Ht&&g(T.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(ae||$t),vertexColors:T.vertexColors,vertexAlphas:!0===T.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,vertexUv1s:J,vertexUv2s:xe,vertexUv3s:ot,pointsUvs:!0===Q.isPoints&&!!H.attributes.uv&&(Ke||Ht),fog:!!N,useFog:!0===T.fog,fogExp2:N&&N.isFogExp2,flatShading:!0===T.flatShading,sizeAttenuation:!0===T.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===Q.isSkinnedMesh,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:ce,morphTextureStride:Ce,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:Qt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ke&&!0===T.map.isVideoTexture&&mn.getTransfer(T.map.colorSpace)===On,premultipliedAlpha:T.premultipliedAlpha,doubleSided:2===T.side,flipSided:1===T.side,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:_e&&!0===T.extensions.derivatives,extensionFragDepth:_e&&!0===T.extensions.fragDepth,extensionDrawBuffers:_e&&!0===T.extensions.drawBuffers,extensionShaderTextureLOD:_e&&!0===T.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()}},getProgramCacheKey:function _(T){const C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.customVertexShaderID),C.push(T.customFragmentShaderID)),void 0!==T.defines)for(const F in T.defines)C.push(F),C.push(T.defines[F]);return!1===T.isRawShaderMaterial&&(function y(T,C){T.push(C.precision),T.push(C.outputColorSpace),T.push(C.envMapMode),T.push(C.envMapCubeUVHeight),T.push(C.mapUv),T.push(C.alphaMapUv),T.push(C.lightMapUv),T.push(C.aoMapUv),T.push(C.bumpMapUv),T.push(C.normalMapUv),T.push(C.displacementMapUv),T.push(C.emissiveMapUv),T.push(C.metalnessMapUv),T.push(C.roughnessMapUv),T.push(C.anisotropyMapUv),T.push(C.clearcoatMapUv),T.push(C.clearcoatNormalMapUv),T.push(C.clearcoatRoughnessMapUv),T.push(C.iridescenceMapUv),T.push(C.iridescenceThicknessMapUv),T.push(C.sheenColorMapUv),T.push(C.sheenRoughnessMapUv),T.push(C.specularMapUv),T.push(C.specularColorMapUv),T.push(C.specularIntensityMapUv),T.push(C.transmissionMapUv),T.push(C.thicknessMapUv),T.push(C.combine),T.push(C.fogExp2),T.push(C.sizeAttenuation),T.push(C.morphTargetsCount),T.push(C.morphAttributeCount),T.push(C.numDirLights),T.push(C.numPointLights),T.push(C.numSpotLights),T.push(C.numSpotLightMaps),T.push(C.numHemiLights),T.push(C.numRectAreaLights),T.push(C.numDirLightShadows),T.push(C.numPointLightShadows),T.push(C.numSpotLightShadows),T.push(C.numSpotLightShadowsWithMaps),T.push(C.numLightProbes),T.push(C.shadowMapType),T.push(C.toneMapping),T.push(C.numClippingPlanes),T.push(C.numClipIntersection),T.push(C.depthPacking)}(C,T),function v(T,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),T.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),T.push(a.mask)}(C,T),C.push(n.outputColorSpace)),C.push(T.customProgramCacheKey),C.join()},getUniforms:function E(T){const C=p[T.type];let F;return F=C?Ewe.clone(Ma[C].uniforms):T.uniforms,F},acquireProgram:function w(T,C){let F;for(let z=0,Q=l.length;z<Q;z++){const N=l[z];if(N.cacheKey===C){F=N,++F.usedTimes;break}}return void 0===F&&(F=new Jxe(n,C,T,s),l.push(F)),F},releaseProgram:function b(T){if(0==--T.usedTimes){const C=l.indexOf(T);l[C]=l[l.length-1],l.pop(),T.destroy()}},releaseShaderCache:function x(T){c.remove(T)},programs:l,dispose:function A(){c.dispose()}}}function iSe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function r(s,o,a){n.get(s)[o]=a},dispose:function i(){n=new WeakMap}}}function sSe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Z9(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function J9(){const n=[];let e=0;const t=[],r=[],i=[];function o(d,h,f,p,g,m){let _=n[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},n[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=p,_.renderOrder=d.renderOrder,_.z=g,_.group=m),e++,_}return{opaque:t,transmissive:r,transparent:i,init:function s(){e=0,t.length=0,r.length=0,i.length=0},push:function a(d,h,f,p,g,m){const _=o(d,h,f,p,g,m);f.transmission>0?r.push(_):!0===f.transparent?i.push(_):t.push(_)},unshift:function c(d,h,f,p,g,m){const _=o(d,h,f,p,g,m);f.transmission>0?r.unshift(_):!0===f.transparent?i.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function l(d,h){t.length>1&&t.sort(d||sSe),r.length>1&&r.sort(h||Z9),i.length>1&&i.sort(h||Z9)}}}function oSe(){let n=new WeakMap;return{get:function e(r,i){const s=n.get(r);let o;return void 0===s?(o=new J9,n.set(r,[o])):i>=s.length?(o=new J9,s.push(o)):o=s[i],o},dispose:function t(){n=new WeakMap}}}function aSe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new R,color:new Ne};break;case"SpotLight":t={position:new R,direction:new R,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new R,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":t={direction:new R,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":t={color:new Ne,position:new R,halfWidth:new R,halfHeight:new R}}return n[e.id]=t,t}}}let lSe=0;function uSe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function dSe(n,e){const t=new aSe,r=function cSe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new R);const s=new R,o=new ct,a=new ct;return{setup:function c(u,d){let h=0,f=0,p=0;for(let z=0;z<9;z++)i.probe[z].set(0,0,0);let g=0,m=0,_=0,y=0,v=0,E=0,w=0,b=0,x=0,A=0,T=0;u.sort(uSe);const C=!0===d?Math.PI:1;for(let z=0,Q=u.length;z<Q;z++){const N=u[z],H=N.color,K=N.intensity,$=N.distance,le=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)h+=H.r*K*C,f+=H.g*K*C,p+=H.b*K*C;else if(N.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(N.sh.coefficients[X],K);T++}else if(N.isDirectionalLight){const X=t.get(N);if(X.color.copy(N.color).multiplyScalar(N.intensity*C),N.castShadow){const re=N.shadow,ce=r.get(N);ce.shadowBias=re.bias,ce.shadowNormalBias=re.normalBias,ce.shadowRadius=re.radius,ce.shadowMapSize=re.mapSize,i.directionalShadow[g]=ce,i.directionalShadowMap[g]=le,i.directionalShadowMatrix[g]=N.shadow.matrix,E++}i.directional[g]=X,g++}else if(N.isSpotLight){const X=t.get(N);X.position.setFromMatrixPosition(N.matrixWorld),X.color.copy(H).multiplyScalar(K*C),X.distance=$,X.coneCos=Math.cos(N.angle),X.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),X.decay=N.decay,i.spot[_]=X;const re=N.shadow;if(N.map&&(i.spotLightMap[x]=N.map,x++,re.updateMatrices(N),N.castShadow&&A++),i.spotLightMatrix[_]=re.matrix,N.castShadow){const ce=r.get(N);ce.shadowBias=re.bias,ce.shadowNormalBias=re.normalBias,ce.shadowRadius=re.radius,ce.shadowMapSize=re.mapSize,i.spotShadow[_]=ce,i.spotShadowMap[_]=le,b++}_++}else if(N.isRectAreaLight){const X=t.get(N);X.color.copy(H).multiplyScalar(K),X.halfWidth.set(.5*N.width,0,0),X.halfHeight.set(0,.5*N.height,0),i.rectArea[y]=X,y++}else if(N.isPointLight){const X=t.get(N);if(X.color.copy(N.color).multiplyScalar(N.intensity*C),X.distance=N.distance,X.decay=N.decay,N.castShadow){const re=N.shadow,ce=r.get(N);ce.shadowBias=re.bias,ce.shadowNormalBias=re.normalBias,ce.shadowRadius=re.radius,ce.shadowMapSize=re.mapSize,ce.shadowCameraNear=re.camera.near,ce.shadowCameraFar=re.camera.far,i.pointShadow[m]=ce,i.pointShadowMap[m]=le,i.pointShadowMatrix[m]=N.shadow.matrix,w++}i.point[m]=X,m++}else if(N.isHemisphereLight){const X=t.get(N);X.skyColor.copy(N.color).multiplyScalar(K*C),X.groundColor.copy(N.groundColor).multiplyScalar(K*C),i.hemi[v]=X,v++}}y>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ie.LTC_FLOAT_1,i.rectAreaLTC2=Ie.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ie.LTC_HALF_1,i.rectAreaLTC2=Ie.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const F=i.hash;(F.directionalLength!==g||F.pointLength!==m||F.spotLength!==_||F.rectAreaLength!==y||F.hemiLength!==v||F.numDirectionalShadows!==E||F.numPointShadows!==w||F.numSpotShadows!==b||F.numSpotMaps!==x||F.numLightProbes!==T)&&(i.directional.length=g,i.spot.length=_,i.rectArea.length=y,i.point.length=m,i.hemi.length=v,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=b+x-A,i.spotLightMap.length=x,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=T,F.directionalLength=g,F.pointLength=m,F.spotLength=_,F.rectAreaLength=y,F.hemiLength=v,F.numDirectionalShadows=E,F.numPointShadows=w,F.numSpotShadows=b,F.numSpotMaps=x,F.numLightProbes=T,i.version=lSe++)},setupView:function l(u,d){let h=0,f=0,p=0,g=0,m=0;const _=d.matrixWorldInverse;for(let y=0,v=u.length;y<v;y++){const E=u[y];if(E.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),h++}else if(E.isSpotLight){const w=i.spot[p];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),p++}else if(E.isRectAreaLight){const w=i.rectArea[g];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(_),a.identity(),o.copy(E.matrixWorld),o.premultiply(_),a.extractRotation(o),w.halfWidth.set(.5*E.width,0,0),w.halfHeight.set(0,.5*E.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),g++}else if(E.isPointLight){const w=i.point[f];w.position.setFromMatrixPosition(E.matrixWorld),w.position.applyMatrix4(_),f++}else if(E.isHemisphereLight){const w=i.hemi[m];w.direction.setFromMatrixPosition(E.matrixWorld),w.direction.transformDirection(_),m++}}},state:i}}function ej(n,e){const t=new dSe(n,e),r=[],i=[];return{init:function s(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:function c(d){t.setup(r,d)},setupLightsView:function l(d){t.setupView(r,d)},pushLight:function o(d){r.push(d)},pushShadow:function a(d){i.push(d)}}}function hSe(n,e){let t=new WeakMap;return{get:function r(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new ej(n,e),t.set(s,[c])):o>=a.length?(c=new ej(n,e),a.push(c)):c=a[o],c},dispose:function i(){t=new WeakMap}}}class tj extends k_{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class nj extends k_{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function gSe(n,e,t){let r=new bT;const i=new ie,s=new ie,o=new _n,a=new tj({depthPacking:3201}),c=new nj,l={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Fl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ie},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Lt;p.setAttribute("position",new Rr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new _i(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=d8;let _=this.type;function y(w,b){const x=e.update(g);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===w.mapPass&&(w.mapPass=new sd(i.x,i.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(b,null,x,h,g,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(b,null,x,f,g,null)}function v(w,b,x,A){let T=null;const C=!0===x.isPointLight?w.customDistanceMaterial:w.customDepthMaterial;if(void 0!==C)T=C;else if(T=!0===x.isPointLight?c:a,n.localClippingEnabled&&!0===b.clipShadows&&Array.isArray(b.clippingPlanes)&&0!==b.clippingPlanes.length||b.displacementMap&&0!==b.displacementScale||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const F=T.uuid,z=b.uuid;let Q=l[F];void 0===Q&&(Q={},l[F]=Q);let N=Q[z];void 0===N&&(N=T.clone(),Q[z]=N),T=N}return T.visible=b.visible,T.wireframe=b.wireframe,T.side=A===Tc?null!==b.shadowSide?b.shadowSide:b.side:null!==b.shadowSide?b.shadowSide:d[b.side],T.alphaMap=b.alphaMap,T.alphaTest=b.alphaTest,T.map=b.map,T.clipShadows=b.clipShadows,T.clippingPlanes=b.clippingPlanes,T.clipIntersection=b.clipIntersection,T.displacementMap=b.displacementMap,T.displacementScale=b.displacementScale,T.displacementBias=b.displacementBias,T.wireframeLinewidth=b.wireframeLinewidth,T.linewidth=b.linewidth,!0===x.isPointLight&&!0===T.isMeshDistanceMaterial&&(n.properties.get(T).light=x),T}function E(w,b,x,A,T){if(!1===w.visible)return;if(w.layers.test(b.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&T===Tc)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,w.matrixWorld);const z=e.update(w),Q=w.material;if(Array.isArray(Q)){const N=z.groups;for(let H=0,K=N.length;H<K;H++){const $=N[H],le=Q[$.materialIndex];if(le&&le.visible){const X=v(w,le,A,T);w.onBeforeShadow(n,w,b,x,z,X,$),n.renderBufferDirect(x,null,z,X,w,$),w.onAfterShadow(n,w,b,x,z,X,$)}}}else if(Q.visible){const N=v(w,Q,A,T);w.onBeforeShadow(n,w,b,x,z,N,null),n.renderBufferDirect(x,null,z,N,w,null),w.onAfterShadow(n,w,b,x,z,N,null)}}const F=w.children;for(let z=0,Q=F.length;z<Q;z++)E(F[z],b,x,A,T)}this.render=function(w,b,x){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===w.length)return;const A=n.getRenderTarget(),T=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),F=n.state;F.setBlending(0),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const z=_!==Tc&&this.type===Tc,Q=_===Tc&&this.type!==Tc;for(let N=0,H=w.length;N<H;N++){const K=w[N],$=K.shadow;if(void 0===$){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(!1===$.autoUpdate&&!1===$.needsUpdate)continue;i.copy($.mapSize);const le=$.getFrameExtents();if(i.multiply(le),s.copy($.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/le.x),i.x=s.x*le.x,$.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/le.y),i.y=s.y*le.y,$.mapSize.y=s.y)),null===$.map||!0===z||!0===Q){const re=this.type!==Tc?{minFilter:Cr,magFilter:Cr}:{};null!==$.map&&$.map.dispose(),$.map=new sd(i.x,i.y,re),$.map.texture.name=K.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const X=$.getViewportCount();for(let re=0;re<X;re++){const ce=$.getViewport(re);o.set(s.x*ce.x,s.y*ce.y,s.x*ce.z,s.y*ce.w),F.viewport(o),$.updateMatrices(K,re),r=$.getFrustum(),E(b,x,$.camera,K,this.type)}!0!==$.isPointLightShadow&&this.type===Tc&&y($,x),$.needsUpdate=!1}_=this.type,m.needsUpdate=!1,n.setRenderTarget(A,T,C)}}function mSe(n,e,t){const r=t.isWebGL2,a=new function i(){let L=!1;const ke=new _n;let _e=null;const J=new _n(0,0,0,0);return{setMask:function(xe){_e!==xe&&!L&&(n.colorMask(xe,xe,xe,xe),_e=xe)},setLocked:function(xe){L=xe},setClear:function(xe,ot,Qt,li,hs){!0===hs&&(xe*=li,ot*=li,Qt*=li),ke.set(xe,ot,Qt,li),!1===J.equals(ke)&&(n.clearColor(xe,ot,Qt,li),J.copy(ke))},reset:function(){L=!1,_e=null,J.set(-1,0,0,0)}}},c=new function s(){let L=!1,ke=null,_e=null,J=null;return{setTest:function(xe){xe?ut(n.DEPTH_TEST):Ke(n.DEPTH_TEST)},setMask:function(xe){ke!==xe&&!L&&(n.depthMask(xe),ke=xe)},setFunc:function(xe){if(_e!==xe){switch(xe){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}_e=xe}},setLocked:function(xe){L=xe},setClear:function(xe){J!==xe&&(n.clearDepth(xe),J=xe)},reset:function(){L=!1,ke=null,_e=null,J=null}}},l=new function o(){let L=!1,ke=null,_e=null,J=null,xe=null,ot=null,Qt=null,li=null,hs=null;return{setTest:function(Dn){L||(Dn?ut(n.STENCIL_TEST):Ke(n.STENCIL_TEST))},setMask:function(Dn){ke!==Dn&&!L&&(n.stencilMask(Dn),ke=Dn)},setFunc:function(Dn,fs,ic){(_e!==Dn||J!==fs||xe!==ic)&&(n.stencilFunc(Dn,fs,ic),_e=Dn,J=fs,xe=ic)},setOp:function(Dn,fs,ic){(ot!==Dn||Qt!==fs||li!==ic)&&(n.stencilOp(Dn,fs,ic),ot=Dn,Qt=fs,li=ic)},setLocked:function(Dn){L=Dn},setClear:function(Dn){hs!==Dn&&(n.clearStencil(Dn),hs=Dn)},reset:function(){L=!1,ke=null,_e=null,J=null,xe=null,ot=null,Qt=null,li=null,hs=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},p=new WeakMap,g=[],m=null,_=!1,y=null,v=null,E=null,w=null,b=null,x=null,A=null,T=new Ne(0,0,0),C=0,F=!1,z=null,Q=null,N=null,H=null,K=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let le=!1,X=0;const re=n.getParameter(n.VERSION);-1!==re.indexOf("WebGL")?(X=parseFloat(/^WebGL (\d)/.exec(re)[1]),le=X>=1):-1!==re.indexOf("OpenGL ES")&&(X=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),le=X>=2);let ce=null,Ce={};const Z=n.getParameter(n.SCISSOR_BOX),ne=n.getParameter(n.VIEWPORT),he=(new _n).fromArray(Z),je=(new _n).fromArray(ne);function Be(L,ke,_e,J){const xe=new Uint8Array(4),ot=n.createTexture();n.bindTexture(L,ot),n.texParameteri(L,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(L,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Qt=0;Qt<_e;Qt++)!r||L!==n.TEXTURE_3D&&L!==n.TEXTURE_2D_ARRAY?n.texImage2D(ke+Qt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,xe):n.texImage3D(ke,0,n.RGBA,1,1,J,0,n.RGBA,n.UNSIGNED_BYTE,xe);return ot}const pt={};function ut(L){!0!==h[L]&&(n.enable(L),h[L]=!0)}function Ke(L){!1!==h[L]&&(n.disable(L),h[L]=!1)}pt[n.TEXTURE_2D]=Be(n.TEXTURE_2D,n.TEXTURE_2D,1),pt[n.TEXTURE_CUBE_MAP]=Be(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(pt[n.TEXTURE_2D_ARRAY]=Be(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pt[n.TEXTURE_3D]=Be(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),ut(n.DEPTH_TEST),c.setFunc(3),Pe(!1),Ue(1),ut(n.CULL_FACE),ae(0);const ee={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(r)ee[103]=n.MIN,ee[104]=n.MAX;else{const L=e.get("EXT_blend_minmax");null!==L&&(ee[103]=L.MIN_EXT,ee[104]=L.MAX_EXT)}const Ee={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function ae(L,ke,_e,J,xe,ot,Qt,li,hs,Dn){if(0!==L){if(!1===_&&(ut(n.BLEND),_=!0),5===L)xe=xe||ke,ot=ot||_e,Qt=Qt||J,(ke!==v||xe!==b)&&(n.blendEquationSeparate(ee[ke],ee[xe]),v=ke,b=xe),(_e!==E||J!==w||ot!==x||Qt!==A)&&(n.blendFuncSeparate(Ee[_e],Ee[J],Ee[ot],Ee[Qt]),E=_e,w=J,x=ot,A=Qt),(!1===li.equals(T)||hs!==C)&&(n.blendColor(li.r,li.g,li.b,hs),T.copy(li),C=hs),y=L,F=!1;else if(L!==y||Dn!==F){if((100!==v||100!==b)&&(n.blendEquation(n.FUNC_ADD),v=100,b=100),Dn)switch(L){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}else switch(L){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}E=null,w=null,x=null,A=null,T.set(0,0,0),C=0,y=L,F=Dn}}else!0===_&&(Ke(n.BLEND),_=!1)}function Pe(L){z!==L&&(n.frontFace(L?n.CW:n.CCW),z=L)}function Ue(L){0!==L?(ut(n.CULL_FACE),L!==Q&&n.cullFace(1===L?n.BACK:2===L?n.FRONT:n.FRONT_AND_BACK)):Ke(n.CULL_FACE),Q=L}function $t(L,ke,_e){L?(ut(n.POLYGON_OFFSET_FILL),(H!==ke||K!==_e)&&(n.polygonOffset(ke,_e),H=ke,K=_e)):Ke(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:c,stencil:l},enable:ut,disable:Ke,bindFramebuffer:function et(L,ke){return f[L]!==ke&&(n.bindFramebuffer(L,ke),f[L]=ke,r&&(L===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ke),L===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ke)),!0)},drawBuffers:function k(L,ke){let _e=g,J=!1;if(L)if(_e=p.get(ke),void 0===_e&&(_e=[],p.set(ke,_e)),L.isWebGLMultipleRenderTargets){const xe=L.texture;if(_e.length!==xe.length||_e[0]!==n.COLOR_ATTACHMENT0){for(let ot=0,Qt=xe.length;ot<Qt;ot++)_e[ot]=n.COLOR_ATTACHMENT0+ot;_e.length=xe.length,J=!0}}else _e[0]!==n.COLOR_ATTACHMENT0&&(_e[0]=n.COLOR_ATTACHMENT0,J=!0);else _e[0]!==n.BACK&&(_e[0]=n.BACK,J=!0);J&&(t.isWebGL2?n.drawBuffers(_e):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_e))},useProgram:function be(L){return m!==L&&(n.useProgram(L),m=L,!0)},setBlending:ae,setMaterial:function Ye(L,ke){2===L.side?Ke(n.CULL_FACE):ut(n.CULL_FACE);let _e=1===L.side;ke&&(_e=!_e),Pe(_e),1===L.blending&&!1===L.transparent?ae(0):ae(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.blendColor,L.blendAlpha,L.premultipliedAlpha),c.setFunc(L.depthFunc),c.setTest(L.depthTest),c.setMask(L.depthWrite),a.setMask(L.colorWrite);const J=L.stencilWrite;l.setTest(J),J&&(l.setMask(L.stencilWriteMask),l.setFunc(L.stencilFunc,L.stencilRef,L.stencilFuncMask),l.setOp(L.stencilFail,L.stencilZFail,L.stencilZPass)),$t(L.polygonOffset,L.polygonOffsetFactor,L.polygonOffsetUnits),!0===L.alphaToCoverage?ut(n.SAMPLE_ALPHA_TO_COVERAGE):Ke(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Pe,setCullFace:Ue,setLineWidth:function vt(L){L!==N&&(le&&n.lineWidth(L),N=L)},setPolygonOffset:$t,setScissorTest:function er(L){L?ut(n.SCISSOR_TEST):Ke(n.SCISSOR_TEST)},activeTexture:function D(L){void 0===L&&(L=n.TEXTURE0+$-1),ce!==L&&(n.activeTexture(L),ce=L)},bindTexture:function S(L,ke,_e){void 0===_e&&(_e=null===ce?n.TEXTURE0+$-1:ce);let J=Ce[_e];void 0===J&&(J={type:void 0,texture:void 0},Ce[_e]=J),(J.type!==L||J.texture!==ke)&&(ce!==_e&&(n.activeTexture(_e),ce=_e),n.bindTexture(L,ke||pt[L]),J.type=L,J.texture=ke)},unbindTexture:function W(){const L=Ce[ce];void 0!==L&&void 0!==L.type&&(n.bindTexture(L.type,null),L.type=void 0,L.texture=void 0)},compressedTexImage2D:function pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexImage3D:function de(){try{n.compressedTexImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage2D:function ye(){try{n.texImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage3D:function vn(){try{n.texImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},updateUBOMapping:function Ze(L,ke){let _e=d.get(ke);void 0===_e&&(_e=new WeakMap,d.set(ke,_e));let J=_e.get(L);void 0===J&&(J=n.getUniformBlockIndex(ke,L.name),_e.set(L,J))},uniformBlockBinding:function ze(L,ke){const J=d.get(ke).get(L);u.get(ke)!==J&&(n.uniformBlockBinding(ke,J,L.__bindingPointIndex),u.set(ke,J))},texStorage2D:function gt(){try{n.texStorage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texStorage3D:function rn(){try{n.texStorage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage2D:function me(){try{n.texSubImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage3D:function $e(){try{n.texSubImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage2D:function we(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage3D:function Re(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},scissor:function xt(L){!1===he.equals(L)&&(n.scissor(L.x,L.y,L.z,L.w),he.copy(L))},viewport:function mt(L){!1===je.equals(L)&&(n.viewport(L.x,L.y,L.z,L.w),je.copy(L))},reset:function Ht(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===r&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},ce=null,Ce={},f={},p=new WeakMap,g=[],m=null,_=!1,y=null,v=null,E=null,w=null,b=null,x=null,A=null,T=new Ne(0,0,0),C=0,F=!1,z=null,Q=null,N=null,H=null,K=null,he.set(0,0,n.canvas.width,n.canvas.height),je.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function _Se(n,e,t,r,i,s,o){const a=i.isWebGL2,c=i.maxTextures,l=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const m=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function y(D,S){return _?new OffscreenCanvas(D,S):M_("canvas")}function v(D,S,W,pe){let de=1;if((D.width>pe||D.height>pe)&&(de=pe/Math.max(D.width,D.height)),de<1||!0===S){if(typeof HTMLImageElement<"u"&&D instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&D instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&D instanceof ImageBitmap){const me=S?tT:Math.floor,$e=me(de*D.width),we=me(de*D.height);void 0===g&&(g=y($e,we));const Re=W?y($e,we):g;return Re.width=$e,Re.height=we,Re.getContext("2d").drawImage(D,0,0,$e,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+D.width+"x"+D.height+") to ("+$e+"x"+we+")."),Re}return"data"in D&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+D.width+"x"+D.height+")."),D}return D}function E(D){return rR(D.width)&&rR(D.height)}function b(D,S){return D.generateMipmaps&&S&&D.minFilter!==Cr&&D.minFilter!==Ar}function x(D){n.generateMipmap(D)}function A(D,S,W,pe,de=!1){if(!1===a)return S;if(null!==D){if(void 0!==n[D])return n[D];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+D+"'")}let me=S;if(S===n.RED&&(W===n.FLOAT&&(me=n.R32F),W===n.HALF_FLOAT&&(me=n.R16F),W===n.UNSIGNED_BYTE&&(me=n.R8)),S===n.RED_INTEGER&&(W===n.UNSIGNED_BYTE&&(me=n.R8UI),W===n.UNSIGNED_SHORT&&(me=n.R16UI),W===n.UNSIGNED_INT&&(me=n.R32UI),W===n.BYTE&&(me=n.R8I),W===n.SHORT&&(me=n.R16I),W===n.INT&&(me=n.R32I)),S===n.RG&&(W===n.FLOAT&&(me=n.RG32F),W===n.HALF_FLOAT&&(me=n.RG16F),W===n.UNSIGNED_BYTE&&(me=n.RG8)),S===n.RGBA){const $e=de?Qw:mn.getTransfer(pe);W===n.FLOAT&&(me=n.RGBA32F),W===n.HALF_FLOAT&&(me=n.RGBA16F),W===n.UNSIGNED_BYTE&&(me=$e===On?n.SRGB8_ALPHA8:n.RGBA8),W===n.UNSIGNED_SHORT_4_4_4_4&&(me=n.RGBA4),W===n.UNSIGNED_SHORT_5_5_5_1&&(me=n.RGB5_A1)}return(me===n.R16F||me===n.R32F||me===n.RG16F||me===n.RG32F||me===n.RGBA16F||me===n.RGBA32F)&&e.get("EXT_color_buffer_float"),me}function T(D,S,W){return!0===b(D,W)||D.isFramebufferTexture&&D.minFilter!==Cr&&D.minFilter!==Ar?Math.log2(Math.max(S.width,S.height))+1:void 0!==D.mipmaps&&D.mipmaps.length>0?D.mipmaps.length:D.isCompressedTexture&&Array.isArray(D.image)?S.mipmaps.length:1}function C(D){return D===Cr||1004===D||1005===D?n.NEAREST:n.LINEAR}function F(D){const S=D.target;S.removeEventListener("dispose",F),function Q(D){const S=r.get(D);if(void 0===S.__webglInit)return;const W=D.source,pe=m.get(W);if(pe){const de=pe[S.__cacheKey];de.usedTimes--,0===de.usedTimes&&N(D),0===Object.keys(pe).length&&m.delete(W)}r.remove(D)}(S),S.isVideoTexture&&p.delete(S)}function z(D){const S=D.target;S.removeEventListener("dispose",z),function H(D){const S=D.texture,W=r.get(D),pe=r.get(S);if(void 0!==pe.__webglTexture&&(n.deleteTexture(pe.__webglTexture),o.memory.textures--),D.depthTexture&&D.depthTexture.dispose(),D.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(W.__webglFramebuffer[de]))for(let me=0;me<W.__webglFramebuffer[de].length;me++)n.deleteFramebuffer(W.__webglFramebuffer[de][me]);else n.deleteFramebuffer(W.__webglFramebuffer[de]);W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[de])}else{if(Array.isArray(W.__webglFramebuffer))for(let de=0;de<W.__webglFramebuffer.length;de++)n.deleteFramebuffer(W.__webglFramebuffer[de]);else n.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let de=0;de<W.__webglColorRenderbuffer.length;de++)W.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(W.__webglColorRenderbuffer[de]);W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer)}if(D.isWebGLMultipleRenderTargets)for(let de=0,me=S.length;de<me;de++){const $e=r.get(S[de]);$e.__webglTexture&&(n.deleteTexture($e.__webglTexture),o.memory.textures--),r.remove(S[de])}r.remove(S),r.remove(D)}(S)}function N(D){const S=r.get(D);n.deleteTexture(S.__webglTexture),delete m.get(D.source)[S.__cacheKey],o.memory.textures--}let K=0;function re(D,S){const W=r.get(D);if(D.isVideoTexture&&function $t(D){const S=o.render.frame;p.get(D)!==S&&(p.set(D,S),D.update())}(D),!1===D.isRenderTargetTexture&&D.version>0&&W.__version!==D.version){const pe=D.image;if(null===pe)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==pe.complete)return void ut(W,D,S);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,W.__webglTexture,n.TEXTURE0+S)}const ne={1e3:n.REPEAT,[ts]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},he={[Cr]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[Ar]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[Ju]:n.LINEAR_MIPMAP_LINEAR},je={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function Be(D,S,W){if(W?(n.texParameteri(D,n.TEXTURE_WRAP_S,ne[S.wrapS]),n.texParameteri(D,n.TEXTURE_WRAP_T,ne[S.wrapT]),(D===n.TEXTURE_3D||D===n.TEXTURE_2D_ARRAY)&&n.texParameteri(D,n.TEXTURE_WRAP_R,ne[S.wrapR]),n.texParameteri(D,n.TEXTURE_MAG_FILTER,he[S.magFilter]),n.texParameteri(D,n.TEXTURE_MIN_FILTER,he[S.minFilter])):(n.texParameteri(D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(D===n.TEXTURE_3D||D===n.TEXTURE_2D_ARRAY)&&n.texParameteri(D,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(S.wrapS!==ts||S.wrapT!==ts)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(D,n.TEXTURE_MAG_FILTER,C(S.magFilter)),n.texParameteri(D,n.TEXTURE_MIN_FILTER,C(S.minFilter)),S.minFilter!==Cr&&S.minFilter!==Ar&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),S.compareFunction&&(n.texParameteri(D,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(D,n.TEXTURE_COMPARE_FUNC,je[S.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const pe=e.get("EXT_texture_filter_anisotropic");if(S.magFilter===Cr||1005!==S.minFilter&&S.minFilter!==Ju||S.type===Ia&&!1===e.has("OES_texture_float_linear")||!1===a&&S.type===I_&&!1===e.has("OES_texture_half_float_linear"))return;(S.anisotropy>1||r.get(S).__currentAnisotropy)&&(n.texParameterf(D,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,i.getMaxAnisotropy())),r.get(S).__currentAnisotropy=S.anisotropy)}}function pt(D,S){let W=!1;void 0===D.__webglInit&&(D.__webglInit=!0,S.addEventListener("dispose",F));const pe=S.source;let de=m.get(pe);void 0===de&&(de={},m.set(pe,de));const me=function X(D){const S=[];return S.push(D.wrapS),S.push(D.wrapT),S.push(D.wrapR||0),S.push(D.magFilter),S.push(D.minFilter),S.push(D.anisotropy),S.push(D.internalFormat),S.push(D.format),S.push(D.type),S.push(D.generateMipmaps),S.push(D.premultiplyAlpha),S.push(D.flipY),S.push(D.unpackAlignment),S.push(D.colorSpace),S.join()}(S);if(me!==D.__cacheKey){void 0===de[me]&&(de[me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,W=!0),de[me].usedTimes++;const $e=de[D.__cacheKey];void 0!==$e&&(de[D.__cacheKey].usedTimes--,0===$e.usedTimes&&N(S)),D.__cacheKey=me,D.__webglTexture=de[me].texture}return W}function ut(D,S,W){let pe=n.TEXTURE_2D;(S.isDataArrayTexture||S.isCompressedArrayTexture)&&(pe=n.TEXTURE_2D_ARRAY),S.isData3DTexture&&(pe=n.TEXTURE_3D);const de=pt(D,S),me=S.source;t.bindTexture(pe,D.__webglTexture,n.TEXTURE0+W);const $e=r.get(me);if(me.version!==$e.__version||!0===de){t.activeTexture(n.TEXTURE0+W);const we=mn.getPrimaries(mn.workingColorSpace),Re=""===S.colorSpace?null:mn.getPrimaries(S.colorSpace),gt=""===S.colorSpace||we===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);const rn=function w(D){return!a&&(D.wrapS!==ts||D.wrapT!==ts||D.minFilter!==Cr&&D.minFilter!==Ar)}(S)&&!1===E(S.image);let ye=v(S.image,rn,!1,u);ye=er(S,ye);const vn=E(ye)||a,xt=s.convert(S.format,S.colorSpace);let ze,mt=s.convert(S.type),Ze=A(S.internalFormat,xt,mt,S.colorSpace,S.isVideoTexture);Be(pe,S,vn);const Ht=S.mipmaps,L=a&&!0!==S.isVideoTexture&&36196!==Ze,ke=void 0===$e.__version||!0===de,_e=T(S,ye,vn);if(S.isDepthTexture)Ze=n.DEPTH_COMPONENT,a?Ze=S.type===Ia?n.DEPTH_COMPONENT32F:S.type===Rl?n.DEPTH_COMPONENT24:S.type===ed?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:S.type===Ia&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),S.format===td&&Ze===n.DEPTH_COMPONENT&&1012!==S.type&&S.type!==Rl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),S.type=Rl,mt=s.convert(S.type)),S.format===Uf&&Ze===n.DEPTH_COMPONENT&&(Ze=n.DEPTH_STENCIL,S.type!==ed&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),S.type=ed,mt=s.convert(S.type))),ke&&(L?t.texStorage2D(n.TEXTURE_2D,1,Ze,ye.width,ye.height):t.texImage2D(n.TEXTURE_2D,0,Ze,ye.width,ye.height,0,xt,mt,null));else if(S.isDataTexture)if(Ht.length>0&&vn){L&&ke&&t.texStorage2D(n.TEXTURE_2D,_e,Ze,Ht[0].width,Ht[0].height);for(let J=0,xe=Ht.length;J<xe;J++)ze=Ht[J],L?t.texSubImage2D(n.TEXTURE_2D,J,0,0,ze.width,ze.height,xt,mt,ze.data):t.texImage2D(n.TEXTURE_2D,J,Ze,ze.width,ze.height,0,xt,mt,ze.data);S.generateMipmaps=!1}else L?(ke&&t.texStorage2D(n.TEXTURE_2D,_e,Ze,ye.width,ye.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ye.width,ye.height,xt,mt,ye.data)):t.texImage2D(n.TEXTURE_2D,0,Ze,ye.width,ye.height,0,xt,mt,ye.data);else if(S.isCompressedTexture)if(S.isCompressedArrayTexture){L&&ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,Ze,Ht[0].width,Ht[0].height,ye.depth);for(let J=0,xe=Ht.length;J<xe;J++)ze=Ht[J],S.format!==qs?null!==xt?L?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,ze.width,ze.height,ye.depth,xt,ze.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,J,Ze,ze.width,ze.height,ye.depth,0,ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):L?t.texSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,ze.width,ze.height,ye.depth,xt,mt,ze.data):t.texImage3D(n.TEXTURE_2D_ARRAY,J,Ze,ze.width,ze.height,ye.depth,0,xt,mt,ze.data)}else{L&&ke&&t.texStorage2D(n.TEXTURE_2D,_e,Ze,Ht[0].width,Ht[0].height);for(let J=0,xe=Ht.length;J<xe;J++)ze=Ht[J],S.format!==qs?null!==xt?L?t.compressedTexSubImage2D(n.TEXTURE_2D,J,0,0,ze.width,ze.height,xt,ze.data):t.compressedTexImage2D(n.TEXTURE_2D,J,Ze,ze.width,ze.height,0,ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):L?t.texSubImage2D(n.TEXTURE_2D,J,0,0,ze.width,ze.height,xt,mt,ze.data):t.texImage2D(n.TEXTURE_2D,J,Ze,ze.width,ze.height,0,xt,mt,ze.data)}else if(S.isDataArrayTexture)L?(ke&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,Ze,ye.width,ye.height,ye.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ye.width,ye.height,ye.depth,xt,mt,ye.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ze,ye.width,ye.height,ye.depth,0,xt,mt,ye.data);else if(S.isData3DTexture)L?(ke&&t.texStorage3D(n.TEXTURE_3D,_e,Ze,ye.width,ye.height,ye.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ye.width,ye.height,ye.depth,xt,mt,ye.data)):t.texImage3D(n.TEXTURE_3D,0,Ze,ye.width,ye.height,ye.depth,0,xt,mt,ye.data);else if(S.isFramebufferTexture){if(ke)if(L)t.texStorage2D(n.TEXTURE_2D,_e,Ze,ye.width,ye.height);else{let J=ye.width,xe=ye.height;for(let ot=0;ot<_e;ot++)t.texImage2D(n.TEXTURE_2D,ot,Ze,J,xe,0,xt,mt,null),J>>=1,xe>>=1}}else if(Ht.length>0&&vn){L&&ke&&t.texStorage2D(n.TEXTURE_2D,_e,Ze,Ht[0].width,Ht[0].height);for(let J=0,xe=Ht.length;J<xe;J++)ze=Ht[J],L?t.texSubImage2D(n.TEXTURE_2D,J,0,0,xt,mt,ze):t.texImage2D(n.TEXTURE_2D,J,Ze,xt,mt,ze);S.generateMipmaps=!1}else L?(ke&&t.texStorage2D(n.TEXTURE_2D,_e,Ze,ye.width,ye.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,xt,mt,ye)):t.texImage2D(n.TEXTURE_2D,0,Ze,xt,mt,ye);b(S,vn)&&x(pe),$e.__version=me.version,S.onUpdate&&S.onUpdate(S)}D.__version=S.version}function et(D,S,W,pe,de,me){const $e=s.convert(W.format,W.colorSpace),we=s.convert(W.type),Re=A(W.internalFormat,$e,we,W.colorSpace);if(!r.get(S).__hasExternalTextures){const rn=Math.max(1,S.width>>me),ye=Math.max(1,S.height>>me);de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?t.texImage3D(de,me,Re,rn,ye,S.depth,0,$e,we,null):t.texImage2D(de,me,Re,rn,ye,0,$e,we,null)}t.bindFramebuffer(n.FRAMEBUFFER,D),vt(S)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,pe,de,r.get(W).__webglTexture,0,Ue(S)):(de===n.TEXTURE_2D||de>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&de<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,pe,de,r.get(W).__webglTexture,me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function k(D,S,W){if(n.bindRenderbuffer(n.RENDERBUFFER,D),S.depthBuffer&&!S.stencilBuffer){let pe=!0===a?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(W||vt(S)){const de=S.depthTexture;de&&de.isDepthTexture&&(de.type===Ia?pe=n.DEPTH_COMPONENT32F:de.type===Rl&&(pe=n.DEPTH_COMPONENT24));const me=Ue(S);vt(S)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,pe,S.width,S.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,me,pe,S.width,S.height)}else n.renderbufferStorage(n.RENDERBUFFER,pe,S.width,S.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,D)}else if(S.depthBuffer&&S.stencilBuffer){const pe=Ue(S);W&&!1===vt(S)?n.renderbufferStorageMultisample(n.RENDERBUFFER,pe,n.DEPTH24_STENCIL8,S.width,S.height):vt(S)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pe,n.DEPTH24_STENCIL8,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,S.width,S.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,D)}else{const pe=!0===S.isWebGLMultipleRenderTargets?S.texture:[S.texture];for(let de=0;de<pe.length;de++){const me=pe[de],$e=s.convert(me.format,me.colorSpace),we=s.convert(me.type),Re=A(me.internalFormat,$e,we,me.colorSpace),gt=Ue(S);W&&!1===vt(S)?n.renderbufferStorageMultisample(n.RENDERBUFFER,gt,Re,S.width,S.height):vt(S)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,gt,Re,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,Re,S.width,S.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ee(D){const S=r.get(D),W=!0===D.isWebGLCubeRenderTarget;if(D.depthTexture&&!S.__autoAllocateDepthBuffer){if(W)throw new Error("target.depthTexture not supported in Cube render targets");!function be(D,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,D),!S.depthTexture||!S.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(S.depthTexture).__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),re(S.depthTexture,0);const pe=r.get(S.depthTexture).__webglTexture,de=Ue(S);if(S.depthTexture.format===td)vt(S)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0,de):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0);else{if(S.depthTexture.format!==Uf)throw new Error("Unknown depthTexture format");vt(S)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0,de):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0)}}(S.__webglFramebuffer,D)}else if(W){S.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer[pe]),S.__webglDepthbuffer[pe]=n.createRenderbuffer(),k(S.__webglDepthbuffer[pe],D,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer),S.__webglDepthbuffer=n.createRenderbuffer(),k(S.__webglDepthbuffer,D,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(D){return Math.min(d,D.samples)}function vt(D){const S=r.get(D);return a&&D.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==S.__useRenderToTexture}function er(D,S){const W=D.colorSpace,pe=D.format,de=D.type;return!0===D.isCompressedTexture||!0===D.isVideoTexture||1035===D.format||W!==xc&&""!==W&&(mn.getTransfer(W)===On?!1===a?!0===e.has("EXT_sRGB")&&pe===qs?(D.format=1035,D.minFilter=Ar,D.generateMipmaps=!1):S=a9.sRGBToLinear(S):(pe!==qs||de!==Ml)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",W)),S}this.allocateTextureUnit=function le(){const D=K;return D>=c&&console.warn("THREE.WebGLTextures: Trying to use "+D+" texture units while this GPU supports only "+c),K+=1,D},this.resetTextureUnits=function $(){K=0},this.setTexture2D=re,this.setTexture2DArray=function ce(D,S){const W=r.get(D);D.version>0&&W.__version!==D.version?ut(W,D,S):t.bindTexture(n.TEXTURE_2D_ARRAY,W.__webglTexture,n.TEXTURE0+S)},this.setTexture3D=function Ce(D,S){const W=r.get(D);D.version>0&&W.__version!==D.version?ut(W,D,S):t.bindTexture(n.TEXTURE_3D,W.__webglTexture,n.TEXTURE0+S)},this.setTextureCube=function Z(D,S){const W=r.get(D);D.version>0&&W.__version!==D.version?function Ke(D,S,W){if(6!==S.image.length)return;const pe=pt(D,S),de=S.source;t.bindTexture(n.TEXTURE_CUBE_MAP,D.__webglTexture,n.TEXTURE0+W);const me=r.get(de);if(de.version!==me.__version||!0===pe){t.activeTexture(n.TEXTURE0+W);const $e=mn.getPrimaries(mn.workingColorSpace),we=""===S.colorSpace?null:mn.getPrimaries(S.colorSpace),Re=""===S.colorSpace||$e===we?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Re);const gt=S.isCompressedTexture||S.image[0].isCompressedTexture,rn=S.image[0]&&S.image[0].isDataTexture,ye=[];for(let J=0;J<6;J++)ye[J]=gt||rn?rn?S.image[J].image:S.image[J]:v(S.image[J],!1,!0,l),ye[J]=er(S,ye[J]);const vn=ye[0],xt=E(vn)||a,mt=s.convert(S.format,S.colorSpace),Ze=s.convert(S.type),ze=A(S.internalFormat,mt,Ze,S.colorSpace),Ht=a&&!0!==S.isVideoTexture,L=void 0===me.__version||!0===pe;let _e,ke=T(S,vn,xt);if(Be(n.TEXTURE_CUBE_MAP,S,xt),gt){Ht&&L&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ke,ze,vn.width,vn.height);for(let J=0;J<6;J++){_e=ye[J].mipmaps;for(let xe=0;xe<_e.length;xe++){const ot=_e[xe];S.format!==qs?null!==mt?Ht?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,0,0,ot.width,ot.height,mt,ot.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,ze,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ht?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,0,0,ot.width,ot.height,mt,Ze,ot.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,ze,ot.width,ot.height,0,mt,Ze,ot.data)}}}else{_e=S.mipmaps,Ht&&L&&(_e.length>0&&ke++,t.texStorage2D(n.TEXTURE_CUBE_MAP,ke,ze,ye[0].width,ye[0].height));for(let J=0;J<6;J++)if(rn){Ht?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,ye[J].width,ye[J].height,mt,Ze,ye[J].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,ze,ye[J].width,ye[J].height,0,mt,Ze,ye[J].data);for(let xe=0;xe<_e.length;xe++){const Qt=_e[xe].image[J].image;Ht?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,0,0,Qt.width,Qt.height,mt,Ze,Qt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,ze,Qt.width,Qt.height,0,mt,Ze,Qt.data)}}else{Ht?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,mt,Ze,ye[J]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,ze,mt,Ze,ye[J]);for(let xe=0;xe<_e.length;xe++){const ot=_e[xe];Ht?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,0,0,mt,Ze,ot.image[J]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,ze,mt,Ze,ot.image[J])}}}b(S,xt)&&x(n.TEXTURE_CUBE_MAP),me.__version=de.version,S.onUpdate&&S.onUpdate(S)}D.__version=S.version}(W,D,S):t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+S)},this.rebindTextures=function Ee(D,S,W){const pe=r.get(D);void 0!==S&&et(pe.__webglFramebuffer,D,D.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==W&&ee(D)},this.setupRenderTarget=function ae(D){const S=D.texture,W=r.get(D),pe=r.get(S);D.addEventListener("dispose",z),!0!==D.isWebGLMultipleRenderTargets&&(void 0===pe.__webglTexture&&(pe.__webglTexture=n.createTexture()),pe.__version=S.version,o.memory.textures++);const de=!0===D.isWebGLCubeRenderTarget,me=!0===D.isWebGLMultipleRenderTargets,$e=E(D)||a;if(de){W.__webglFramebuffer=[];for(let we=0;we<6;we++)if(a&&S.mipmaps&&S.mipmaps.length>0){W.__webglFramebuffer[we]=[];for(let Re=0;Re<S.mipmaps.length;Re++)W.__webglFramebuffer[we][Re]=n.createFramebuffer()}else W.__webglFramebuffer[we]=n.createFramebuffer()}else{if(a&&S.mipmaps&&S.mipmaps.length>0){W.__webglFramebuffer=[];for(let we=0;we<S.mipmaps.length;we++)W.__webglFramebuffer[we]=n.createFramebuffer()}else W.__webglFramebuffer=n.createFramebuffer();if(me)if(i.drawBuffers){const we=D.texture;for(let Re=0,gt=we.length;Re<gt;Re++){const rn=r.get(we[Re]);void 0===rn.__webglTexture&&(rn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&D.samples>0&&!1===vt(D)){const we=me?S:[S];W.__webglMultisampledFramebuffer=n.createFramebuffer(),W.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,W.__webglMultisampledFramebuffer);for(let Re=0;Re<we.length;Re++){const gt=we[Re];W.__webglColorRenderbuffer[Re]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,W.__webglColorRenderbuffer[Re]);const rn=s.convert(gt.format,gt.colorSpace),ye=s.convert(gt.type),vn=A(gt.internalFormat,rn,ye,gt.colorSpace,!0===D.isXRRenderTarget),xt=Ue(D);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,vn,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,W.__webglColorRenderbuffer[Re])}n.bindRenderbuffer(n.RENDERBUFFER,null),D.depthBuffer&&(W.__webglDepthRenderbuffer=n.createRenderbuffer(),k(W.__webglDepthRenderbuffer,D,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(de){t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture),Be(n.TEXTURE_CUBE_MAP,S,$e);for(let we=0;we<6;we++)if(a&&S.mipmaps&&S.mipmaps.length>0)for(let Re=0;Re<S.mipmaps.length;Re++)et(W.__webglFramebuffer[we][Re],D,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+we,Re);else et(W.__webglFramebuffer[we],D,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+we,0);b(S,$e)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(me){const we=D.texture;for(let Re=0,gt=we.length;Re<gt;Re++){const rn=we[Re],ye=r.get(rn);t.bindTexture(n.TEXTURE_2D,ye.__webglTexture),Be(n.TEXTURE_2D,rn,$e),et(W.__webglFramebuffer,D,rn,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,0),b(rn,$e)&&x(n.TEXTURE_2D)}t.unbindTexture()}else{let we=n.TEXTURE_2D;if((D.isWebGL3DRenderTarget||D.isWebGLArrayRenderTarget)&&(a?we=D.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(we,pe.__webglTexture),Be(we,S,$e),a&&S.mipmaps&&S.mipmaps.length>0)for(let Re=0;Re<S.mipmaps.length;Re++)et(W.__webglFramebuffer[Re],D,S,n.COLOR_ATTACHMENT0,we,Re);else et(W.__webglFramebuffer,D,S,n.COLOR_ATTACHMENT0,we,0);b(S,$e)&&x(we),t.unbindTexture()}D.depthBuffer&&ee(D)},this.updateRenderTargetMipmap=function Ye(D){const S=E(D)||a,W=!0===D.isWebGLMultipleRenderTargets?D.texture:[D.texture];for(let pe=0,de=W.length;pe<de;pe++){const me=W[pe];if(b(me,S)){const $e=D.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,we=r.get(me).__webglTexture;t.bindTexture($e,we),x($e),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Pe(D){if(a&&D.samples>0&&!1===vt(D)){const S=D.isWebGLMultipleRenderTargets?D.texture:[D.texture],W=D.width,pe=D.height;let de=n.COLOR_BUFFER_BIT;const me=[],$e=D.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=r.get(D),Re=!0===D.isWebGLMultipleRenderTargets;if(Re)for(let gt=0;gt<S.length;gt++)t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+gt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+gt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let gt=0;gt<S.length;gt++){me.push(n.COLOR_ATTACHMENT0+gt),D.depthBuffer&&me.push($e);const rn=void 0!==we.__ignoreDepthValues&&we.__ignoreDepthValues;if(!1===rn&&(D.depthBuffer&&(de|=n.DEPTH_BUFFER_BIT),D.stencilBuffer&&(de|=n.STENCIL_BUFFER_BIT)),Re&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,we.__webglColorRenderbuffer[gt]),!0===rn&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[$e]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[$e])),Re){const ye=r.get(S[gt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ye,0)}n.blitFramebuffer(0,0,W,pe,0,0,W,pe,de,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,me)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Re)for(let gt=0;gt<S.length;gt++){t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+gt,n.RENDERBUFFER,we.__webglColorRenderbuffer[gt]);const rn=r.get(S[gt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,we.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+gt,n.TEXTURE_2D,rn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=et,this.useMultisampledRTT=vt}function ySe(n,e,t){const r=t.isWebGL2;return{convert:function i(s,o=""){let a;const c=mn.getTransfer(o);if(s===Ml)return n.UNSIGNED_BYTE;if(1017===s)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===s)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===s)return n.BYTE;if(1011===s)return n.SHORT;if(1012===s)return n.UNSIGNED_SHORT;if(1013===s)return n.INT;if(s===Rl)return n.UNSIGNED_INT;if(s===Ia)return n.FLOAT;if(s===I_)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return n.ALPHA;if(s===qs)return n.RGBA;if(1024===s)return n.LUMINANCE;if(1025===s)return n.LUMINANCE_ALPHA;if(s===td)return n.DEPTH_COMPONENT;if(s===Uf)return n.DEPTH_STENCIL;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return n.RED;if(1029===s)return n.RED_INTEGER;if(1030===s)return n.RG;if(1031===s)return n.RG_INTEGER;if(1033===s)return n.RGBA_INTEGER;if(33776===s||33777===s||33778===s||33779===s)if(c===On){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return c===On?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return c===On?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s||36494===s||36495===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return c===On?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===s)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===s)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===ed?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class vSe extends yi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class V_ extends Co{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ESe={type:"move"};class DR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new V_,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new V_,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new V_,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const g of e.hand.values()){const m=t.getJointPose(g,r),_=this._getHandJoint(l,g);null!==m&&(_.matrix.fromArray(m.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=m.radius),_.visible=null!==m}const h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,r),null===i&&null!==s&&(i=s),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ESe)))}return null!==a&&(a.visible=null!==i),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const r=new V_;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class wSe extends Hf{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null;const g=t.getContextAttributes();let m=null,_=null;const y=[],v=[],E=new ie;let w=null;const b=new yi;b.layers.enable(1),b.viewport=new _n;const x=new yi;x.layers.enable(2),x.viewport=new _n;const A=[b,x],T=new vSe;T.layers.enable(1),T.layers.enable(2);let C=null,F=null;function z(Z){const ne=v.indexOf(Z.inputSource);if(-1===ne)return;const he=y[ne];void 0!==he&&(he.update(Z.inputSource,Z.frame,l||o),he.dispatchEvent({type:Z.type,data:Z.inputSource}))}function Q(){i.removeEventListener("select",z),i.removeEventListener("selectstart",z),i.removeEventListener("selectend",z),i.removeEventListener("squeeze",z),i.removeEventListener("squeezestart",z),i.removeEventListener("squeezeend",z),i.removeEventListener("end",Q),i.removeEventListener("inputsourceschange",N);for(let Z=0;Z<y.length;Z++){const ne=v[Z];null!==ne&&(v[Z]=null,y[Z].disconnect(ne))}C=null,F=null,e.setRenderTarget(m),f=null,h=null,d=null,i=null,_=null,Ce.stop(),r.isPresenting=!1,e.setPixelRatio(w),e.setSize(E.width,E.height,!1),r.dispatchEvent({type:"sessionend"})}function N(Z){for(let ne=0;ne<Z.removed.length;ne++){const he=Z.removed[ne],je=v.indexOf(he);je>=0&&(v[je]=null,y[je].disconnect(he))}for(let ne=0;ne<Z.added.length;ne++){const he=Z.added[ne];let je=v.indexOf(he);if(-1===je){for(let pt=0;pt<y.length;pt++){if(pt>=v.length){v.push(he),je=pt;break}if(null===v[pt]){v[pt]=he,je=pt;break}}if(-1===je)break}const Be=y[je];Be&&Be.connect(he)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ne=y[Z];return void 0===ne&&(ne=new DR,y[Z]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(Z){let ne=y[Z];return void 0===ne&&(ne=new DR,y[Z]=ne),ne.getGripSpace()},this.getHand=function(Z){let ne=y[Z];return void 0===ne&&(ne=new DR,y[Z]=ne),ne.getHandSpace()},this.setFramebufferScaleFactor=function(Z){s=Z,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(Z){l=Z},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=function(){var Z=O(function*(ne){if(i=ne,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",z),i.addEventListener("selectstart",z),i.addEventListener("selectend",z),i.addEventListener("squeeze",z),i.addEventListener("squeezestart",z),i.addEventListener("squeezeend",z),i.addEventListener("end",Q),i.addEventListener("inputsourceschange",N),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),w=e.getPixelRatio(),e.getSize(E),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)f=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),_=new sd(f.framebufferWidth,f.framebufferHeight,{format:qs,type:Ml,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil});else{let he=null,je=null,Be=null;g.depth&&(Be=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=g.stencil?Uf:td,je=g.stencil?ed:Rl);const pt={colorFormat:t.RGBA8,depthFormat:Be,scaleFactor:s};d=new XRWebGLBinding(i,t),h=d.createProjectionLayer(pt),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new sd(h.textureWidth,h.textureHeight,{format:qs,type:Ml,depthTexture:new O9(h.textureWidth,h.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0}),e.properties.get(_).__ignoreDepthValues=h.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield i.requestReferenceSpace(a),Ce.setContext(i),Ce.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(ne){return Z.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const H=new R,K=new R;function le(Z,ne){null===ne?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ne.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(null===i)return;T.near=x.near=b.near=Z.near,T.far=x.far=b.far=Z.far,(C!==T.near||F!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),C=T.near,F=T.far);const ne=Z.parent,he=T.cameras;le(T,ne);for(let je=0;je<he.length;je++)le(he[je],ne);2===he.length?function $(Z,ne,he){H.setFromMatrixPosition(ne.matrixWorld),K.setFromMatrixPosition(he.matrixWorld);const je=H.distanceTo(K),Be=ne.projectionMatrix.elements,pt=he.projectionMatrix.elements,ut=Be[14]/(Be[10]-1),Ke=Be[14]/(Be[10]+1),et=(Be[9]+1)/Be[5],k=(Be[9]-1)/Be[5],be=(Be[8]-1)/Be[0],ee=(pt[8]+1)/pt[0],Ee=ut*be,ae=ut*ee,Ye=je/(-be+ee),Pe=Ye*-be;ne.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Pe),Z.translateZ(Ye),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const Ue=ut+Ye,vt=Ke+Ye;Z.projectionMatrix.makePerspective(Ee-Pe,ae+(je-Pe),et*Ke/vt*Ue,k*Ke/vt*Ue,Ue,vt),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}(T,b,x):T.projectionMatrix.copy(b.projectionMatrix),function X(Z,ne,he){null===he?Z.matrix.copy(ne.matrixWorld):(Z.matrix.copy(he.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ne.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ne.projectionMatrix),Z.projectionMatrixInverse.copy(ne.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=2*Gf*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}(Z,T,ne)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==h||null!==f)return c},this.setFoveation=function(Z){c=Z,null!==h&&(h.fixedFoveation=Z),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=Z)};let re=null;const Ce=new I9;Ce.setAnimationLoop(function ce(Z,ne){if(u=ne.getViewerPose(l||o),p=ne,null!==u){const he=u.views;null!==f&&(e.setRenderTargetFramebuffer(_,f.framebuffer),e.setRenderTarget(_));let je=!1;he.length!==T.cameras.length&&(T.cameras.length=0,je=!0);for(let Be=0;Be<he.length;Be++){const pt=he[Be];let ut=null;if(null!==f)ut=f.getViewport(pt);else{const et=d.getViewSubImage(h,pt);ut=et.viewport,0===Be&&(e.setRenderTargetTextures(_,et.colorTexture,h.ignoreDepthValues?void 0:et.depthStencilTexture),e.setRenderTarget(_))}let Ke=A[Be];void 0===Ke&&(Ke=new yi,Ke.layers.enable(Be),Ke.viewport=new _n,A[Be]=Ke),Ke.matrix.fromArray(pt.transform.matrix),Ke.matrix.decompose(Ke.position,Ke.quaternion,Ke.scale),Ke.projectionMatrix.fromArray(pt.projectionMatrix),Ke.projectionMatrixInverse.copy(Ke.projectionMatrix).invert(),Ke.viewport.set(ut.x,ut.y,ut.width,ut.height),0===Be&&(T.matrix.copy(Ke.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===je&&T.cameras.push(Ke)}}for(let he=0;he<y.length;he++){const je=v[he],Be=y[he];null!==je&&void 0!==Be&&Be.update(je,ne,l||o)}re&&re(Z,ne),ne.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ne}),p=null}),this.setAnimationLoop=function(Z){re=Z},this.dispose=function(){}}}function TSe(n,e){function t(m,_){!0===m.matrixAutoUpdate&&m.updateMatrix(),_.value.copy(m.matrix)}function s(m,_){m.opacity.value=_.opacity,_.color&&m.diffuse.value.copy(_.color),_.emissive&&m.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(m.map.value=_.map,t(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.bumpMap&&(m.bumpMap.value=_.bumpMap,t(_.bumpMap,m.bumpMapTransform),m.bumpScale.value=_.bumpScale,1===_.side&&(m.bumpScale.value*=-1)),_.normalMap&&(m.normalMap.value=_.normalMap,t(_.normalMap,m.normalMapTransform),m.normalScale.value.copy(_.normalScale),1===_.side&&m.normalScale.value.negate()),_.displacementMap&&(m.displacementMap.value=_.displacementMap,t(_.displacementMap,m.displacementMapTransform),m.displacementScale.value=_.displacementScale,m.displacementBias.value=_.displacementBias),_.emissiveMap&&(m.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,m.emissiveMapTransform)),_.specularMap&&(m.specularMap.value=_.specularMap,t(_.specularMap,m.specularMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest);const y=e.get(_).envMap;if(y&&(m.envMap.value=y,m.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,m.reflectivity.value=_.reflectivity,m.ior.value=_.ior,m.refractionRatio.value=_.refractionRatio),_.lightMap){m.lightMap.value=_.lightMap;const v=!0===n._useLegacyLights?Math.PI:1;m.lightMapIntensity.value=_.lightMapIntensity*v,t(_.lightMap,m.lightMapTransform)}_.aoMap&&(m.aoMap.value=_.aoMap,m.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function r(m,_){_.color.getRGB(m.fogColor.value,S9(n)),_.isFog?(m.fogNear.value=_.near,m.fogFar.value=_.far):_.isFogExp2&&(m.fogDensity.value=_.density)},refreshMaterialUniforms:function i(m,_,y,v,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(m,_):_.isMeshToonMaterial?(s(m,_),function d(m,_){_.gradientMap&&(m.gradientMap.value=_.gradientMap)}(m,_)):_.isMeshPhongMaterial?(s(m,_),function u(m,_){m.specular.value.copy(_.specular),m.shininess.value=Math.max(_.shininess,1e-4)}(m,_)):_.isMeshStandardMaterial?(s(m,_),function h(m,_){m.metalness.value=_.metalness,_.metalnessMap&&(m.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,m.metalnessMapTransform)),m.roughness.value=_.roughness,_.roughnessMap&&(m.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,m.roughnessMapTransform)),e.get(_).envMap&&(m.envMapIntensity.value=_.envMapIntensity)}(m,_),_.isMeshPhysicalMaterial&&function f(m,_,y){m.ior.value=_.ior,_.sheen>0&&(m.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),m.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(m.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,m.sheenColorMapTransform)),_.sheenRoughnessMap&&(m.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,m.sheenRoughnessMapTransform))),_.clearcoat>0&&(m.clearcoat.value=_.clearcoat,m.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(m.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,m.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(m.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),1===_.side&&m.clearcoatNormalScale.value.negate())),_.iridescence>0&&(m.iridescence.value=_.iridescence,m.iridescenceIOR.value=_.iridescenceIOR,m.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(m.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,m.iridescenceMapTransform)),_.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),_.transmission>0&&(m.transmission.value=_.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),_.transmissionMap&&(m.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,m.transmissionMapTransform)),m.thickness.value=_.thickness,_.thicknessMap&&(m.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=_.attenuationDistance,m.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(m.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(m.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=_.specularIntensity,m.specularColor.value.copy(_.specularColor),_.specularColorMap&&(m.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,m.specularColorMapTransform)),_.specularIntensityMap&&(m.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,m.specularIntensityMapTransform))}(m,_,E)):_.isMeshMatcapMaterial?(s(m,_),function p(m,_){_.matcap&&(m.matcap.value=_.matcap)}(m,_)):_.isMeshDepthMaterial?s(m,_):_.isMeshDistanceMaterial?(s(m,_),function g(m,_){const y=e.get(_).light;m.referencePosition.value.setFromMatrixPosition(y.matrixWorld),m.nearDistance.value=y.shadow.camera.near,m.farDistance.value=y.shadow.camera.far}(m,_)):_.isMeshNormalMaterial?s(m,_):_.isLineBasicMaterial?(function o(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,_.map&&(m.map.value=_.map,t(_.map,m.mapTransform))}(m,_),_.isLineDashedMaterial&&function a(m,_){m.dashSize.value=_.dashSize,m.totalSize.value=_.dashSize+_.gapSize,m.scale.value=_.scale}(m,_)):_.isPointsMaterial?function c(m,_,y,v){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.size.value=_.size*y,m.scale.value=.5*v,_.map&&(m.map.value=_.map,t(_.map,m.uvTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_,y,v):_.isSpriteMaterial?function l(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.rotation.value=_.rotation,_.map&&(m.map.value=_.map,t(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,t(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_):_.isShadowMaterial?(m.color.value.copy(_.color),m.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function bSe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(y,v,E){const w=y.value;if(void 0===E[v]){if("number"==typeof w)E[v]=w;else{const b=Array.isArray(w)?w:[w],x=[];for(let A=0;A<b.length;A++)x.push(b[A].clone());E[v]=x}return!0}if("number"==typeof w){if(E[v]!==w)return E[v]=w,!0}else{const b=Array.isArray(E[v])?E[v]:[E[v]],x=Array.isArray(w)?w:[w];for(let A=0;A<b.length;A++){const T=b[A];if(!1===T.equals(x[A]))return T.copy(x[A]),!0}}return!1}function g(y){const v={boundary:0,storage:0};return"number"==typeof y?(v.boundary=4,v.storage=4):y.isVector2?(v.boundary=8,v.storage=8):y.isVector3||y.isColor?(v.boundary=16,v.storage=12):y.isVector4?(v.boundary=16,v.storage=16):y.isMatrix3?(v.boundary=48,v.storage=48):y.isMatrix4?(v.boundary=64,v.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),v}function m(y){const v=y.target;v.removeEventListener("dispose",m);const E=o.indexOf(v.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(i[v.id]),delete i[v.id],delete s[v.id]}return{bind:function c(y,v){r.uniformBlockBinding(y,v.program)},update:function l(y,v){let E=i[y.id];void 0===E&&(function p(y){const v=y.uniforms;let E=0;let b=0;for(let x=0,A=v.length;x<A;x++){const T=v[x],C={boundary:0,storage:0},F=Array.isArray(T.value)?T.value:[T.value];for(let z=0,Q=F.length;z<Q;z++){const H=g(F[z]);C.boundary+=H.boundary,C.storage+=H.storage}T.__data=new Float32Array(C.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=E,x>0&&(b=E%16,0!==b&&16-b-C.boundary<0&&(E+=16-b,T.__offset=E)),E+=C.storage}b=E%16,b>0&&(E+=16-b),y.__size=E,y.__cache={}}(y),E=function u(y){const v=function d(){for(let y=0;y<a;y++)if(-1===o.indexOf(y))return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=v;const E=n.createBuffer(),w=y.__size,b=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,w,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,E),E}(y),i[y.id]=E,y.addEventListener("dispose",m)),r.updateUBOMapping(y,v.program);const b=e.render.frame;s[y.id]!==b&&(function h(y){const E=y.uniforms,w=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,i[y.id]);for(let b=0,x=E.length;b<x;b++){const A=E[b];if(!0===f(A,b,w)){const T=A.__offset,C=Array.isArray(A.value)?A.value:[A.value];let F=0;for(let z=0;z<C.length;z++){const Q=C[z],N=g(Q);"number"==typeof Q?(A.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,T+F,A.__data)):Q.isMatrix3?(A.__data[0]=Q.elements[0],A.__data[1]=Q.elements[1],A.__data[2]=Q.elements[2],A.__data[3]=Q.elements[0],A.__data[4]=Q.elements[3],A.__data[5]=Q.elements[4],A.__data[6]=Q.elements[5],A.__data[7]=Q.elements[0],A.__data[8]=Q.elements[6],A.__data[9]=Q.elements[7],A.__data[10]=Q.elements[8],A.__data[11]=Q.elements[0]):(Q.toArray(A.__data,F),F+=N.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,A.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(y),s[y.id]=b)},dispose:function _(){for(const y in i)n.deleteBuffer(i[y]);o=[],i={},s={}}}}class rj{constructor(e={}){const{canvas:t=twe(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==r?r.getContextAttributes().alpha:o;const f=new Uint32Array(4),p=new Int32Array(4);let g=null,m=null;const _=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Kr,this._useLegacyLights=!1,this.toneMapping=Cl,this.toneMappingExposure=1;const v=this;let E=!1,w=0,b=0,x=null,A=-1,T=null;const C=new _n,F=new _n;let z=null;const Q=new Ne(0);let N=0,H=t.width,K=t.height,$=1,le=null,X=null;const re=new _n(0,0,H,K),ce=new _n(0,0,H,K);let Ce=!1;const Z=new bT;let ne=!1,he=!1,je=null;const Be=new ct,pt=new ie,ut=new R,Ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function et(){return null===x?$:1}let ee,Ee,ae,Ye,Pe,Ue,vt,$t,er,D,S,W,pe,de,me,$e,we,Re,gt,rn,ye,vn,xt,mt,k=r;function be(M,B){for(let q=0;q<M.length;q++){const j=t.getContext(M[q],B);if(null!==j)return j}return null}try{const M={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r159"),t.addEventListener("webglcontextlost",Ht,!1),t.addEventListener("webglcontextrestored",L,!1),t.addEventListener("webglcontextcreationerror",ke,!1),null===k){const B=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&B.shift(),k=be(B,M),null===k)throw be(B)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&k instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===k.getShaderPrecisionFormat&&(k.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(M){throw console.error("THREE.WebGLRenderer: "+M.message),M}function Ze(){ee=new Lbe(k),Ee=new Rbe(k,ee,e),ee.init(Ee),vn=new ySe(k,ee,Ee),ae=new mSe(k,ee,Ee),Ye=new Vbe(k),Pe=new iSe,Ue=new _Se(k,ee,ae,Pe,Ee,vn,Ye),vt=new Dbe(v),$t=new kbe(v),er=new Cwe(k,Ee),xt=new Abe(k,ee,er,Ee),D=new Fbe(k,er,Ye,xt),S=new Gbe(k,D,er,Ye),gt=new Hbe(k,Ee,Ue),$e=new Pbe(Pe),W=new rSe(v,vt,$t,ee,Ee,xt,$e),pe=new TSe(v,Pe),de=new oSe,me=new hSe(ee,Ee),Re=new Cbe(v,vt,$t,ae,S,h,c),we=new gSe(v,S,Ee),mt=new bSe(k,Ye,Ee,ae),rn=new Mbe(k,ee,Ye,Ee),ye=new Ube(k,ee,Ye,Ee),Ye.programs=W.programs,v.capabilities=Ee,v.extensions=ee,v.properties=Pe,v.renderLists=de,v.shadowMap=we,v.state=ae,v.info=Ye}Ze();const ze=new wSe(v,k);function Ht(M){M.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function L(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const M=Ye.autoReset,B=we.enabled,q=we.autoUpdate,Y=we.needsUpdate,j=we.type;Ze(),Ye.autoReset=M,we.enabled=B,we.autoUpdate=q,we.needsUpdate=Y,we.type=j}function ke(M){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",M.statusMessage)}function _e(M){const B=M.target;B.removeEventListener("dispose",_e),function J(M){(function xe(M){const B=Pe.get(M).programs;void 0!==B&&(B.forEach(function(q){W.releaseProgram(q)}),M.isShaderMaterial&&W.releaseShaderCache(M))})(M),Pe.remove(M)}(B)}function ot(M,B,q){!0===M.transparent&&2===M.side&&!1===M.forceSinglePass?(M.side=1,M.needsUpdate=!0,RI(M,B,q),M.side=0,M.needsUpdate=!0,RI(M,B,q),M.side=2):RI(M,B,q)}this.xr=ze,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){const M=ee.get("WEBGL_lose_context");M&&M.loseContext()},this.forceContextRestore=function(){const M=ee.get("WEBGL_lose_context");M&&M.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(M){void 0!==M&&($=M,this.setSize(H,K,!1))},this.getSize=function(M){return M.set(H,K)},this.setSize=function(M,B,q=!0){ze.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=M,K=B,t.width=Math.floor(M*$),t.height=Math.floor(B*$),!0===q&&(t.style.width=M+"px",t.style.height=B+"px"),this.setViewport(0,0,M,B))},this.getDrawingBufferSize=function(M){return M.set(H*$,K*$).floor()},this.setDrawingBufferSize=function(M,B,q){H=M,K=B,$=q,t.width=Math.floor(M*q),t.height=Math.floor(B*q),this.setViewport(0,0,M,B)},this.getCurrentViewport=function(M){return M.copy(C)},this.getViewport=function(M){return M.copy(re)},this.setViewport=function(M,B,q,Y){M.isVector4?re.set(M.x,M.y,M.z,M.w):re.set(M,B,q,Y),ae.viewport(C.copy(re).multiplyScalar($).floor())},this.getScissor=function(M){return M.copy(ce)},this.setScissor=function(M,B,q,Y){M.isVector4?ce.set(M.x,M.y,M.z,M.w):ce.set(M,B,q,Y),ae.scissor(F.copy(ce).multiplyScalar($).floor())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(M){ae.setScissorTest(Ce=M)},this.setOpaqueSort=function(M){le=M},this.setTransparentSort=function(M){X=M},this.getClearColor=function(M){return M.copy(Re.getClearColor())},this.setClearColor=function(){Re.setClearColor.apply(Re,arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha.apply(Re,arguments)},this.clear=function(M=!0,B=!0,q=!0){let Y=0;if(M){let j=!1;if(null!==x){const Le=x.texture.format;j=1033===Le||1031===Le||1029===Le}if(j){const Le=x.texture.type,qe=Le===Ml||Le===Rl||1012===Le||Le===ed||1017===Le||1018===Le,rt=Re.getClearColor(),_t=Re.getClearAlpha(),Ot=rt.r,St=rt.g,Ct=rt.b;qe?(f[0]=Ot,f[1]=St,f[2]=Ct,f[3]=_t,k.clearBufferuiv(k.COLOR,0,f)):(p[0]=Ot,p[1]=St,p[2]=Ct,p[3]=_t,k.clearBufferiv(k.COLOR,0,p))}else Y|=k.COLOR_BUFFER_BIT}B&&(Y|=k.DEPTH_BUFFER_BIT),q&&(Y|=k.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),k.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ht,!1),t.removeEventListener("webglcontextrestored",L,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),de.dispose(),me.dispose(),Pe.dispose(),vt.dispose(),$t.dispose(),S.dispose(),xt.dispose(),mt.dispose(),W.dispose(),ze.dispose(),ze.removeEventListener("sessionstart",hs),ze.removeEventListener("sessionend",Dn),je&&(je.dispose(),je=null),fs.stop()},this.renderBufferDirect=function(M,B,q,Y,j,Le){null===B&&(B=Ke);const qe=j.isMesh&&j.matrixWorld.determinant()<0,rt=function QWe(M,B,q,Y,j){!0!==B.isScene&&(B=Ke),Ue.resetTextureUnits();const Le=B.fog,rt=null===x?v.outputColorSpace:!0===x.isXRRenderTarget?x.texture.colorSpace:xc,_t=(Y.isMeshStandardMaterial?$t:vt).get(Y.envMap||(Y.isMeshStandardMaterial?B.environment:null)),Ot=!0===Y.vertexColors&&!!q.attributes.color&&4===q.attributes.color.itemSize,St=!!q.attributes.tangent&&(!!Y.normalMap||Y.anisotropy>0),Ct=!!q.morphAttributes.position,Sr=!!q.morphAttributes.normal,po=!!q.morphAttributes.color;let ui=Cl;Y.toneMapped&&(null===x||!0===x.isXRRenderTarget)&&(ui=v.toneMapping);const cl=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,tr=void 0!==cl?cl.length:0,Ut=Pe.get(Y),V3=m.state.lights;!0!==ne||!0!==he&&M===T||$e.setState(Y,M,M===T&&Y.id===A);let hr=!1;Y.version===Ut.__version?(Ut.needsLights&&Ut.lightsStateVersion!==V3.state.version||Ut.outputColorSpace!==rt||j.isBatchedMesh&&!1===Ut.batching||!j.isBatchedMesh&&!0===Ut.batching||j.isInstancedMesh&&!1===Ut.instancing||!j.isInstancedMesh&&!0===Ut.instancing||j.isSkinnedMesh&&!1===Ut.skinning||!j.isSkinnedMesh&&!0===Ut.skinning||j.isInstancedMesh&&!0===Ut.instancingColor&&null===j.instanceColor||j.isInstancedMesh&&!1===Ut.instancingColor&&null!==j.instanceColor||Ut.envMap!==_t||!0===Y.fog&&Ut.fog!==Le||void 0!==Ut.numClippingPlanes&&(Ut.numClippingPlanes!==$e.numPlanes||Ut.numIntersection!==$e.numIntersection)||Ut.vertexAlphas!==Ot||Ut.vertexTangents!==St||Ut.morphTargets!==Ct||Ut.morphNormals!==Sr||Ut.morphColors!==po||Ut.toneMapping!==ui||!0===Ee.isWebGL2&&Ut.morphTargetsCount!==tr)&&(hr=!0):(hr=!0,Ut.__version=Y.version);let bh=Ut.currentProgram;!0===hr&&(bh=RI(Y,B,j));let Uie=!1,C0=!1,B3=!1;const Wi=bh.getUniforms(),xh=Ut.uniforms;if(ae.useProgram(bh.program)&&(Uie=!0,C0=!0,B3=!0),Y.id!==A&&(A=Y.id,C0=!0),Uie||T!==M){Wi.setValue(k,"projectionMatrix",M.projectionMatrix),Wi.setValue(k,"viewMatrix",M.matrixWorldInverse);const Uo=Wi.map.cameraPosition;void 0!==Uo&&Uo.setValue(k,ut.setFromMatrixPosition(M.matrixWorld)),Ee.logarithmicDepthBuffer&&Wi.setValue(k,"logDepthBufFC",2/(Math.log(M.far+1)/Math.LN2)),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&Wi.setValue(k,"isOrthographic",!0===M.isOrthographicCamera),T!==M&&(T=M,C0=!0,B3=!0)}if(j.isSkinnedMesh){Wi.setOptional(k,j,"bindMatrix"),Wi.setOptional(k,j,"bindMatrixInverse");const Uo=j.skeleton;Uo&&(Ee.floatVertexTextures?(null===Uo.boneTexture&&Uo.computeBoneTexture(),Wi.setValue(k,"boneTexture",Uo.boneTexture,Ue)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}j.isBatchedMesh&&(Wi.setOptional(k,j,"batchingTexture"),Wi.setValue(k,"batchingTexture",j._matricesTexture,Ue));const z3=q.morphAttributes;if((void 0!==z3.position||void 0!==z3.normal||void 0!==z3.color&&!0===Ee.isWebGL2)&&gt.update(j,q,bh),(C0||Ut.receiveShadow!==j.receiveShadow)&&(Ut.receiveShadow=j.receiveShadow,Wi.setValue(k,"receiveShadow",j.receiveShadow)),Y.isMeshGouraudMaterial&&null!==Y.envMap&&(xh.envMap.value=_t,xh.flipEnvMap.value=_t.isCubeTexture&&!1===_t.isRenderTargetTexture?-1:1),C0&&(Wi.setValue(k,"toneMappingExposure",v.toneMappingExposure),Ut.needsLights&&function ZWe(M,B){M.ambientLightColor.needsUpdate=B,M.lightProbe.needsUpdate=B,M.directionalLights.needsUpdate=B,M.directionalLightShadows.needsUpdate=B,M.pointLights.needsUpdate=B,M.pointLightShadows.needsUpdate=B,M.spotLights.needsUpdate=B,M.spotLightShadows.needsUpdate=B,M.rectAreaLights.needsUpdate=B,M.hemisphereLights.needsUpdate=B}(xh,B3),Le&&!0===Y.fog&&pe.refreshFogUniforms(xh,Le),pe.refreshMaterialUniforms(xh,Y,$,K,je),AT.upload(k,Lie(Ut),xh,Ue)),Y.isShaderMaterial&&!0===Y.uniformsNeedUpdate&&(AT.upload(k,Lie(Ut),xh,Ue),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&Wi.setValue(k,"center",j.center),Wi.setValue(k,"modelViewMatrix",j.modelViewMatrix),Wi.setValue(k,"normalMatrix",j.normalMatrix),Wi.setValue(k,"modelMatrix",j.matrixWorld),Y.isShaderMaterial||Y.isRawShaderMaterial){const Uo=Y.uniformsGroups;for(let H3=0,e6e=Uo.length;H3<e6e;H3++)if(Ee.isWebGL2){const Vie=Uo[H3];mt.update(Vie,bh),mt.bind(Vie,bh)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return bh}(M,B,q,Y,j);ae.setMaterial(Y,qe);let _t=q.index,Ot=1;if(!0===Y.wireframe){if(_t=D.getWireframeAttribute(q),void 0===_t)return;Ot=2}const St=q.drawRange,Ct=q.attributes.position;let Sr=St.start*Ot,po=(St.start+St.count)*Ot;null!==Le&&(Sr=Math.max(Sr,Le.start*Ot),po=Math.min(po,(Le.start+Le.count)*Ot)),null!==_t?(Sr=Math.max(Sr,0),po=Math.min(po,_t.count)):null!=Ct&&(Sr=Math.max(Sr,0),po=Math.min(po,Ct.count));const ui=po-Sr;if(ui<0||ui===1/0)return;xt.setup(j,Y,rt,q,_t);let cl,tr=rn;if(null!==_t&&(cl=er.get(_t),tr=ye,tr.setIndex(cl)),j.isMesh)!0===Y.wireframe?(ae.setLineWidth(Y.wireframeLinewidth*et()),tr.setMode(k.LINES)):tr.setMode(k.TRIANGLES);else if(j.isLine){let Ut=Y.linewidth;void 0===Ut&&(Ut=1),ae.setLineWidth(Ut*et()),tr.setMode(j.isLineSegments?k.LINES:j.isLineLoop?k.LINE_LOOP:k.LINE_STRIP)}else j.isPoints?tr.setMode(k.POINTS):j.isSprite&&tr.setMode(k.TRIANGLES);if(j.isBatchedMesh)tr.renderMultiDraw(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount);else if(j.isInstancedMesh)tr.renderInstances(Sr,ui,j.count);else if(q.isInstancedBufferGeometry){const V3=Math.min(q.instanceCount,void 0!==q._maxInstanceCount?q._maxInstanceCount:1/0);tr.renderInstances(Sr,ui,V3)}else tr.render(Sr,ui)},this.compile=function(M,B,q=null){null===q&&(q=M),m=me.get(q),m.init(),y.push(m),q.traverseVisible(function(j){j.isLight&&j.layers.test(B.layers)&&(m.pushLight(j),j.castShadow&&m.pushShadow(j))}),M!==q&&M.traverseVisible(function(j){j.isLight&&j.layers.test(B.layers)&&(m.pushLight(j),j.castShadow&&m.pushShadow(j))}),m.setupLights(v._useLegacyLights);const Y=new Set;return M.traverse(function(j){const Le=j.material;if(Le)if(Array.isArray(Le))for(let qe=0;qe<Le.length;qe++){const rt=Le[qe];ot(rt,q,j),Y.add(rt)}else ot(Le,q,j),Y.add(Le)}),y.pop(),m=null,Y},this.compileAsync=function(M,B,q=null){const Y=this.compile(M,B,q);return new Promise(j=>{function Le(){Y.forEach(function(qe){Pe.get(qe).currentProgram.isReady()&&Y.delete(qe)}),0!==Y.size?setTimeout(Le,10):j(M)}null!==ee.get("KHR_parallel_shader_compile")?Le():setTimeout(Le,10)})};let Qt=null;function hs(){fs.stop()}function Dn(){fs.start()}const fs=new I9;function ic(M,B,q,Y){if(!1===M.visible)return;if(M.layers.test(B.layers))if(M.isGroup)q=M.renderOrder;else if(M.isLOD)!0===M.autoUpdate&&M.update(B);else if(M.isLight)m.pushLight(M),M.castShadow&&m.pushShadow(M);else if(M.isSprite){if(!M.frustumCulled||Z.intersectsSprite(M)){Y&&ut.setFromMatrixPosition(M.matrixWorld).applyMatrix4(Be);const qe=S.update(M),rt=M.material;rt.visible&&g.push(M,qe,rt,q,ut.z,null)}}else if((M.isMesh||M.isLine||M.isPoints)&&(!M.frustumCulled||Z.intersectsObject(M))){const qe=S.update(M),rt=M.material;if(Y&&(void 0!==M.boundingSphere?(null===M.boundingSphere&&M.computeBoundingSphere(),ut.copy(M.boundingSphere.center)):(null===qe.boundingSphere&&qe.computeBoundingSphere(),ut.copy(qe.boundingSphere.center)),ut.applyMatrix4(M.matrixWorld).applyMatrix4(Be)),Array.isArray(rt)){const _t=qe.groups;for(let Ot=0,St=_t.length;Ot<St;Ot++){const Ct=_t[Ot],Sr=rt[Ct.materialIndex];Sr&&Sr.visible&&g.push(M,qe,Sr,q,ut.z,Ct)}}else rt.visible&&g.push(M,qe,rt,q,ut.z,null)}const Le=M.children;for(let qe=0,rt=Le.length;qe<rt;qe++)ic(Le[qe],B,q,Y)}function Oie(M,B,q,Y){const j=M.opaque,Le=M.transmissive,qe=M.transparent;m.setupLightsView(q),!0===ne&&$e.setGlobalState(v.clippingPlanes,q),Le.length>0&&function XWe(M,B,q,Y){if(null!==(!0===q.isScene?q.overrideMaterial:null))return;const Le=Ee.isWebGL2;null===je&&(je=new sd(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?I_:Ml,minFilter:Ju,samples:Le?4:0})),v.getDrawingBufferSize(pt),Le?je.setSize(pt.x,pt.y):je.setSize(tT(pt.x),tT(pt.y));const qe=v.getRenderTarget();v.setRenderTarget(je),v.getClearColor(Q),N=v.getClearAlpha(),N<1&&v.setClearColor(16777215,.5),v.clear();const rt=v.toneMapping;v.toneMapping=Cl,MI(M,q,Y),Ue.updateMultisampleRenderTarget(je),Ue.updateRenderTargetMipmap(je);let _t=!1;for(let Ot=0,St=B.length;Ot<St;Ot++){const Ct=B[Ot],Sr=Ct.object,po=Ct.geometry,ui=Ct.material,cl=Ct.group;if(2===ui.side&&Sr.layers.test(Y.layers)){const tr=ui.side;ui.side=1,ui.needsUpdate=!0,kie(Sr,q,Y,po,ui,cl),ui.side=tr,ui.needsUpdate=!0,_t=!0}}!0===_t&&(Ue.updateMultisampleRenderTarget(je),Ue.updateRenderTargetMipmap(je)),v.setRenderTarget(qe),v.setClearColor(Q,N),v.toneMapping=rt}(j,Le,B,q),Y&&ae.viewport(C.copy(Y)),j.length>0&&MI(j,B,q),Le.length>0&&MI(Le,B,q),qe.length>0&&MI(qe,B,q),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function MI(M,B,q){const Y=!0===B.isScene?B.overrideMaterial:null;for(let j=0,Le=M.length;j<Le;j++){const qe=M[j],rt=qe.object,_t=qe.geometry,Ot=null===Y?qe.material:Y,St=qe.group;rt.layers.test(q.layers)&&kie(rt,B,q,_t,Ot,St)}}function kie(M,B,q,Y,j,Le){M.onBeforeRender(v,B,q,Y,j,Le),M.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,M.matrixWorld),M.normalMatrix.getNormalMatrix(M.modelViewMatrix),j.onBeforeRender(v,B,q,Y,M,Le),!0===j.transparent&&2===j.side&&!1===j.forceSinglePass?(j.side=1,j.needsUpdate=!0,v.renderBufferDirect(q,B,Y,j,M,Le),j.side=0,j.needsUpdate=!0,v.renderBufferDirect(q,B,Y,j,M,Le),j.side=2):v.renderBufferDirect(q,B,Y,j,M,Le),M.onAfterRender(v,B,q,Y,j,Le)}function RI(M,B,q){!0!==B.isScene&&(B=Ke);const Y=Pe.get(M),j=m.state.lights,qe=j.state.version,rt=W.getParameters(M,j.state,m.state.shadowsArray,B,q),_t=W.getProgramCacheKey(rt);let Ot=Y.programs;Y.environment=M.isMeshStandardMaterial?B.environment:null,Y.fog=B.fog,Y.envMap=(M.isMeshStandardMaterial?$t:vt).get(M.envMap||Y.environment),void 0===Ot&&(M.addEventListener("dispose",_e),Ot=new Map,Y.programs=Ot);let St=Ot.get(_t);if(void 0!==St){if(Y.currentProgram===St&&Y.lightsStateVersion===qe)return Fie(M,rt),St}else rt.uniforms=W.getUniforms(M),M.onBuild(q,rt,v),M.onBeforeCompile(rt,v),St=W.acquireProgram(rt,_t),Ot.set(_t,St),Y.uniforms=rt.uniforms;const Ct=Y.uniforms;return(!M.isShaderMaterial&&!M.isRawShaderMaterial||!0===M.clipping)&&(Ct.clippingPlanes=$e.uniform),Fie(M,rt),Y.needsLights=function JWe(M){return M.isMeshLambertMaterial||M.isMeshToonMaterial||M.isMeshPhongMaterial||M.isMeshStandardMaterial||M.isShadowMaterial||M.isShaderMaterial&&!0===M.lights}(M),Y.lightsStateVersion=qe,Y.needsLights&&(Ct.ambientLightColor.value=j.state.ambient,Ct.lightProbe.value=j.state.probe,Ct.directionalLights.value=j.state.directional,Ct.directionalLightShadows.value=j.state.directionalShadow,Ct.spotLights.value=j.state.spot,Ct.spotLightShadows.value=j.state.spotShadow,Ct.rectAreaLights.value=j.state.rectArea,Ct.ltc_1.value=j.state.rectAreaLTC1,Ct.ltc_2.value=j.state.rectAreaLTC2,Ct.pointLights.value=j.state.point,Ct.pointLightShadows.value=j.state.pointShadow,Ct.hemisphereLights.value=j.state.hemi,Ct.directionalShadowMap.value=j.state.directionalShadowMap,Ct.directionalShadowMatrix.value=j.state.directionalShadowMatrix,Ct.spotShadowMap.value=j.state.spotShadowMap,Ct.spotLightMatrix.value=j.state.spotLightMatrix,Ct.spotLightMap.value=j.state.spotLightMap,Ct.pointShadowMap.value=j.state.pointShadowMap,Ct.pointShadowMatrix.value=j.state.pointShadowMatrix),Y.currentProgram=St,Y.uniformsList=null,St}function Lie(M){if(null===M.uniformsList){const B=M.currentProgram.getUniforms();M.uniformsList=AT.seqWithValue(B.seq,M.uniforms)}return M.uniformsList}function Fie(M,B){const q=Pe.get(M);q.outputColorSpace=B.outputColorSpace,q.batching=B.batching,q.instancing=B.instancing,q.instancingColor=B.instancingColor,q.skinning=B.skinning,q.morphTargets=B.morphTargets,q.morphNormals=B.morphNormals,q.morphColors=B.morphColors,q.morphTargetsCount=B.morphTargetsCount,q.numClippingPlanes=B.numClippingPlanes,q.numIntersection=B.numClipIntersection,q.vertexAlphas=B.vertexAlphas,q.vertexTangents=B.vertexTangents,q.toneMapping=B.toneMapping}fs.setAnimationLoop(function li(M){Qt&&Qt(M)}),typeof self<"u"&&fs.setContext(self),this.setAnimationLoop=function(M){Qt=M,ze.setAnimationLoop(M),null===M?fs.stop():fs.start()},ze.addEventListener("sessionstart",hs),ze.addEventListener("sessionend",Dn),this.render=function(M,B){if(void 0===B||!0===B.isCamera){if(!0!==E){if(!0===M.matrixWorldAutoUpdate&&M.updateMatrixWorld(),null===B.parent&&!0===B.matrixWorldAutoUpdate&&B.updateMatrixWorld(),!0===ze.enabled&&!0===ze.isPresenting&&(!0===ze.cameraAutoUpdate&&ze.updateCamera(B),B=ze.getCamera()),!0===M.isScene&&M.onBeforeRender(v,M,B,x),m=me.get(M,y.length),m.init(),y.push(m),Be.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse),Z.setFromProjectionMatrix(Be),he=this.localClippingEnabled,ne=$e.init(this.clippingPlanes,he),g=de.get(M,_.length),g.init(),_.push(g),ic(M,B,0,v.sortObjects),g.finish(),!0===v.sortObjects&&g.sort(le,X),this.info.render.frame++,!0===ne&&$e.beginShadows(),we.render(m.state.shadowsArray,M,B),!0===ne&&$e.endShadows(),!0===this.info.autoReset&&this.info.reset(),Re.render(g,M),m.setupLights(v._useLegacyLights),B.isArrayCamera){const Y=B.cameras;for(let j=0,Le=Y.length;j<Le;j++){const qe=Y[j];Oie(g,M,qe,qe.viewport)}}else Oie(g,M,B);null!==x&&(Ue.updateMultisampleRenderTarget(x),Ue.updateRenderTargetMipmap(x)),!0===M.isScene&&M.onAfterRender(v,M,B),xt.resetDefaultState(),A=-1,T=null,y.pop(),m=y.length>0?y[y.length-1]:null,_.pop(),g=_.length>0?_[_.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(M,B,q){Pe.get(M.texture).__webglTexture=B,Pe.get(M.depthTexture).__webglTexture=q;const Y=Pe.get(M);Y.__hasExternalTextures=!0,Y.__hasExternalTextures&&(Y.__autoAllocateDepthBuffer=void 0===q,Y.__autoAllocateDepthBuffer||!0===ee.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(M,B){const q=Pe.get(M);q.__webglFramebuffer=B,q.__useDefaultFramebuffer=void 0===B},this.setRenderTarget=function(M,B=0,q=0){x=M,w=B,b=q;let Y=!0,j=null,Le=!1,qe=!1;if(M){const _t=Pe.get(M);void 0!==_t.__useDefaultFramebuffer?(ae.bindFramebuffer(k.FRAMEBUFFER,null),Y=!1):void 0===_t.__webglFramebuffer?Ue.setupRenderTarget(M):_t.__hasExternalTextures&&Ue.rebindTextures(M,Pe.get(M.texture).__webglTexture,Pe.get(M.depthTexture).__webglTexture);const Ot=M.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&&(qe=!0);const St=Pe.get(M).__webglFramebuffer;M.isWebGLCubeRenderTarget?(j=Array.isArray(St[B])?St[B][q]:St[B],Le=!0):j=Ee.isWebGL2&&M.samples>0&&!1===Ue.useMultisampledRTT(M)?Pe.get(M).__webglMultisampledFramebuffer:Array.isArray(St)?St[q]:St,C.copy(M.viewport),F.copy(M.scissor),z=M.scissorTest}else C.copy(re).multiplyScalar($).floor(),F.copy(ce).multiplyScalar($).floor(),z=Ce;if(ae.bindFramebuffer(k.FRAMEBUFFER,j)&&Ee.drawBuffers&&Y&&ae.drawBuffers(M,j),ae.viewport(C),ae.scissor(F),ae.setScissorTest(z),Le){const _t=Pe.get(M.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+B,_t.__webglTexture,q)}else if(qe){const _t=Pe.get(M.texture);k.framebufferTextureLayer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,_t.__webglTexture,q||0,B||0)}A=-1},this.readRenderTargetPixels=function(M,B,q,Y,j,Le,qe){if(!M||!M.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let rt=Pe.get(M).__webglFramebuffer;if(M.isWebGLCubeRenderTarget&&void 0!==qe&&(rt=rt[qe]),rt){ae.bindFramebuffer(k.FRAMEBUFFER,rt);try{const _t=M.texture,Ot=_t.format,St=_t.type;if(Ot!==qs&&vn.convert(Ot)!==k.getParameter(k.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ct=St===I_&&(ee.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&ee.has("EXT_color_buffer_float"));if(!(St===Ml||vn.convert(St)===k.getParameter(k.IMPLEMENTATION_COLOR_READ_TYPE)||St===Ia&&(Ee.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float"))||Ct))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");B>=0&&B<=M.width-Y&&q>=0&&q<=M.height-j&&k.readPixels(B,q,Y,j,vn.convert(Ot),vn.convert(St),Le)}finally{const _t=null!==x?Pe.get(x).__webglFramebuffer:null;ae.bindFramebuffer(k.FRAMEBUFFER,_t)}}},this.copyFramebufferToTexture=function(M,B,q=0){const Y=Math.pow(2,-q),j=Math.floor(B.image.width*Y),Le=Math.floor(B.image.height*Y);Ue.setTexture2D(B,0),k.copyTexSubImage2D(k.TEXTURE_2D,q,0,0,M.x,M.y,j,Le),ae.unbindTexture()},this.copyTextureToTexture=function(M,B,q,Y=0){const j=B.image.width,Le=B.image.height,qe=vn.convert(q.format),rt=vn.convert(q.type);Ue.setTexture2D(q,0),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,q.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,q.unpackAlignment),B.isDataTexture?k.texSubImage2D(k.TEXTURE_2D,Y,M.x,M.y,j,Le,qe,rt,B.image.data):B.isCompressedTexture?k.compressedTexSubImage2D(k.TEXTURE_2D,Y,M.x,M.y,B.mipmaps[0].width,B.mipmaps[0].height,qe,B.mipmaps[0].data):k.texSubImage2D(k.TEXTURE_2D,Y,M.x,M.y,qe,rt,B.image),0===Y&&q.generateMipmaps&&k.generateMipmap(k.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(M,B,q,Y,j=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Le=M.max.x-M.min.x+1,qe=M.max.y-M.min.y+1,rt=M.max.z-M.min.z+1,_t=vn.convert(Y.format),Ot=vn.convert(Y.type);let St;if(Y.isData3DTexture)Ue.setTexture3D(Y,0),St=k.TEXTURE_3D;else{if(!Y.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ue.setTexture2DArray(Y,0),St=k.TEXTURE_2D_ARRAY}k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,Y.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,Y.unpackAlignment);const Ct=k.getParameter(k.UNPACK_ROW_LENGTH),Sr=k.getParameter(k.UNPACK_IMAGE_HEIGHT),po=k.getParameter(k.UNPACK_SKIP_PIXELS),ui=k.getParameter(k.UNPACK_SKIP_ROWS),cl=k.getParameter(k.UNPACK_SKIP_IMAGES),tr=q.isCompressedTexture?q.mipmaps[0]:q.image;k.pixelStorei(k.UNPACK_ROW_LENGTH,tr.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,tr.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,M.min.x),k.pixelStorei(k.UNPACK_SKIP_ROWS,M.min.y),k.pixelStorei(k.UNPACK_SKIP_IMAGES,M.min.z),q.isDataTexture||q.isData3DTexture?k.texSubImage3D(St,j,B.x,B.y,B.z,Le,qe,rt,_t,Ot,tr.data):q.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),k.compressedTexSubImage3D(St,j,B.x,B.y,B.z,Le,qe,rt,_t,tr.data)):k.texSubImage3D(St,j,B.x,B.y,B.z,Le,qe,rt,_t,Ot,tr),k.pixelStorei(k.UNPACK_ROW_LENGTH,Ct),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,Sr),k.pixelStorei(k.UNPACK_SKIP_PIXELS,po),k.pixelStorei(k.UNPACK_SKIP_ROWS,ui),k.pixelStorei(k.UNPACK_SKIP_IMAGES,cl),0===j&&Y.generateMipmaps&&k.generateMipmap(St),ae.unbindTexture()},this.initTexture=function(M){M.isCubeTexture?Ue.setTextureCube(M,0):M.isData3DTexture?Ue.setTexture3D(M,0):M.isDataArrayTexture||M.isCompressedArrayTexture?Ue.setTexture2DArray(M,0):Ue.setTexture2D(M,0),ae.unbindTexture()},this.resetState=function(){w=0,b=0,x=null,ae.reset(),xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ca}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===eR?"display-p3":"srgb",t.unpackColorSpace=mn.workingColorSpace===Xw?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Kr?nd:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===nd?Kr:xc}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class xSe extends rj{}).prototype.isWebGL1Renderer=!0;class ij extends Co{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Tp extends Lt{constructor(e=1,t=.4,r=12,i=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],c=[],l=[],u=new R,d=new R,h=new R;for(let f=0;f<=r;f++)for(let p=0;p<=i;p++){const g=p/i*s,m=f/r*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(g),d.y=(e+t*Math.cos(m))*Math.sin(g),d.z=t*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(d,u).normalize(),c.push(h.x,h.y,h.z),l.push(p/i),l.push(f/r)}for(let f=1;f<=r;f++)for(let p=1;p<=i;p++){const m=(i+1)*(f-1)+p-1,_=(i+1)*(f-1)+p,y=(i+1)*f+p;o.push((i+1)*f+p-1,m,y),o.push(m,_,y)}this.setIndex(o),this.setAttribute("position",new Ge(a,3)),this.setAttribute("normal",new Ge(c,3)),this.setAttribute("uv",new Ge(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tp(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}function md(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}class JT{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(void 0===i){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(r=2,s=a);for(let c=r-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0}}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class NIe extends JT{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],c=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-r;break;case 2402:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*r-t;break;case 2402:o=1,c=r+i[1]-i[0];break;default:o=e-1,c=t}const l=.5*(r-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-t)/(i-t),g=p*p,m=g*p,_=-h*m+2*h*g-h*p,y=(1+h)*m+(-1.5-2*h)*g+(-.5+h)*p+1,v=(-1-f)*m+(1.5+f)*g+.5*p,E=f*m-f*g;for(let w=0;w!==a;++w)s[w]=_*o[u+w]+y*o[l+w]+v*o[c+w]+E*o[d+w];return s}}class qj extends JT{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}}class OIe extends JT{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Pa{constructor(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=md(t,this.TimeBufferType),this.values=md(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:md(e.times,Array),values:md(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new OIe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new NIe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==s||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=r[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==i&&function $j(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(i))for(let a=0,c=i.length;a!==c;++a){const l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(i)c=!0;else{const d=a*r,h=d-r,f=d+r;for(let p=0;p!==r;++p){const g=t[d+p];if(g!==t[h+p]||g!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,c=o*r,l=0;l!==r;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Pa.prototype.TimeBufferType=Float32Array,Pa.prototype.ValueBufferType=Float32Array,Pa.prototype.DefaultInterpolation=2301;class bp extends Pa{}bp.prototype.ValueTypeName="bool",bp.prototype.ValueBufferType=Array,bp.prototype.DefaultInterpolation=2300,bp.prototype.InterpolantFactoryMethodLinear=void 0,bp.prototype.InterpolantFactoryMethodSmooth=void 0;(class Kj extends Pa{}).prototype.ValueTypeName="color";(class eb extends Pa{}).prototype.ValueTypeName="number";class kIe extends JT{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(r-t)/(i-t);let l=e*a;for(let u=l+a;l!==u;l+=4)Ys.slerpFlat(s,0,o,l-a,o,l,c);return s}}class J_ extends Pa{InterpolantFactoryMethodLinear(e){return new kIe(this.times,this.values,this.getValueSize(),e)}}J_.prototype.ValueTypeName="quaternion",J_.prototype.DefaultInterpolation=2301,J_.prototype.InterpolantFactoryMethodSmooth=void 0;class xp extends Pa{}xp.prototype.ValueTypeName="string",xp.prototype.ValueBufferType=Array,xp.prototype.DefaultInterpolation=2300,xp.prototype.InterpolantFactoryMethodLinear=void 0,xp.prototype.InterpolantFactoryMethodSmooth=void 0;(class tb extends Pa{}).prototype.ValueTypeName="vector";const fP="\\[\\]\\.:\\/",rCe=new RegExp("["+fP+"]","g"),pP="[^"+fP+"]",iCe="[^"+fP.replace("\\.","")+"]",lCe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",pP)+/(WCOD+)?/.source.replace("WCOD",iCe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pP)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pP)+"$"),uCe=["material","materials","bones","map"];class dCe{constructor(e,t,r){const i=r||kn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let kn=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(rCe,"")}static parseTrackName(t){const r=lCe.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=i.nodeName.substring(s+1);-1!==uCe.indexOf(o)&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){const i=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===r||c.uuid===r)return c;const l=i(c.children);if(l)return l}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)t[r++]=i[s]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,s=r.propertyName;let o=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let u=r.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=dCe,n})();kn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},kn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},kn.prototype.GetterByBindingType=[kn.prototype._getValue_direct,kn.prototype._getValue_array,kn.prototype._getValue_arrayElement,kn.prototype._getValue_toArray],kn.prototype.SetterByBindingTypeAndVersioning=[[kn.prototype._setValue_direct,kn.prototype._setValue_direct_setNeedsUpdate,kn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_array,kn.prototype._setValue_array_setNeedsUpdate,kn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_arrayElement,kn.prototype._setValue_arrayElement_setNeedsUpdate,kn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kn.prototype._setValue_fromArray,kn.prototype._setValue_fromArray_setNeedsUpdate,kn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class gCe{constructor(e,t,r=0,i=1/0){this.ray=new N_(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new pR,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return gP(e,this,r,t),r.sort(l7),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)gP(e[i],this,r,t);return r.sort(l7),r}}function l7(n,e){return n.distance-e.distance}function gP(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===r){const i=n.children;for(let s=0,o=i.length;s<o;s++)gP(i[s],e,t,!0)}}function Nc(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v7(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"159"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="159");var yP,Ni,or,Yn,Ro,xP,SP,S7,A7,Pp,ly,c,l,u,d,h,f,n,e,t,r,i,s,o,a,p,eo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ip={duration:.5,overwrite:!1,delay:0},Mo=1e8,wn=1e-8,vP=2*Math.PI,_Ce=vP/4,yCe=0,E7=Math.sqrt,vCe=Math.cos,ECe=Math.sin,Xr=function(e){return"string"==typeof e},ar=function(e){return"function"==typeof e},Oc=function(e){return"number"==typeof e},EP=function(e){return typeof e>"u"},Da=function(e){return"object"==typeof e},Is=function(e){return!1!==e},wP=function(){return typeof window<"u"},db=function(e){return ar(e)||Xr(e)},w7="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Oi=Array.isArray,TP=/(?:-?\.?\d|\.)+/gi,T7=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Cp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,bP=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,b7=/[+-]=-?[.\d]+/,x7=/[^,'"\[\]\s]+/gi,wCe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,to={},hb={},I7=function(e){return(hb=bd(e,to))&&Ms},IP=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ty=function(e,t){return!t&&console.warn(e)},C7=function(e,t){return e&&(to[e]=t)&&hb&&(hb[e]=t)||to},ny=function(){return 0},TCe={suppressEvents:!0,isStart:!0,kill:!1},fb={suppressEvents:!0,kill:!1},bCe={suppressEvents:!0},CP={},zl=[],AP={},no={},MP={},M7=30,pb=[],RP="",PP=function(e){var r,i,t=e[0];if(Da(t)||ar(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=pb.length;i--&&!pb[i].targetTest(t););r=pb[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new iq(e[i],r)))||e.splice(i,1);return e},Td=function(e){return e._gsap||PP(No(e))[0]._gsap},R7=function(e,t,r){return(r=e[t])&&ar(r)?e[t]():EP(r)&&e.getAttribute&&e.getAttribute(t)||r},Cs=function(e,t){return(e=e.split(",")).forEach(t)||e},vr=function(e){return Math.round(1e5*e)/1e5||0},Qr=function(e){return Math.round(1e7*e)/1e7||0},Ap=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),"+"===r?e+i:"-"===r?e-i:"*"===r?e*i:e/i},xCe=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},gb=function(){var r,i,e=zl.length,t=zl.slice(0);for(AP={},zl.length=0,r=0;r<e;r++)(i=t[r])&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},P7=function(e,t,r,i){zl.length&&!Ni&&gb(),e.render(t,r,i||Ni&&t<0&&(e._initted||e._startAt)),zl.length&&!Ni&&gb()},D7=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(x7).length<2?t:Xr(e)?e.trim():e},N7=function(e){return e},Po=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},bd=function(e,t){for(var r in t)e[r]=t[r];return e},O7=function n(e,t){for(var r in t)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=Da(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},mb=function(e,t){var i,r={};for(i in e)i in t||(r[i]=e[i]);return r},ry=function(e){var t=e.parent||Yn,r=e.keyframes?function(e){return function(t,r){for(var i in r)i in t||"duration"===i&&e||"ease"===i||(t[i]=r[i])}}(Oi(e.keyframes)):Po;if(Is(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},k7=function(e,t,r,i,s){void 0===r&&(r="_first"),void 0===i&&(i="_last");var a,o=e[i];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},_b=function(e,t,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Hl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},xd=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},DP=function(e,t,r,i){return e._startAt&&(Ni?e._startAt.revert(fb):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},ACe=function n(e){return!e||e._ts&&n(e.parent)},L7=function(e){return e._repeat?Mp(e._tTime,e=e.duration()+e._rDelay)*e:0},Mp=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},yb=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},vb=function(e){return e._end=Qr(e._start+(e._tDur/Math.abs(e._ts||e._rts||wn)||0))},Eb=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Qr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),vb(e),r._dirty||xd(r,e)),e},F7=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=yb(e.rawTime(),t),(!t._dur||sy(0,t.totalDuration(),r)-t._tTime>wn)&&t.render(r,!0)),xd(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-wn}},Na=function(e,t,r,i){return t.parent&&Hl(t),t._start=Qr((Oc(r)?r:r||e!==Yn?Do(e,r,t):e._time)+t._delay),t._end=Qr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),k7(e,t,"_first","_last",e._sort?"_start":0),NP(t)||(e._recent=t),i||F7(e,t),e._ts<0&&Eb(e,e._tTime),e},U7=function(e,t){return(to.ScrollTrigger||IP("scrollTrigger",t))&&to.ScrollTrigger.create(t,e)},V7=function(e,t,r,i,s){return HP(e,t,s),e._initted?!r&&e._pt&&!Ni&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&A7!==io.frame?(zl.push(e),e._lazy=[s,i],1):void 0:1},MCe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},NP=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Rp=function(e,t,r,i){var s=e._repeat,o=Qr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Qr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Eb(e,e._tTime=e._tDur*a),e.parent&&vb(e),r||xd(e.parent,e),e},B7=function(e){return e instanceof ss?xd(e):Rp(e,e._dur)},DCe={_start:0,endTime:ny,totalDuration:ny},Do=function n(e,t,r){var a,c,l,i=e.labels,s=e._recent||DCe,o=e.duration()>=Mo?s.endTime(!1):e._dur;return Xr(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&r&&(c=c/100*(Oi(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+c:o+c)):null==t?o:+t},iy=function(e,t,r){var a,c,i=Oc(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s];if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,c=r;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=Is(c.vars.inherit)&&c.parent;o.immediateRender=Is(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Pr(t[0],o,t[s+1])},Gl=function(e,t){return e||0===e?t(e):t},sy=function(e,t,r){return r<e?e:r>t?t:r},ki=function(e,t){return Xr(e)&&(t=wCe.exec(e))?t[1]:""},OP=[].slice,z7=function(e,t){return e&&Da(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Da(e[0]))&&!e.nodeType&&e!==Ro},No=function(e,t,r){return or&&!t&&or.selector?or.selector(e):!Xr(e)||r||!xP&&Dp()?Oi(e)?function(e,t,r){return void 0===r&&(r=[]),e.forEach(function(i){var s;return Xr(i)&&!t||z7(i,1)?(s=r).push.apply(s,No(i)):r.push(i)})||r}(e,r):z7(e)?OP.call(e,0):e?[e]:[]:OP.call((t||SP).querySelectorAll(e),0)},kP=function(e){return e=No(e)[0]||ty("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return No(t,r.querySelectorAll?r:r===e?ty("Invalid scope")||SP.createElement("div"):e)}},H7=function(e){return e.sort(function(){return.5-Math.random()})},G7=function(e){if(ar(e))return e;var t=Da(e)?e:{each:e},r=Sd(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,c=isNaN(i)||a,l=t.axis,u=i,d=i;return Xr(i)?u=d={center:.5,edges:.5,end:1}[i]||0:!a&&c&&(u=i[0],d=i[1]),function(h,f,p){var _,y,v,E,w,b,x,A,T,g=(p||t).length,m=o[g];if(!m){if(!(T="auto"===t.grid?0:(t.grid||[1,Mo])[1])){for(x=-Mo;x<(x=p[T++].getBoundingClientRect().left)&&T<g;);T<g&&T--}for(m=o[g]=[],_=c?Math.min(T,g)*u-.5:i%T,y=T===Mo?0:c?g*d/T-.5:i/T|0,x=0,A=Mo,b=0;b<g;b++)v=b%T-_,E=y-(b/T|0),m[b]=w=l?Math.abs("y"===l?E:v):E7(v*v+E*E),w>x&&(x=w),w<A&&(A=w);"random"===i&&H7(m),m.max=x-A,m.min=A,m.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(T>g?g-1:l?"y"===l?g/T:T:Math.max(T,g/T))||0)*("edges"===i?-1:1),m.b=g<0?s-g:s,m.u=ki(t.amount||t.each)||0,r=r&&g<0?tq(r):r}return g=(m[h]-m.min)/m.max||0,Qr(m.b+(r?r(g):g)*m.v)+m.u}},LP=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Qr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Oc(r)?0:ki(r))}},W7=function(e,t){var i,s,r=Oi(e);return!r&&Da(e)&&(i=r=e.radius||Mo,e.values?(e=No(e.values),(s=!Oc(e[0]))&&(i*=i)):e=LP(e.increment)),Gl(t,r?ar(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),l=Mo,u=0,d=e.length;d--;)(h=s?(h=e[d].x-a)*h+(f=e[d].y-c)*f:Math.abs(e[d]-a))<l&&(l=h,u=d);return u=!i||l<=i?e[u]:o,s||u===o||Oc(o)?u:u+ki(o)}:LP(e))},$7=function(e,t,r,i){return Gl(Oi(e)?!t:!0===r?!!(r=0):!i,function(){return Oi(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+.99*r))/r)*r*i)/i})},j7=function(e,t,r){return Gl(r,function(i){return e[~~t(i)]})},oy=function(e){for(var i,s,o,a,t=0,r="";~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a="["===e.charAt(i+7),s=e.substr(i+7,o-i-7).match(a?x7:TP),r+=e.substr(t,i-t)+$7(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},q7=function(e,t,r,i,s){var o=t-e,a=i-r;return Gl(s,function(c){return r+((c-e)/o*a||0)})},K7=function(e,t,r){var o,a,c,i=e.labels,s=Mo;for(o in i)(a=i[o]-t)<0==!!r&&a&&s>(a=Math.abs(a))&&(c=o,s=a);return c},ro=function(e,t,r){var c,l,u,i=e.vars,s=i[t],o=or,a=e._ctx;if(s)return c=i[t+"Params"],l=i.callbackScope||e,r&&zl.length&&gb(),a&&(or=a),u=c?s.apply(l,c):s.call(l),or=o,u},ay=function(e){return Hl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ni),e.progress()<1&&ro(e,"onInterrupt"),e},Y7=[],X7=function(e){if(wP()&&e){var t=(e=!e.name&&e.default||e).name,r=ar(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:ny,render:$P,add:BP,kill:nAe,modifier:tAe,rawVars:0},o={targetTest:0,get:0,getSetter:WP,aliases:{},register:0};if(Dp(),e!==i){if(no[t])return;Po(i,Po(mb(e,s),o)),bd(i.prototype,bd(s,mb(e,o))),no[i.prop=t]=i,e.targetTest&&(pb.push(i),CP[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}C7(t,i),e.register&&e.register(Ms,i,As)}else e&&Y7.push(e)},Tn=255,cy={aqua:[0,Tn,Tn],lime:[0,Tn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Tn],navy:[0,0,128],white:[Tn,Tn,Tn],olive:[128,128,0],yellow:[Tn,Tn,0],orange:[Tn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Tn,0,0],pink:[Tn,192,203],cyan:[0,Tn,Tn],transparent:[Tn,Tn,Tn,0]},FP=function(e,t,r){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)*Tn+.5|0},Q7=function(e,t,r){var s,o,a,c,l,u,d,h,f,p,i=e?Oc(e)?[e>>16,e>>8&Tn,e&Tn]:0:cy.black;if(!i){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),cy[e])i=cy[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(i=parseInt(e.substr(1,6),16))>>16,i>>8&Tn,i&Tn,parseInt(e.substr(7),16)/255];i=[(e=parseInt(e.substr(1),16))>>16,e>>8&Tn,e&Tn]}else if("hsl"===e.substr(0,3))if(i=p=e.match(TP),t){if(~e.indexOf("="))return i=e.match(T7),r&&i.length<4&&(i[3]=1),i}else c=+i[0]%360/360,l=+i[1]/100,s=2*(u=+i[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),i.length>3&&(i[3]*=1),i[0]=FP(c+1/3,s,o),i[1]=FP(c,s,o),i[2]=FP(c-1/3,s,o);else i=e.match(TP)||cy.transparent;i=i.map(Number)}return t&&!p&&(s=i[0]/Tn,o=i[1]/Tn,a=i[2]/Tn,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?c=l=0:(f=d-h,l=u>.5?f/(2-d-h):f/(d+h),c=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,c*=60),i[0]=~~(c+.5),i[1]=~~(100*l+.5),i[2]=~~(100*u+.5)),r&&i.length<4&&(i[3]=1),i},Z7=function(e){var t=[],r=[],i=-1;return e.split(Wl).forEach(function(s){var o=s.match(Cp)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},J7=function(e,t,r){var c,l,u,d,i="",s=(e+i).match(Wl),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(h){return(h=Q7(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),r&&(u=Z7(e),(c=r.c).join(i)!==u.c.join(i)))for(d=(l=e.replace(Wl,"1").split(Cp)).length-1;a<d;a++)i+=l[a]+(~c.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!l)for(d=(l=e.split(Wl)).length-1;a<d;a++)i+=l[a]+s[a];return i+l[d]},Wl=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in cy)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),zCe=/hsl[a]?\(/,eq=function(e){var r,t=e.join(" ");if(Wl.lastIndex=0,Wl.test(t))return r=zCe.test(t),e[1]=J7(e[1],r),e[0]=J7(e[0],r,Z7(e[1])),!0},io=(n=Date.now,e=500,t=33,r=n(),i=r,o=s=1e3/240,p=function g(m){var v,E,w,b,_=n()-i,y=!0===m;if(_>e&&(r+=_-t),((v=(w=(i+=_)-r)-o)>0||y)&&(b=++d.frame,h=w-1e3*d.time,d.time=w/=1e3,o+=v+(v>=s?4:s-v),E=1),y||(c=l(g)),E)for(f=0;f<a.length;f++)a[f](w,h,b,m)},d={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(m){return h/(1e3/(m||60))},wake:function(){S7&&(!xP&&wP()&&(Ro=xP=window,SP=Ro.document||{},to.gsap=Ms,(Ro.gsapVersions||(Ro.gsapVersions=[])).push(Ms.version),I7(hb||Ro.GreenSockGlobals||!Ro.gsap&&Ro||{}),u=Ro.requestAnimationFrame,Y7.forEach(X7)),c&&d.sleep(),l=u||function(m){return setTimeout(m,o-1e3*d.time+1|0)},ly=1,p(2))},sleep:function(){(u?Ro.cancelAnimationFrame:clearTimeout)(c),ly=0,l=ny},lagSmoothing:function(m,_){e=m||1/0,t=Math.min(_||33,e)},fps:function(m){o=1e3*d.time+(s=1e3/(m||240))},add:function(m,_,y){var v=_?function(E,w,b,x){m(E,w,b,x),d.remove(v)}:m;return d.remove(m),a[y?"unshift":"push"](v),Dp(),v},remove:function(m,_){~(_=a.indexOf(m))&&a.splice(_,1)&&f>=_&&f--},_listeners:a=[]}),Dp=function(){return!ly&&io.wake()},Wt={},HCe=/^[\d.\-M][\d.\-,\s]/,GCe=/["']/g,WCe=function(e){for(var a,c,l,t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length;s<o;s++)c=r[s],a=s!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[i]=isNaN(l)?l.replace(GCe,"").trim():+l,i=c.substr(a+1).trim();return t},tq=function(e){return function(t){return 1-e(1-t)}},nq=function n(e,t){for(var i,r=e._first;r;)r instanceof ss?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Sd=function(e,t){return e&&(ar(e)?e:Wt[e]||function(e){var t=(e+"").split("("),r=Wt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[WCe(t[1])]:function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)}(e).split(",").map(D7)):Wt._CE&&HCe.test(e)?Wt._CE("",e):r}(e))||t},Id=function(e,t,r,i){void 0===r&&(r=function(c){return 1-t(1-c)}),void 0===i&&(i=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,s={easeIn:t,easeOut:r,easeInOut:i};return Cs(e,function(a){for(var c in Wt[a]=to[a]=s,Wt[o=a.toLowerCase()]=r,s)Wt[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=Wt[a+"."+c]=s[c]}),s},rq=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},UP=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/vP*(Math.asin(1/i)||0),a=function(u){return 1===u?1:i*Math.pow(2,-10*u)*ECe((u-o)*s)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:rq(a);return s=vP/s,c.config=function(l,u){return n(e,l,u)},c},VP=function n(e,t){void 0===t&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i="out"===e?r:"in"===e?function(s){return 1-r(1-s)}:rq(r);return i.config=function(s){return n(e,s)},i};Cs("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Id(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(2*r,t)/2:1-Math.pow(2*(1-r),t)/2})}),Wt.Linear.easeNone=Wt.none=Wt.Linear.easeIn,Id("Elastic",UP("in"),UP("out"),UP()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Id("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),Id("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),Id("Circ",function(n){return-(E7(1-n*n)-1)}),Id("Sine",function(n){return 1===n?1:1-vCe(n*_Ce)}),Id("Back",VP("in"),VP("out"),VP()),Wt.SteppedEase=Wt.steps=to.SteppedEase={config:function(e,t){void 0===e&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0;return function(a){return((i*sy(0,.99999999,a)|0)+s)*r}}},Ip.ease=Wt["quad.out"],Cs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return RP+=n+","+n+"Params,"});var iq=function(e,t){this.id=yCe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:R7,this.set=t?t.getSetter:WP},uy=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Rp(this,+t.duration,1,1),this.data=t.data,or&&(this._ctx=or,or.data.push(this)),ly||io.wake()}var e=n.prototype;return e.delay=function(r){return r||0===r?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Rp(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Dp(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Eb(this,r),!s._dp||s.parent||F7(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Na(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===wn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),P7(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+L7(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?r:1-r)+L7(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Mp(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-wn?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?yb(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-wn?0:this._rts,this.totalTime(sy(-Math.abs(this._delay),this._tDur,s),!1!==i),vb(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Dp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==wn&&(this._tTime-=wn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Na(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Is(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?yb(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){void 0===r&&(r=bCe);var i=Ni;return Ni=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),"nested"!==this.data&&!1!==r.kill&&this.kill(),Ni=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,B7(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,B7(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Do(this,r),Is(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Is(i))},e.play=function(r,i){return null!=r&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return null!=r&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return null!=r&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-wn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-wn,this},e.isActive=function(){var s,r=this.parent||this._dp,i=this._start;return!(r&&!(this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-wn))},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),"onUpdate"===r&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=ar(r)?r:N7,a=function(){var l=i.then;i.then=null,ar(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=l),s(o),i.then=l};i._initted&&1===i.totalProgress()&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){ay(this)},n}();Po(uy.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-wn,_prom:0,_ps:!1,_rts:1});var ss=function(n){function e(r,i){var s;return void 0===r&&(r={}),(s=n.call(this,r)||this).labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Is(r.sortChildren),Yn&&Na(r.parent||Yn,Nc(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&U7(Nc(s),r.scrollTrigger),s}v7(e,n);var t=e.prototype;return t.to=function(i,s,o){return iy(0,arguments,this),this},t.from=function(i,s,o){return iy(1,arguments,this),this},t.fromTo=function(i,s,o,a){return iy(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,ry(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Pr(i,s,Do(this,o),1),this},t.call=function(i,s,o){return Na(this,Pr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,c,l,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new Pr(i,o,Do(this,c)),this},t.staggerFrom=function(i,s,o,a,c,l,u){return o.runBackwards=1,ry(o).immediateRender=Is(o.immediateRender),this.staggerTo(i,s,o,a,c,l,u)},t.staggerFromTo=function(i,s,o,a,c,l,u,d){return a.startAt=o,ry(a).immediateRender=Is(a.immediateRender),this.staggerTo(i,s,a,c,l,u,d)},t.render=function(i,s,o){var h,f,p,g,m,_,y,v,E,w,b,x,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=i<=0?0:Qr(i),d=this._zTime<0!=i<0&&(this._initted||!l);if(this!==Yn&&u>c&&i>=0&&(u=c),u!==this._tTime||o||d){if(a!==this._time&&l&&(u+=this._time-a,i+=this._time-a),h=u,E=this._start,_=!(v=this._ts),d&&(l||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(b=this._yoyo,m=l+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(100*m+i,s,o);if(h=Qr(u%m),u===c?(g=this._repeat,h=l):((g=~~(u/m))&&g===u/m&&(h=l,g--),h>l&&(h=l)),w=Mp(this._tTime,m),!a&&this._tTime&&w!==g&&this._tTime-w*m-this._dur<=0&&(w=g),b&&1&g&&(h=l-h,x=1),g!==w&&!this._lock){var A=b&&1&w,T=A===(b&&1&g);if(g<w&&(A=!A),a=A?0:u%l?l:u,this._lock=1,this.render(a||(x?0:Qr(g*m)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&ro(this,"onRepeat"),this.vars.repeatRefresh&&!x&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,T&&(this._lock=2,this.render(a=A?l:-1e-4,!0),this.vars.repeatRefresh&&!x&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;nq(this,x)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if("isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if("isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,Qr(a),Qr(h)),y&&(u-=h-(h=y._start))),this._tTime=u,this._time=h,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&h&&!s&&!g&&(ro(this,"onStart"),this._tTime!==u))return this;if(h>=a&&i>=0)for(f=this._first;f;){if(p=f._next,(f._act||h>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){y=0,p&&(u+=this._zTime=-wn);break}}f=p}else{f=this._last;for(var C=i<0?i:h;f;){if(p=f._prev,(f._act||C<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(C-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(C-f._start)*f._ts,s,o||Ni&&(f._initted||f._startAt)),h!==this._time||!this._ts&&!_){y=0,p&&(u+=this._zTime=C?-wn:wn);break}}f=p}}if(y&&!s&&(this.pause(),y.render(h>=a?0:-wn)._zTime=h>=a?1:-1,this._ts))return this._start=E,vb(this),this.render(i,s,o);this._onUpdate&&!s&&ro(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(E===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((i||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&Hl(this,1),!s&&(!(i<0)||a)&&(u||a||!c)&&(ro(this,u===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Oc(s)||(s=Do(this,s,i)),!(i instanceof uy)){if(Oi(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Xr(i))return this.addLabel(i,s);if(!ar(i))return this;i=Pr.delayedCall(0,i)}return this!==i?Na(this,i,s):this},t.getChildren=function(i,s,o,a){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Mo);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof Pr?s&&c.push(l):(o&&c.push(l),i&&c.push.apply(c,l.getChildren(!0,s,o)))),l=l._next;return c},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Xr(i)?this.removeLabel(i):ar(i)?this.killTweensOf(i):(_b(this,i),i===this._recent&&(this._recent=this._last),xd(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Qr(io.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Do(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Pr.delayedCall(0,s||ny,o);return a.data="isPause",this._hasPause=1,Na(this,a,Do(this,i))},t.removePause=function(i){var s=this._first;for(i=Do(this,i);s;)s._start===i&&"isPause"===s.data&&Hl(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),c=a.length;c--;)$l!==a[c]&&a[c].kill(i,s);return this},t.getTweensOf=function(i,s){for(var u,o=[],a=No(i),c=this._first,l=Oc(s);c;)c instanceof Pr?xCe(c._targets,a)&&(l?(!$l||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(u=c.getTweensOf(a,s)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(i,s){s=s||{};var f,o=this,a=Do(o,i),l=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,p=Pr.to(o,Po({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||wn,onStart:function(){if(o.pause(),!f){var m=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());p._dur!==m&&Rp(p,m,0,1).render(p._time,!0,!0),f=1}u&&u.apply(p,d||[])}},s));return h?p.render(0):p},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Po({startAt:{time:Do(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return void 0===i&&(i=this._time),K7(this,Do(this,i))},t.previousLabel=function(i){return void 0===i&&(i=this._time),K7(this,Do(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+wn)},t.shiftChildren=function(i,s,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(l in c)c[l]>=o&&(c[l]+=i);return xd(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){void 0===i&&(i=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),xd(this)},t.totalDuration=function(i){var l,u,d,s=0,o=this,a=o._last,c=Mo;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(d=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,Na(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>s&&a._ts&&(s=a._end),a=l;Rp(o,o===Yn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Yn._ts&&(P7(Yn,yb(i,Yn)),A7=io.frame),io.frame>=M7){M7+=eo.autoSleep||120;var s=Yn._first;if((!s||!s._ts)&&eo.autoSleep&&io._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||io.sleep()}}},e}(uy);Po(ss.prototype,{_lock:0,_hasPause:0,_forcing:0});var $l,zP,qCe=function(e,t,r,i,s,o,a){var d,h,f,p,g,m,_,y,c=new As(this._pt,e,t,0,1,uq,null,s),l=0,u=0;for(c.b=r,c.e=i,r+="",(_=~(i+="").indexOf("random("))&&(i=oy(i)),o&&(o(y=[r,i],e,t),r=y[0],i=y[1]),h=r.match(bP)||[];d=bP.exec(i);)p=d[0],g=i.substring(l,d.index),f?f=(f+1)%5:"rgba("===g.substr(-5)&&(f=1),p!==h[u++]&&(m=parseFloat(h[u-1])||0,c._pt={_next:c._pt,p:g||1===u?g:",",s:m,c:"="===p.charAt(1)?Ap(m,p)-m:parseFloat(p)-m,m:f&&f<4?Math.round:0},l=bP.lastIndex);return c.c=l<i.length?i.substring(l,i.length):"",c.fp=a,(b7.test(i)||_)&&(c.e=0),this._pt=c,c},BP=function(e,t,r,i,s,o,a,c,l,u){ar(i)&&(i=i(s||0,e,o));var p,d=e[t],h="get"!==r?r:ar(d)?l?e[t.indexOf("set")||!ar(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,f=ar(d)?l?ZCe:cq:GP;if(Xr(i)&&(~i.indexOf("random(")&&(i=oy(i)),"="===i.charAt(1)&&((p=Ap(h,i)+(ki(h)||0))||0===p)&&(i=p)),!u||h!==i||zP)return isNaN(h*i)||""===i?(!d&&!(t in e)&&IP(t,i),qCe.call(this,e,t,h,i,f,c||eo.stringFilter,l)):(p=new As(this._pt,e,t,+h||0,i-(h||0),"boolean"==typeof d?eAe:lq,0,f),l&&(p.fp=l),a&&p.modifier(a,this,e),this._pt=p)},sq=function(e,t,r,i,s,o){var a,c,l,u;if(no[e]&&!1!==(a=new no[e]).init(s,a.rawVars?t[e]:function(e,t,r,i,s){if(ar(e)&&(e=dy(e,s,t,r,i)),!Da(e)||e.style&&e.nodeType||Oi(e)||w7(e))return Xr(e)?dy(e,s,t,r,i):e;var a,o={};for(a in e)o[a]=dy(e[a],s,t,r,i);return o}(t[e],i,s,o,r),r,i,o)&&(r._pt=c=new As(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Pp))for(l=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)l[a._props[u]]=c;return a},HP=function n(e,t,r){var w,b,x,A,T,C,F,z,Q,N,H,K,$,i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,c=i.lazy,l=i.onUpdate,u=i.runBackwards,d=i.yoyoEase,h=i.keyframes,f=i.autoRevert,p=e._dur,g=e._startAt,m=e._targets,_=e.parent,y=_&&"nested"===_.data?_.vars.targets:m,v="auto"===e._overwrite&&!yP,E=e.timeline;if(E&&(!h||!s)&&(s="none"),e._ease=Sd(s,Ip.ease),e._yEase=d?tq(Sd(!0===d?s:d,Ip.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!E&&!!i.runBackwards,!E||h&&!i.stagger){if(K=(z=m[0]?Td(m[0]).harness:0)&&i[z.prop],w=mb(i,CP),g&&(g._zTime<0&&g.progress(1),t<0&&u&&a&&!f?g.render(-1,!0):g.revert(u&&p?fb:TCe),g._lazy=0),o){if(Hl(e._startAt=Pr.set(m,Po({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!g&&Is(c),startAt:null,delay:0,onUpdate:l&&function(){return ro(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ni||!a&&!f)&&e._startAt.revert(fb),a&&p&&t<=0&&r<=0)return void(t&&(e._zTime=t))}else if(u&&p&&!g)if(t&&(a=!1),x=Po({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Is(c),immediateRender:a,stagger:0,parent:_},w),K&&(x[z.prop]=K),Hl(e._startAt=Pr.set(m,x)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ni?e._startAt.revert(fb):e._startAt.render(-1,!0)),e._zTime=t,a){if(!t)return}else n(e._startAt,wn,wn);for(e._pt=e._ptCache=0,c=p&&Is(c)||c&&!p,b=0;b<m.length;b++){if(F=(T=m[b])._gsap||PP(m)[b]._gsap,e._ptLookup[b]=N={},AP[F.id]&&zl.length&&gb(),H=y===m?b:y.indexOf(T),z&&!1!==(Q=new z).init(T,K||w,e,H,y)&&(e._pt=A=new As(e._pt,T,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(le){N[le]=A}),Q.priority&&(C=1)),!z||K)for(x in w)no[x]&&(Q=sq(x,w,e,H,T,y))?Q.priority&&(C=1):N[x]=A=BP.call(e,T,x,"get",w[x],H,y,0,i.stringFilter);e._op&&e._op[b]&&e.kill(T,e._op[b]),v&&e._pt&&($l=e,Yn.killTweensOf(T,N,e.globalTime(t)),$=!e.parent,$l=0),e._pt&&c&&(AP[F.id]=1)}C&&dq(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!$,h&&t<=0&&E.render(Mo,!0,!0)},QCe=function(e,t,r,i){var o,a,s=t.ease||i||"power1.inOut";if(Oi(t))a=r[e]||(r[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:s})});else for(o in t)a=r[o]||(r[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},dy=function(e,t,r,i,s){return ar(e)?e.call(t,r,i,s):Xr(e)&&~e.indexOf("random(")?oy(e):e},oq=RP+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",aq={};Cs(oq+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return aq[n]=1});var Pr=function(n){function e(r,i,s,o){var a;"number"==typeof i&&(s.duration=i,i=s,s=null);var E,w,b,x,A,T,C,F,c=(a=n.call(this,o?i:ry(i))||this).vars,l=c.duration,u=c.delay,d=c.immediateRender,h=c.stagger,f=c.overwrite,p=c.keyframes,g=c.defaults,m=c.scrollTrigger,_=c.yoyoEase,y=i.parent||Yn,v=(Oi(r)||w7(r)?Oc(r[0]):"length"in i)?[r]:No(r);if(a._targets=v.length?PP(v):ty("GSAP target "+r+" not found. https://gsap.com",!eo.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||h||db(l)||db(u)){if(i=a.vars,(E=a.timeline=new ss({data:"nested",defaults:g||{},targets:y&&"nested"===y.data?y.vars.targets:v})).kill(),E.parent=E._dp=Nc(a),E._start=0,h||db(l)||db(u)){if(x=v.length,C=h&&G7(h),Da(h))for(A in h)~oq.indexOf(A)&&(F||(F={}),F[A]=h[A]);for(w=0;w<x;w++)(b=mb(i,aq)).stagger=0,_&&(b.yoyoEase=_),F&&bd(b,F),T=v[w],b.duration=+dy(l,Nc(a),w,T,v),b.delay=(+dy(u,Nc(a),w,T,v)||0)-a._delay,!h&&1===x&&b.delay&&(a._delay=u=b.delay,a._start+=u,b.delay=0),E.to(T,b,C?C(w,T,v):0),E._ease=Wt.none;E.duration()?l=u=0:a.timeline=0}else if(p){ry(Po(E.vars.defaults,{ease:"none"})),E._ease=Sd(p.ease||i.ease||"none");var Q,N,H,z=0;if(Oi(p))p.forEach(function(K){return E.to(v,K,">")}),E.duration();else{for(A in b={},p)"ease"===A||"easeEach"===A||QCe(A,p[A],b,p.easeEach);for(A in b)for(Q=b[A].sort(function(K,$){return K.t-$.t}),z=0,w=0;w<Q.length;w++)(H={ease:(N=Q[w]).e,duration:(N.t-(w?Q[w-1].t:0))/100*l})[A]=N.v,E.to(v,H,z),z+=H.duration;E.duration()<l&&E.to({},{duration:l-E.duration()})}}l||a.duration(l=E.duration())}else a.timeline=0;return!0===f&&!yP&&($l=Nc(a),Yn.killTweensOf(v),$l=0),Na(y,Nc(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(d||!l&&!p&&a._start===Qr(y._time)&&Is(d)&&ACe(Nc(a))&&"nested"!==y.data)&&(a._tTime=-wn,a.render(Math.max(0,-u)||0)),m&&U7(Nc(a),m),a}v7(e,n);var t=e.prototype;return t.render=function(i,s,o){var h,f,p,g,m,_,y,v,E,a=this._time,c=this._tDur,l=this._dur,u=i<0,d=i>c-wn&&!u?c:i<wn?0:i;if(l){if(d!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,v=this.timeline,this._repeat){if(g=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*g+i,s,o);if(h=Qr(d%g),d===c?(p=this._repeat,h=l):((p=~~(d/g))&&p===Qr(d/g)&&(h=l,p--),h>l&&(h=l)),(_=this._yoyo&&1&p)&&(E=this._yEase,h=l-h),m=Mp(this._tTime,g),h===a&&!o&&this._initted&&p===m)return this._tTime=d,this;p!==m&&(v&&this._yEase&&nq(v,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==l&&this._initted&&(this._lock=o=1,this.render(Qr(g*p),!0).invalidate()._lock=0))}if(!this._initted){if(V7(this,u?i:h,o,s,d))return this._tTime=0,this;if(!(a===this._time||o&&this.vars.repeatRefresh&&p!==m))return this;if(l!==this._dur)return this.render(i,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(E||this._ease)(h/l),this._from&&(this.ratio=y=1-y),h&&!a&&!s&&!p&&(ro(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;v&&v.render(i<0?i:!h&&_?-wn:v._dur*v._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&DP(this,i,0,o),ro(this,"onUpdate")),this._repeat&&p!==m&&this.vars.onRepeat&&!s&&this.parent&&ro(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&DP(this,i,0,!0),(i||!l)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Hl(this,1),!s&&(!u||a)&&(d||a||_)&&(ro(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,r,i){var l,u,d,s=e.ratio,o=t<0||!t&&(!e._start&&MCe(e)&&(e._initted||!NP(e))||(e._ts<0||e._dp._ts<0)&&!NP(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=sy(0,e._tDur,t),u=Mp(c,a),e._yoyo&&1&u&&(o=1-o),u!==Mp(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ni||i||e._zTime===wn||!t&&e._zTime){if(!e._initted&&V7(e,t,i,r,c))return;for(d=e._zTime,e._zTime=t||(r?wn:0),r||(r=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&DP(e,t,0,!0),e._onUpdate&&!r&&ro(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&ro(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Hl(e,1),!r&&!Ni&&(ro(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,i,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,c){ly||io.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||HP(this,l),function(e,t,r,i,s,o,a,c){var u,d,h,f,l=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!l)for(l=e._ptCache[t]=[],h=e._ptLookup,f=e._targets.length;f--;){if((u=h[f][t])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return zP=1,e.vars[t]="+=0",HP(e,a),zP=0,c?ty(t+" not eligible for reset"):1;l.push(u)}for(f=l.length;f--;)(u=(d=l[f])._pt||d).s=!i&&0!==i||s?u.s+(i||0)+o*u.c:i,u.c=r-u.s,d.e&&(d.e=vr(r)+ki(d.e)),d.b&&(d.b=u.s+ki(d.b))}(this,i,s,o,a,this._ease(l/this._dur),l,c)?this.resetTo(i,s,o,a,1):(Eb(this,0),this.parent||k7(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(void 0===s&&(s="all"),!(i||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?ay(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,$l&&!0!==$l.vars.overwrite)._first||ay(this),this.parent&&o!==this.timeline.totalDuration()&&Rp(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,p,g,m,_,a=this._targets,c=i?No(i):a,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0}(a,c))return"all"===s&&(this._pt=0),ay(this);for(d=this._op=this._op||[],"all"!==s&&(Xr(s)&&(g={},Cs(s,function(y){return g[y]=1}),s=g),s=function(e,t){var s,o,a,c,r=e[0]?Td(e[0]).harness:0,i=r&&r.aliases;if(!i)return t;for(o in s=bd({},t),i)if(o in s)for(a=(c=i[o].split(",")).length;a--;)s[c[a]]=s[o];return s}(a,s)),_=a.length;_--;)if(~c.indexOf(a[_]))for(g in h=l[_],"all"===s?(d[_]=s,p=h,f={}):(f=d[_]=d[_]||{},p=s),p)(m=h&&h[g])&&((!("kill"in m.d)||!0===m.d.kill(g))&&_b(this,m,"_pt"),delete h[g]),"all"!==f&&(f[g]=1);return this._initted&&!this._pt&&u&&ay(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return iy(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return iy(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Yn.killTweensOf(i,s,o)},e}(uy);Po(Pr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Cs("staggerTo,staggerFrom,staggerFromTo",function(n){Pr[n]=function(){var e=new ss,t=OP.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var GP=function(e,t,r){return e[t]=r},cq=function(e,t,r){return e[t](r)},ZCe=function(e,t,r,i){return e[t](i.fp,r)},JCe=function(e,t,r){return e.setAttribute(t,r)},WP=function(e,t){return ar(e[t])?cq:EP(e[t])&&e.setAttribute?JCe:GP},lq=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},eAe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},uq=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round(1e4*(r.s+r.c*e))/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},$P=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},tAe=function(e,t,r,i){for(var o,s=this._pt;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},nAe=function(e){for(var r,i,t=this._pt;t;)i=t._next,t.p===e&&!t.op||t.op===e?_b(this,t,"_pt"):t.dep||(r=1),t=i;return!r},rAe=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},dq=function(e){for(var r,i,s,o,t=e._pt;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},As=function(){function n(t,r,i,s,o,a,c,l,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||lq,this.d=c||this,this.set=l||GP,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=rAe,this.m=r,this.mt=s,this.tween=i},n}();Cs(RP+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return CP[n]=1}),to.TweenMax=to.TweenLite=Pr,to.TimelineLite=to.TimelineMax=ss,Yn=new ss({sortChildren:!1,defaults:Ip,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),eo.stringFilter=eq;var Cd=[],wb={},iAe=[],hq=0,sAe=0,jP=function(e){return(wb[e]||iAe).map(function(t){return t()})},qP=function(){var e=Date.now(),t=[];e-hq>2&&(jP("matchMediaInit"),Cd.forEach(function(r){var o,a,c,l,i=r.queries,s=r.conditions;for(a in i)(o=Ro.matchMedia(i[a]).matches)&&(c=1),o!==s[a]&&(s[a]=o,l=1);l&&(r.revert(),c&&t.push(r))}),jP("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),hq=e,jP("matchMedia"))},fq=function(){function n(t,r){this.selector=r&&kP(r),this.data=[],this._r=[],this.isReverted=!1,this.id=sAe++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){ar(r)&&(s=i,i=r,r=ar);var o=this,a=function(){var d,l=or,u=o.selector;return l&&l!==o&&l.data.push(o),s&&(o.selector=kP(s)),or=o,d=i.apply(o,arguments),ar(d)&&o._r.push(d),or=l,o.selector=u,o.isReverted=!1,d};return o.last=a,r===ar?a(o,function(c){return o.add(null,c)}):r?o[r]=a:a},e.ignore=function(r){var i=or;or=null,r(this),or=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Pr&&!(i.parent&&"nested"===i.parent.data)&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var l,a=s.getTweens(),c=s.data.length;c--;)"isFlip"===(l=s.data[c]).data&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),c=s.data.length;c--;)(l=s.data[c])instanceof ss?"nested"!==l.data&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof Pr)&&l.revert&&l.revert(r);s._r.forEach(function(u){return u(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Cd.length;o--;)Cd[o].id===this.id&&Cd.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),oAe=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Da(r)||(r={matches:r});var c,l,u,o=new fq(0,s||this.scope),a=o.conditions={};for(l in or&&!o.selector&&(o.selector=or.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r,r)"all"===l?u=1:(c=Ro.matchMedia(r[l]))&&(Cd.indexOf(o)<0&&Cd.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(qP):c.addEventListener("change",qP));return u&&i(o,function(d){return o.add(null,d)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Tb={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return X7(i)})},timeline:function(e){return new ss(e)},getTweensOf:function(e,t){return Yn.getTweensOf(e,t)},getProperty:function(e,t,r,i){Xr(e)&&(e=No(e)[0]);var s=Td(e||{}).get,o=r?N7:D7;return"native"===r&&(r=""),e&&(t?o((no[t]&&no[t].get||s)(e,t,r,i)):function(a,c,l){return o((no[a]&&no[a].get||s)(e,a,c,l))})},quickSetter:function(e,t,r){if((e=No(e)).length>1){var i=e.map(function(u){return Ms.quickSetter(u,t,r)}),s=i.length;return function(u){for(var d=s;d--;)i[d](u)}}var o=no[t],a=Td(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var d=new o;Pp._pt=0,d.init(e,r?u+r:u,Pp,0,[e]),d.render(1,d),Pp._pt&&$P(1,Pp)}:a.set(e,c);return o?l:function(u){return l(e,c,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=Ms.to(e,bd(((i={})[t]="+=0.1",i.paused=!0,i),r||{})),o=function(c,l,u){return s.resetTo(t,c,l,u)};return o.tween=s,o},isTweening:function(e){return Yn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Sd(e.ease,Ip.ease)),O7(Ip,e||{})},config:function(e){return O7(eo,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!no[a]&&!to[a]&&ty(t+" effect requires "+a+" plugin.")}),MP[t]=function(a,c,l){return r(No(a),Po(c||{},s),l)},o&&(ss.prototype[t]=function(a,c,l){return this.add(MP[t](a,Da(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){Wt[e]=Sd(t)},parseEase:function(e,t){return arguments.length?Sd(e,t):Wt},getById:function(e){return Yn.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var i,s,r=new ss(e);for(r.smoothChildTiming=Is(e.smoothChildTiming),Yn.remove(r),r._dp=0,r._time=r._tTime=Yn._time,i=Yn._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Pr&&i.vars.onComplete===i._targets[0]))&&Na(r,i,i._start-i._delay),i=s;return Na(Yn,r,0),r},context:function(e,t){return e?new fq(e,t):or},matchMedia:function(e){return new oAe(e)},matchMediaRefresh:function(){return Cd.forEach(function(e){var r,i,t=e.conditions;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||qP()},addEventListener:function(e,t){var r=wb[e]||(wb[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=wb[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:function n(e,t,r){var i=t-e;return Oi(e)?j7(e,n(0,e.length),t):Gl(r,function(s){return(i+(s-e)%i)%i+e})},wrapYoyo:function n(e,t,r){var i=t-e,s=2*i;return Oi(e)?j7(e,n(0,e.length-1),t):Gl(r,function(o){return e+((o=(s+(o-e)%s)%s||0)>i?s-o:o)})},distribute:G7,random:$7,snap:W7,normalize:function(e,t,r){return q7(e,t,0,1,r)},getUnit:ki,clamp:function(e,t,r){return Gl(r,function(i){return sy(e,t,i)})},splitColor:Q7,toArray:No,selector:kP,mapRange:q7,pipe:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},unitize:function(e,t){return function(r){return e(parseFloat(r))+(t||ki(r))}},interpolate:function n(e,t,r,i){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var c,l,u,d,h,o=Xr(e),a={};if(!0===r&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Oi(e)&&!Oi(t)){for(u=[],h=(d=e.length)-2,l=1;l<d;l++)u.push(n(e[l-1],e[l]));d--,s=function(p){p*=d;var g=Math.min(h,~~p);return u[g](p-g)},r=t}else i||(e=bd(Oi(e)?[]:{},e));if(!u){for(c in t)BP.call(a,e,c,"get",t[c]);s=function(p){return $P(p,a)||(o?e.p:e)}}}return Gl(r,s)},shuffle:H7},install:I7,effects:MP,ticker:io,updateRoot:ss.updateRoot,plugins:no,globalTimeline:Yn,core:{PropTween:As,globals:C7,Tween:Pr,Timeline:ss,Animation:uy,getCache:Td,_removeLinkedListItem:_b,reverting:function(){return Ni},context:function(e){return e&&or&&(or.data.push(e),e._ctx=or),or},suppressOverwrites:function(e){return yP=e}}};Cs("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Tb[n]=Pr[n]}),io.add(ss.updateRoot),Pp=Tb.to({},{duration:0});var aAe=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},KP=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var c,l;if(Xr(s)&&(c={},Cs(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var i,s,o,r=e._targets;for(i in t)for(s=r.length;s--;)(o=e._ptLookup[s][i])&&(o=o.d)&&(o._pt&&(o=aAe(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))}(a,s)}}}},Ms=Tb.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,c;for(o in this.tween=r,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],i,s,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Ni?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},KP("roundProps",LP),KP("modifiers"),KP("snap",W7))||Tb;Pr.version=ss.version=Ms.version="3.12.3",S7=1,wP()&&Dp();var pq,jl,Np,YP,Ad,gq,XP,wq,kc={},Md=180/Math.PI,Op=Math.PI/180,kp=Math.atan2,mq=1e8,QP=/([A-Z])/g,dAe=/(left|right|width|margin|padding|x)/i,hAe=/[\s,\(]\S/,Oa={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ZP=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},fAe=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},pAe=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},gAe=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},_q=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},yq=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},mAe=function(e,t,r){return e.style[t]=r},_Ae=function(e,t,r){return e.style.setProperty(t,r)},yAe=function(e,t,r){return e._gsap[t]=r},vAe=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},EAe=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},wAe=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Xn="transform",Rs=Xn+"Origin",TAe=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in kc&&s){if(this.tfm=this.tfm||{},"transform"===e)return Oa.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(~(e=Oa[e]||e).indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=Lc(i,a)}):this.tfm[e]=o.x?o[e]:Lc(i,e),e===Rs&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(Xn)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Rs,t,"")),e=Xn}(s||t)&&this.props.push(e,t,s[e])},vq=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},bAe=function(){var s,o,e=this.props,t=this.target,r=t.style,i=t._gsap;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty("--"===e[s].substr(0,2)?e[s]:e[s].replace(QP,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(!(s=XP())||!s.isStart)&&!r[Xn]&&(vq(r),i.zOrigin&&r[Rs]&&(r[Rs]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},Eq=function(e,t){var r={target:e,props:[],revert:bAe,save:TAe};return e._gsap||Ms.core.getCache(e),t&&t.split(",").forEach(function(i){return r.save(i)}),r},JP=function(e,t){var r=jl.createElementNS?jl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):jl.createElement(e);return r&&r.style?r:jl.createElement(e)},ka=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(QP,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Lp(t)||t,1)||""},Tq="O,Moz,ms,Ms,Webkit".split(","),Lp=function(e,t,r){var s=(t||Ad).style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Tq[o]+e in s););return o<0?null:(3===o?"ms":o>=0?Tq[o]:"")+e},eD=function(){typeof window<"u"&&window.document&&(pq=window,Np=(jl=pq.document).documentElement,Ad=JP("div")||{style:{}},JP("div"),Xn=Lp(Xn),Rs=Xn+"Origin",Ad.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",wq=!!Lp("perspective"),XP=Ms.core.reverting,YP=1)},tD=function n(e){var o,t=JP("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText;if(Np.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Np.removeChild(t),this.style.cssText=s,o},bq=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},xq=function(e){var t;try{t=e.getBBox()}catch{t=tD.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===tD||(t=tD.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+bq(e,["x","cx","x1"])||0,y:+bq(e,["y","cy","y1"])||0,width:0,height:0}},Sq=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!xq(e))},Rd=function(e,t){if(t){var i,r=e.style;t in kc&&t!==Rs&&(t=Xn),r.removeProperty?(("ms"===(i=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),r.removeProperty("--"===i?t:t.replace(QP,"-$1").toLowerCase())):r.removeAttribute(t)}},ql=function(e,t,r,i,s,o){var a=new As(e._pt,t,r,0,1,o?yq:_q);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},Iq={deg:1,rad:1,turn:1},xAe={grid:1,flex:1},Kl=function n(e,t,r,i){var p,g,m,_,s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Ad.style,c=dAe.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),d=100,h="px"===i,f="%"===i;if(i===o||!s||Iq[i]||Iq[o])return s;if("px"!==o&&!h&&(s=n(e,t,r,"px")),_=e.getCTM&&Sq(e),(f||"%"===o)&&(kc[t]||~t.indexOf("adius")))return p=_?e.getBBox()[c?"width":"height"]:e[u],vr(f?s/p*d:s/100*p);if(a[c?"width":"height"]=d+(h?o:i),g=~t.indexOf("adius")||"em"===i&&e.appendChild&&!l?e:e.parentNode,_&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===jl||!g.appendChild)&&(g=jl.body),(m=g._gsap)&&f&&m.width&&c&&m.time===io.time&&!m.uncache)return vr(s/m.width*d);if(!f||"height"!==t&&"width"!==t)(f||"%"===o)&&!xAe[ka(g,"display")]&&(a.position=ka(e,"position")),g===e&&(a.position="static"),g.appendChild(Ad),p=Ad[u],g.removeChild(Ad),a.position="absolute";else{var y=e.style[t];e.style[t]=d+i,p=e[u],y?e.style[t]=y:Rd(e,t)}return c&&f&&((m=Td(g)).time=io.time,m.width=g[u]),vr(h?p*s/d:p&&s?d/p*s:0)},Lc=function(e,t,r,i){var s;return YP||eD(),t in Oa&&"transform"!==t&&~(t=Oa[t]).indexOf(",")&&(t=t.split(",")[0]),kc[t]&&"transform"!==t?(s=fy(e,i),s="transformOrigin"!==t?s[t]:s.svg?s.origin:xb(ka(e,Rs))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||i||~(s+"").indexOf("calc("))&&(s=bb[t]&&bb[t](e,t,r)||ka(e,t)||R7(e,t)||("opacity"===t?1:0)),r&&!~(s+"").trim().indexOf(" ")?Kl(e,t,s,r)+r:s},SAe=function(e,t,r,i){if(!r||"none"===r){var s=Lp(t,e,1),o=s&&ka(e,s,1);o&&o!==r?(t=s,r=o):"borderColor"===t&&(r=ka(e,"borderTopColor"))}var u,d,h,f,p,g,m,_,y,v,E,a=new As(this._pt,e.style,t,0,1,uq),c=0,l=0;if(a.b=r,a.e=i,r+="","auto"==(i+="")&&(g=e.style[t],e.style[t]=i,i=ka(e,t)||i,g?e.style[t]=g:Rd(e,t)),eq(u=[r,i]),i=u[1],h=(r=u[0]).match(Cp)||[],(i.match(Cp)||[]).length){for(;d=Cp.exec(i);)m=d[0],y=i.substring(c,d.index),p?p=(p+1)%5:("rgba("===y.substr(-5)||"hsla("===y.substr(-5))&&(p=1),m!==(g=h[l++]||"")&&(f=parseFloat(g)||0,E=g.substr((f+"").length),"="===m.charAt(1)&&(m=Ap(f,m)+E),_=parseFloat(m),v=m.substr((_+"").length),c=Cp.lastIndex-v.length,v||(v=v||eo.units[t]||E,c===i.length&&(i+=v,a.e+=v)),E!==v&&(f=Kl(e,t,g,v)||0),a._pt={_next:a._pt,p:y||1===l?y:",",s:f,c:_-f,m:p&&p<4||"zIndex"===t?Math.round:0});a.c=c<i.length?i.substring(c,i.length):""}else a.r="display"===t&&"none"===i?yq:_q;return b7.test(i)&&(a.e=0),this._pt=a,a},Cq={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},IAe=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return("top"===r||"bottom"===r||"left"===i||"right"===i)&&(e=r,r=i,i=e),t[0]=Cq[r]||r,t[1]=Cq[i]||i,t.join(" ")},CAe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,r=t.t,i=r.style,s=t.u,o=r._gsap;if("all"===s||!0===s)i.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)kc[a=s[l]]&&(c=1,a="transformOrigin"===a?Rs:Xn),Rd(r,a);c&&(Rd(r,Xn),o&&(o.svg&&r.removeAttribute("transform"),fy(r,1),o.uncache=1,vq(i)))}},bb={clearProps:function(e,t,r,i,s){if("isFromStart"!==s.data){var o=e._pt=new As(e._pt,t,r,0,0,CAe);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},hy=[1,0,0,1,0,0],Aq={},Mq=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},Rq=function(e){var t=ka(e,Xn);return Mq(t)?hy:t.substr(7).match(T7).map(vr)},nD=function(e,t){var o,a,c,l,r=e._gsap||Td(e),i=e.style,s=Rq(e);return r.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?hy:s:(s===hy&&!e.offsetParent&&e!==Np&&!r.svg&&(c=i.display,i.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,Np.appendChild(e)),s=Rq(e),c?i.display=c:Rd(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):Np.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},rD=function(e,t,r,i,s,o){var b,x,T,a=e._gsap,c=s||nD(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=c[0],p=c[1],g=c[2],m=c[3],_=c[4],y=c[5],v=t.split(" "),E=parseFloat(v[0])||0,w=parseFloat(v[1])||0;r?c!==hy&&(x=f*m-p*g)&&(T=E*(-p/x)+w*(f/x)-(f*y-p*_)/x,E=E*(m/x)+w*(-g/x)+(g*y-m*_)/x,w=T):(E=(b=xq(e)).x+(~v[0].indexOf("%")?E/100*b.width:E),w=b.y+(~(v[1]||v[0]).indexOf("%")?w/100*b.height:w),!("xOrigin"in a)&&(E||w)&&(E-=b.x,w-=b.y)),i||!1!==i&&a.smooth?(a.xOffset=d+((_=E-l)*f+(y=w-u)*g)-_,a.yOffset=h+(_*p+y*m)-y):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=w,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[Rs]="0px 0px",o&&(ql(o,a,"xOrigin",l,E),ql(o,a,"yOrigin",u,w),ql(o,a,"xOffset",d,a.xOffset),ql(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+w)},fy=function(e,t){var r=e._gsap||new iq(e);if("x"in r&&!t&&!r.uncache)return r;var u,d,h,f,p,g,m,_,y,v,E,w,b,x,A,T,C,F,z,Q,N,H,K,$,le,X,re,ce,Ce,Z,ne,he,i=e.style,s=r.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=ka(e,Rs)||"0";return u=d=h=g=m=_=y=v=E=0,f=p=1,r.svg=!(!e.getCTM||!Sq(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(i[Xn]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+("none"!==c[Xn]?c[Xn]:"")),i.scale=i.rotate=i.translate="none"),x=nD(e,r.svg),r.svg&&(r.uncache?(le=e.getBBox(),l=r.xOrigin-le.x+"px "+(r.yOrigin-le.y)+"px",$=""):$=!t&&e.getAttribute("data-svg-origin"),rD(e,$||l,!!$||r.originIsAbsolute,!1!==r.smooth,x)),w=r.xOrigin||0,b=r.yOrigin||0,x!==hy&&(F=x[0],z=x[1],Q=x[2],N=x[3],u=H=x[4],d=K=x[5],6===x.length?(f=Math.sqrt(F*F+z*z),p=Math.sqrt(N*N+Q*Q),g=F||z?kp(z,F)*Md:0,(y=Q||N?kp(Q,N)*Md+g:0)&&(p*=Math.abs(Math.cos(y*Op))),r.svg&&(u-=w-(w*F+b*Q),d-=b-(w*z+b*N))):(Z=x[7],re=x[8],ce=x[9],ne=x[11],u=x[12],d=x[13],h=x[14],m=(A=kp(he=x[6],Ce=x[10]))*Md,A&&($=H*(T=Math.cos(-A))+re*(C=Math.sin(-A)),le=K*T+ce*C,X=he*T+Ce*C,re=H*-C+re*T,ce=K*-C+ce*T,Ce=he*-C+Ce*T,ne=Z*-C+ne*T,H=$,K=le,he=X),_=(A=kp(-Q,Ce))*Md,A&&(T=Math.cos(-A),ne=N*(C=Math.sin(-A))+ne*T,F=$=F*T-re*C,z=le=z*T-ce*C,Q=X=Q*T-Ce*C),g=(A=kp(z,F))*Md,A&&($=F*(T=Math.cos(A))+z*(C=Math.sin(A)),le=H*T+K*C,z=z*T-F*C,K=K*T-H*C,F=$,H=le),m&&Math.abs(m)+Math.abs(g)>359.9&&(m=g=0,_=180-_),f=vr(Math.sqrt(F*F+z*z+Q*Q)),p=vr(Math.sqrt(K*K+he*he)),A=kp(H,K),y=Math.abs(A)>2e-4?A*Md:0,E=ne?1/(ne<0?-ne:ne):0),r.svg&&($=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Mq(ka(e,Xn)),$&&e.setAttribute("transform",$))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(f*=-1,y+=g<=0?180:-180,g+=g<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=d-((r.yPercent=d&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=h+o,r.scaleX=vr(f),r.scaleY=vr(p),r.rotation=vr(g)+a,r.rotationX=vr(m)+a,r.rotationY=vr(_)+a,r.skewX=y+a,r.skewY=v+a,r.transformPerspective=E+o,(r.zOrigin=parseFloat(l.split(" ")[2])||!t&&r.zOrigin||0)&&(i[Rs]=xb(l)),r.svg||(r.xOffset=r.yOffset=0),r.force3D=eo.force3D,r.renderTransform=r.svg?MAe:wq?Pq:AAe,r.uncache=0,r},xb=function(e){return(e=e.split(" "))[0]+" "+e[1]},iD=function(e,t,r){var i=ki(t);return vr(parseFloat(t)+parseFloat(Kl(e,"x",r+"px",i)))+i},AAe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Pq(e,t)},Pd="0deg",py="0px",Dd=") ",Pq=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,c=r.z,l=r.rotation,u=r.rotationY,d=r.rotationX,h=r.skewX,f=r.skewY,p=r.scaleX,g=r.scaleY,m=r.transformPerspective,_=r.force3D,y=r.target,v=r.zOrigin,E="",w="auto"===_&&e&&1!==e||!0===_;if(v&&(d!==Pd||u!==Pd)){var T,b=parseFloat(u)*Op,x=Math.sin(b),A=Math.cos(b);b=parseFloat(d)*Op,T=Math.cos(b),o=iD(y,o,x*T*-v),a=iD(y,a,-Math.sin(b)*-v),c=iD(y,c,A*T*-v+v)}m!==py&&(E+="perspective("+m+Dd),(i||s)&&(E+="translate("+i+"%, "+s+"%) "),(w||o!==py||a!==py||c!==py)&&(E+=c!==py||w?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+Dd),l!==Pd&&(E+="rotate("+l+Dd),u!==Pd&&(E+="rotateY("+u+Dd),d!==Pd&&(E+="rotateX("+d+Dd),(h!==Pd||f!==Pd)&&(E+="skew("+h+", "+f+Dd),(1!==p||1!==g)&&(E+="scale("+p+", "+g+Dd),y.style[Xn]=E||"translate(0, 0)"},MAe=function(e,t){var w,b,x,A,T,r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,c=r.rotation,l=r.skewX,u=r.skewY,d=r.scaleX,h=r.scaleY,f=r.target,p=r.xOrigin,g=r.yOrigin,m=r.xOffset,_=r.yOffset,y=r.forceCSS,v=parseFloat(o),E=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=Op,l*=Op,w=Math.cos(c)*d,b=Math.sin(c)*d,x=Math.sin(c-l)*-h,A=Math.cos(c-l)*h,l&&(u*=Op,T=Math.tan(l-u),x*=T=Math.sqrt(1+T*T),A*=T,u&&(T=Math.tan(u),w*=T=Math.sqrt(1+T*T),b*=T)),w=vr(w),b=vr(b),x=vr(x),A=vr(A)):(w=d,A=h,b=x=0),(v&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(v=Kl(f,"x",o,"px"),E=Kl(f,"y",a,"px")),(p||g||m||_)&&(v=vr(v+p-(p*w+g*x)+m),E=vr(E+g-(p*b+g*A)+_)),(i||s)&&(T=f.getBBox(),v=vr(v+i/100*T.width),E=vr(E+s/100*T.height)),f.setAttribute("transform",T="matrix("+w+","+b+","+x+","+A+","+v+","+E+")"),y&&(f.style[Xn]=T)},RAe=function(e,t,r,i,s){var d,h,o=360,a=Xr(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Md:1)-i,u=i+l+"deg";return a&&("short"===(d=s.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===d&&l<0?l=(l+o*mq)%o-~~(l/o)*o:"ccw"===d&&l>0&&(l=(l-o*mq)%o-~~(l/o)*o)),e._pt=h=new As(e._pt,t,r,i,l,fAe),h.e=u,h.u="deg",e._props.push(r),h},Dq=function(e,t){for(var r in t)e[r]=t[r];return e},PAe=function(e,t,r){var a,c,l,u,d,h,p,i=Dq({},r._gsap),o=r.style;for(c in i.svg?(l=r.getAttribute("transform"),r.setAttribute("transform",""),o[Xn]=t,a=fy(r,1),Rd(r,Xn),r.setAttribute("transform",l)):(l=getComputedStyle(r)[Xn],o[Xn]=t,a=fy(r,1),o[Xn]=l),kc)(l=i[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(d=ki(l)!==(p=ki(u))?Kl(r,c,l,p):parseFloat(l),h=parseFloat(u),e._pt=new As(e._pt,a,c,d,h-d,ZP),e._pt.u=p||0,e._props.push(c));Dq(a,i)};Cs("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});bb[e>1?"border"+n:n]=function(a,c,l,u,d){var h,f;if(arguments.length<4)return h=o.map(function(p){return Lc(a,p,l)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(p,g){return f[p]=h[g]=h[g]||h[(g-1)/2|0]}),a.init(c,f,d)}});var Nq={name:"css",register:eD,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var l,u,d,h,f,p,g,m,_,y,v,E,w,b,x,A,o=this._props,a=e.style,c=r.vars.startAt;for(g in YP||eD(),this.styles=this.styles||Eq(e),A=this.styles.props,this.tween=r,t)if("autoRound"!==g&&(u=t[g],!no[g]||!sq(g,t,r,i,e,s)))if(p=bb[g],"function"==(f=typeof u)&&(f=typeof(u=u.call(r,i,e,s))),"string"===f&&~u.indexOf("random(")&&(u=oy(u)),p)p(this,e,g,u,r)&&(x=1);else if("--"===g.substr(0,2))l=(getComputedStyle(e).getPropertyValue(g)+"").trim(),u+="",Wl.lastIndex=0,Wl.test(l)||(m=ki(l),_=ki(u)),_?m!==_&&(l=Kl(e,g,l,_)+_):m&&(u+=m),this.add(a,"setProperty",l,u,i,s,0,0,g),o.push(g),A.push(g,0,a[g]);else if("undefined"!==f){if(c&&g in c?(l="function"==typeof c[g]?c[g].call(r,i,e,s):c[g],Xr(l)&&~l.indexOf("random(")&&(l=oy(l)),ki(l+"")||"auto"===l||(l+=eo.units[g]||ki(Lc(e,g))||""),"="===(l+"").charAt(1)&&(l=Lc(e,g))):l=Lc(e,g),h=parseFloat(l),(y="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),g in Oa&&("autoAlpha"===g&&(1===h&&"hidden"===Lc(e,"visibility")&&d&&(h=0),A.push("visibility",0,a.visibility),ql(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==g&&"transform"!==g&&~(g=Oa[g]).indexOf(",")&&(g=g.split(",")[0])),v=g in kc)if(this.styles.save(g),E||((w=e._gsap).renderTransform&&!t.parseTransform||fy(e,t.parseTransform),b=!1!==t.smoothOrigin&&w.smooth,(E=this._pt=new As(this._pt,a,Xn,0,1,w.renderTransform,w,0,-1)).dep=1),"scale"===g)this._pt=new As(this._pt,w,"scaleY",w.scaleY,(y?Ap(w.scaleY,y+d):d)-w.scaleY||0,ZP),this._pt.u=0,o.push("scaleY",g),g+="X";else{if("transformOrigin"===g){A.push(Rs,0,a[Rs]),u=IAe(u),w.svg?rD(e,u,0,b,0,this):((_=parseFloat(u.split(" ")[2])||0)!==w.zOrigin&&ql(this,w,"zOrigin",w.zOrigin,_),ql(this,a,g,xb(l),xb(u)));continue}if("svgOrigin"===g){rD(e,u,1,b,0,this);continue}if(g in Aq){RAe(this,w,g,h,y?Ap(h,y+u):u);continue}if("smoothOrigin"===g){ql(this,w,"smooth",w.smooth,u);continue}if("force3D"===g){w[g]=u;continue}if("transform"===g){PAe(this,u,e);continue}}else g in a||(g=Lp(g)||g);if(v||(d||0===d)&&(h||0===h)&&!hAe.test(u)&&g in a)d||(d=0),(m=(l+"").substr((h+"").length))!==(_=ki(u)||(g in eo.units?eo.units[g]:m))&&(h=Kl(e,g,l,_)),this._pt=new As(this._pt,v?w:a,g,h,(y?Ap(h,y+d):d)-h,v||"px"!==_&&"zIndex"!==g||!1===t.autoRound?ZP:gAe),this._pt.u=_||0,m!==_&&"%"!==_&&(this._pt.b=l,this._pt.r=pAe);else if(g in a)SAe.call(this,e,g,l,y?y+u:u);else if(g in e)this.add(e,g,l||e[g],y?y+u:u,i,s);else if("parseTransform"!==g){IP(g,u);continue}v||(g in a?A.push(g,0,a[g]):A.push(g,1,l||e[g])),o.push(g)}x&&dq(this)},render:function(e,t){if(t.tween._time||!XP())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Lc,aliases:Oa,getSetter:function(e,t,r){var i=Oa[t];return i&&i.indexOf(",")<0&&(t=i),t in kc&&t!==Rs&&(e._gsap.x||Lc(e,"x"))?r&&gq===r?"scale"===t?vAe:yAe:(gq=r||{})&&("scale"===t?EAe:wAe):e.style&&!EP(e.style[t])?mAe:~t.indexOf("-")?_Ae:WP(e,t)},core:{_removeProperty:Rd,_getMatrix:nD}};Ms.utils.checkPrefix=Lp,Ms.core.getStyleSaver=Eq,function(n,e,t,r){var i=Cs(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){kc[s]=1});Cs(e,function(s){eo.units[s]="deg",Aq[s]=1}),Oa[i[13]]=n+","+e,Cs("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Oa[o[1]]=i[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Cs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){eo.units[n]="px"}),Ms.registerPlugin(Nq);var cr=Ms.registerPlugin(Nq)||Ms;const fe=function(n,e){if(!n)throw Fp(e)},Fp=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},Oq=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0;let h=(15&a)<<2|l>>6,f=63&l;c||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Oq(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==d)throw new NAe;r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kq=function(n){const e=Oq(n);return Sb.encodeByteArray(e,!0)},Ib=function(n){return kq(n).replace(/\./g,"")},Cb=function(n){try{return Sb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OAe(n){return Lq(void 0,n)}function Lq(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!kAe(t)||(n[t]=Lq(n[t],e[t]));return n}function kAe(n){return"__proto__"!==n}function Fq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ab=()=>{try{return Fq().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cb(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},Uq=n=>{var e,t;return null===(t=null===(e=Ab())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},Mb=n=>{const e=Uq(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vq=()=>{var n;return null===(n=Ab())||void 0===n?void 0:n.config},Bq=n=>{var e;return null===(e=Ab())||void 0===e?void 0:e[`_${n}`]};class Fc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function oD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ib(JSON.stringify({alg:"none",type:"JWT"})),Ib(JSON.stringify(o)),""].join(".")}function Zr(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function aD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zr())}function cD(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function zq(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Vc(){try{return"object"==typeof indexedDB}catch{return!1}}function Up(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function Rb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class so extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,so.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function HAe(n,e){return n.replace(GAe,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new so(i,`${this.serviceName}: ${o} (${i}).`,r)}}const GAe=/\{\$([^}]+)}/g;function gy(n){return JSON.parse(n)}function Jr(n){return JSON.stringify(n)}const Pb=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=gy(Cb(s[0])||""),t=gy(Cb(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Bc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Vp(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function lD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Db(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function my(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(Hq(s)&&Hq(o)){if(!my(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Hq(n){return null!==n&&"object"==typeof n}function _y(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yy(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function vy(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class jAe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let l,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class KAe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function YAe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=uD),void 0===i.error&&(i.error=uD),void 0===i.complete&&(i.complete=uD);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uD(){}function Bp(n,e){return`${n} failed: ${e} argument `}const Nb=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e},QAe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})},ZAe=1e3,JAe=2,eMe=144e5,tMe=.5;function Ob(n,e=ZAe,t=JAe){const r=e*Math.pow(t,n),i=Math.round(tMe*r*(Math.random()-.5)*2);return Math.min(eMe,r+i)}function Ln(n){return n&&n._delegate?n._delegate:n}class Dr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Nd="[DEFAULT]";class rMe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Fc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function sMe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Nd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return O(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Nd){return this.instances.has(e)}getOptions(e=Nd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iMe(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nd){return this.component?this.component.multipleInstances?e:Nd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function iMe(n){return n===Nd?void 0:n}class oMe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rMe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dD=[];var Xt=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Xt||{});const Gq={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},aMe=Xt.INFO,cMe={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},lMe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=cMe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Yl{constructor(e){this.name=e,this._logLevel=aMe,this._logHandler=lMe,this._userLogHandler=null,dD.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Gq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const uMe=(n,e)=>e.some(t=>n instanceof t);let Wq,$q;const jq=new WeakMap,hD=new WeakMap,qq=new WeakMap,fD=new WeakMap,pD=new WeakMap;let gD={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return hD.get(n);if("objectStoreNames"===e)return n.objectStoreNames||qq.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zc(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function _Me(n){return"function"==typeof n?function mMe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hMe(){return $q||($q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(mD(this),e),zc(jq.get(this))}:function(...e){return zc(n.apply(mD(this),e))}:function(e,...t){const r=n.call(mD(this),e,...t);return qq.set(r,e.sort?e.sort():[e]),zc(r)}}(n):(n instanceof IDBTransaction&&function pMe(n){if(hD.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});hD.set(n,e)}(n),uMe(n,function dMe(){return Wq||(Wq=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,gD):n)}function zc(n){if(n instanceof IDBRequest)return function fMe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(zc(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&jq.set(t,n)}).catch(()=>{}),pD.set(e,n),e}(n);if(fD.has(n))return fD.get(n);const e=_Me(n);return e!==n&&(fD.set(n,e),pD.set(e,n)),e}const mD=n=>pD.get(n);function _D(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=zc(o);return r&&o.addEventListener("upgradeneeded",c=>{r(zc(o.result),c.oldVersion,c.newVersion,zc(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function yD(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),zc(t).then(()=>{})}const yMe=["get","getKey","getAll","getAllKeys","count"],vMe=["put","add","delete","clear"],vD=new Map;function Kq(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(vD.get(e))return vD.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=vMe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!yMe.includes(t))return;const s=function(){var o=O(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return vD.set(e,s),s}!function gMe(n){gD=n(gD)}(n=>({...n,get:(e,t,r)=>Kq(e,t)||n.get(e,t,r),has:(e,t)=>!!Kq(e,t)||n.has(e,t)}));class EMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function wMe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const ED="@firebase/app",Od=new Yl("@firebase/app"),kb="[DEFAULT]",qMe={[ED]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},kd=new Map,Lb=new Map;function KMe(n,e){try{n.container.addComponent(e)}catch(t){Od.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hr(n){const e=n.name;if(Lb.has(e))return Od.debug(`There were multiple attempts to register component ${e}.`),!1;Lb.set(e,n);for(const t of kd.values())KMe(t,n);return!0}function Li(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Hc=new Jo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class XMe{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hc.create("app-deleted",{appName:this._name})}}const Gc="10.7.0";function Xq(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:kb,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Hc.create("bad-app-name",{appName:String(i)});if(t||(t=Vq()),!t)throw Hc.create("no-options");const s=kd.get(i);if(s){if(my(t,s.options)&&my(r,s.config))return s;throw Hc.create("duplicate-app",{appName:i})}const o=new oMe(i);for(const c of Lb.values())o.addComponent(c);const a=new XMe(t,r,o);return kd.set(i,a),a}function ea(n=kb){const e=kd.get(n);if(!e&&n===kb&&Vq())return Xq();if(!e)throw Hc.create("no-app",{appName:n});return e}function Qq(){return Array.from(kd.values())}function Rt(n,e,t){var r;let i=null!==(r=qMe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Od.warn(a.join(" "))}Hr(new Dr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const QMe="firebase-heartbeat-database",ZMe=1,Ey="firebase-heartbeat-store";let TD=null;function Zq(){return TD||(TD=_D(QMe,ZMe,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Ey)}}).catch(n=>{throw Hc.create("idb-open",{originalErrorMessage:n.message})})),TD}function bD(){return bD=O(function*(n){try{return yield(yield Zq()).transaction(Ey).objectStore(Ey).get(eK(n))}catch(e){if(e instanceof so)Od.warn(e.message);else{const t=Hc.create("idb-get",{originalErrorMessage:e?.message});Od.warn(t.message)}}}),bD.apply(this,arguments)}function Jq(n,e){return xD.apply(this,arguments)}function xD(){return xD=O(function*(n,e){try{const r=(yield Zq()).transaction(Ey,"readwrite");yield r.objectStore(Ey).put(e,eK(n)),yield r.done}catch(t){if(t instanceof so)Od.warn(t.message);else{const r=Hc.create("idb-set",{originalErrorMessage:t?.message});Od.warn(r.message)}}}),xD.apply(this,arguments)}function eK(n){return`${n.name}!${n.options.appId}`}class n1e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new i1e(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return O(function*(){var t,r;const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=tK();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==o&&!e._heartbeatsCache.heartbeats.some(a=>a.date===o))return e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return O(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=tK(),{heartbeatsToSend:i,unsentEntries:s}=function r1e(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nK(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),nK(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=Ib(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function tK(){return(new Date).toISOString().substring(0,10)}class i1e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return O(function*(){return!!Vc()&&Up().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return O(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function JMe(n){return bD.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return O(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return Jq(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return O(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return Jq(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function nK(n){return Ib(JSON.stringify({version:2,heartbeats:n})).length}!function s1e(n){Hr(new Dr("platform-logger",e=>new EMe(e),"PRIVATE")),Hr(new Dr("heartbeat",e=>new n1e(e),"PRIVATE")),Rt(ED,"0.9.24",n),Rt(ED,"0.9.24","esm2017"),Rt("fire-js","")}("");const rK="@firebase/database";let SD="";class o1e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jr(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:gy(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class a1e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bc(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const oK=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new o1e(e)}}catch{}return new a1e},Ld=oK("localStorage"),ID=oK("sessionStorage"),zp=new Yl("@firebase/database"),aK=function(){let n=1;return function(){return n++}}(),cK=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,fe(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new jAe;t.update(e);const r=t.digest();return Sb.encodeByteArray(r)},wy=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=wy.apply(null,r):e+="object"==typeof r?Jr(r):r,e+=" "}return e};let Fd=null,lK=!0;const ei=function(...n){if(!0===lK&&(lK=!1,null===Fd&&!0===ID.get("logging_enabled")&&function(n,e){fe(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(zp.logLevel=Xt.VERBOSE,Fd=zp.log.bind(zp),e&&ID.set("logging_enabled",!0)):"function"==typeof n?Fd=n:(Fd=null,ID.remove("logging_enabled"))}(!0)),Fd){const e=wy.apply(null,n);Fd(e)}},Ty=function(n){return function(...e){ei(n,...e)}},CD=function(...n){const e="FIREBASE INTERNAL ERROR: "+wy(...n);zp.error(e)},La=function(...n){const e=`FIREBASE FATAL ERROR: ${wy(...n)}`;throw zp.error(e),new Error(e)},Fi=function(...n){const e="FIREBASE WARNING: "+wy(...n);zp.warn(e)},Fb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xl="[MIN_NAME]",Wc="[MAX_NAME]",Ud=function(n,e){if(n===e)return 0;if(n===Xl||e===Wc)return-1;if(e===Xl||n===Wc)return 1;{const t=fK(n),r=fK(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},u1e=function(n,e){return n===e?0:n<e?-1:1},by=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Jr(e))},AD=function(n){if("object"!=typeof n||null===n)return Jr(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Jr(e[r]),t+=":",t+=AD(n[e[r]]);return t+="}",t},dK=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hK=function(n){fe(!Fb(n),"Invalid JSON number");const r=1023;let i,s,o,a,c;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const l=[];for(c=52;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=11;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},p1e=new RegExp("^-?(0*)\\d{1,10}$"),fK=function(n){if(p1e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Hp=function(n){try{n()}catch(e){setTimeout(()=>{throw Fi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xy=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class y1e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Fi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class v1e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fi(e)}}let Sy=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const yK=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wK="websocket",TK="long_polling";class RD{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ld.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ld.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function bK(n,e,t){let r;if(fe("string"==typeof e,"typeof type must == string"),fe("object"==typeof t,"typeof params must == object"),e===wK)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==TK)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function E1e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ti(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class w1e{constructor(){this.counters_={}}incrementCounter(e,t=1){Bc(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return OAe(this.counters_)}}const PD={},DD={};function ND(n){const e=n.toString();return PD[e]||(PD[e]=new w1e),PD[e]}class b1e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Hp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ql{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ty(e),this.stats_=ND(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),bK(t,TK,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new b1e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new OD((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=c;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&yK.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ql.forceAllow_=!0}static forceDisallow(){Ql.forceDisallow_=!0}static isAvailable(){return!(!Ql.forceAllow_&&(Ql.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Jr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=kq(t),i=dK(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Jr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class OD{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=aK(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=OD.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ei("frame writing exception"),a.stack&&ei(a.stack),ei(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ei("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Vb=null;typeof MozWebSocket<"u"?Vb=MozWebSocket:typeof WebSocket<"u"&&(Vb=WebSocket);let Gp=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ty(this.connId),this.stats_=ND(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&yK.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),bK(t,wK,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ld.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Vb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Vb&&!n.forceDisallow_}static previouslyFailed(){return Ld.isInMemoryStorage||!0===Ld.get("previous_websocket_failure")}markConnectionHealthy(){Ld.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=gy(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(fe(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Jr(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=dK(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),RK=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ql,Gp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Gp&&Gp.isAvailable();let i=r&&!Gp.previouslyFailed();if(t.webSocketOnly&&(r||Fi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Gp];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class FK{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ty("c:"+this.id+":"),this.transportManager_=new RK(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=by("t",e),r=by("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=by("t",e),r=by("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=by("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?CD("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):CD("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Fi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ld.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class UK{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class VK{constructor(e){this.allowedEvents_=e,this.listeners_={},fe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){fe(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Bb extends VK{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!aD()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Bb}getInitialEvent(e){return fe("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Jt(){return new cn("")}function Dt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zl(n){return n.pieces_.length-n.pieceNum_}function bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new cn(n.pieces_,e)}function LD(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Iy(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function HK(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new cn(e,0)}function Hn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new cn(t,0)}function Nt(n){return n.pieceNum_>=n.pieces_.length}function os(n,e){const t=Dt(n),r=Dt(e);if(null===t)return e;if(t===r)return os(bn(n),bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function FD(n,e){if(Zl(n)!==Zl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Oo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Zl(n)>Zl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class j1e{constructor(e,t){this.errorPrefix_=t,this.parts_=Iy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Nb(this.parts_[r]);GK(this)}}function GK(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vd(n))}function Vd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class UD extends VK{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new UD}getInitialEvent(e){return fe("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Cy=1e3;let Hb,Bd=(()=>{class n extends UK{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Ty("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UD.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Bb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Jr(o)),fe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new Fc,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),fe(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),fe(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,c=>{const l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Bc(t,"w")){const i=Vp(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Fi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Pb(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=Pb(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),fe(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Jr(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):CD("Unrecognized action received from server: "+Jr(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){fe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cy,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Cy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Cy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return O(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let c=!1,l=null;const u=function(){l?l.close():(c=!0,s())},d=function(f){fe(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};t.realtime_={close:u,sendRequest:d};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);c?ei("getToken() completed but was canceled"):(ei("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,l=new FK(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,g=>{Fi(g+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),c||(t.repoInfo_.nodeAdmin&&Fi(f),u())}}})()}interrupt(t){ei("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ei("Resuming connection for reason: "+t),delete this.interruptReasons_[t],lD(this.interruptReasons_)&&(this.reconnectDelay_=Cy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>AD(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new cn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){ei("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ei("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+SD.replace(/\./g,"-")]=1,aD()?t["framework.cordova"]=1:zq()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Bb.getInstance().currentlyOnline();return lD(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ft{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ft(e,t)}}class zb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ft(Xl,e),i=new Ft(Xl,t);return 0!==this.compare(r,i)}minPost(){return Ft.MIN}}class jK extends zb{static get __EMPTY_NODE(){return Hb}static set __EMPTY_NODE(e){Hb=e}compare(e,t){return Ud(e.name,t.name)}isDefinedOn(e){throw Fp("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ft.MIN}maxPost(){return new Ft(Wc,Hb)}makePost(e,t){return fe("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ft(e,Hb)}toString(){return".key"}}const Fa=new jK;class Gb{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let BD,ta=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ps.EMPTY_NODE,this.right=o??Ps.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ps.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ps.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ps{constructor(e,t=Ps.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ps(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ta.BLACK,null,null))}remove(e){return new Ps(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ta.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gb(this.root_,null,this.comparator_,!0,e)}}function eRe(n,e){return Ud(n.name,e.name)}function VD(n,e){return Ud(n,e)}Ps.EMPTY_NODE=new class J1e{copy(e,t,r,i,s){return this}insert(e,t,r){return new ta(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qK=function(n){return"number"==typeof n?"number:"+hK(n):"string:"+n},KK=function(n){if(n.isLeafNode()){const e=n.val();fe("string"==typeof e||"number"==typeof e||"object"==typeof e&&Bc(e,".sv"),"Priority must be a string or number.")}else fe(n===BD||n.isEmpty(),"priority of unexpected type.");fe(n===BD||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let YK,XK,QK,Wp=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,fe(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),KK(this.priorityNode_)}static set __childrenNodeConstructor(t){YK=t}static get __childrenNodeConstructor(){return YK}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Nt(t)?this:".priority"===Dt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Dt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(fe(".priority"!==i||1===Zl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+qK(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?hK(this.value_):this.value_,this.lazyHash_=cK(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(fe(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return fe(s>=0,"Unknown leaf type: "+r),fe(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const An=new class iRe extends zb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ud(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ft.MIN}maxPost(){return new Ft(Wc,new Wp("[PRIORITY-POST]",QK))}makePost(e,t){const r=XK(e);return new Ft(t,new Wp("[PRIORITY-POST]",r))}toString(){return".priority"}},sRe=Math.log(2);class oRe{constructor(e){this.count=(s=>parseInt(Math.log(s)/sRe,10))(e+1),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wb=function(n,e,t,r){n.sort(e);const i=function(c,l){const u=l-c;let d,h;if(0===u)return null;if(1===u)return d=n[c],h=t?t(d):d,new ta(h,d.node,ta.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=i(c,f),g=i(f+1,l);return d=n[f],h=t?t(d):d,new ta(h,d.node,ta.BLACK,p,g)}},a=function(c){let l=null,u=null,d=n.length;const h=function(p,g){const m=d-p,_=d;d-=p;const y=i(m+1,_),v=n[m],E=t?t(v):v;f(new ta(E,v.node,g,null,y))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?h(m,ta.BLACK):(h(m,ta.BLACK),h(m,ta.RED))}return u}(new oRe(n.length));return new Ps(r||e,a)};let zD;const $p={};class $c{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return fe($p&&An,"ChildrenNode.ts has not been loaded"),zD=zD||new $c({".priority":$p},{".priority":An}),zD}get(e){const t=Vp(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ps?t:null}hasIndex(e){return Bc(this.indexSet_,e.toString())}addIndex(e,t){fe(e!==Fa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Ft.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Wb(r,e.getCompare()):$p;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new $c(u,l)}addToIndexes(e,t){const r=Db(this.indexes_,(i,s)=>{const o=Vp(this.indexSet_,s);if(fe(o,"Missing index implementation for "+s),i===$p){if(o.isDefinedOn(e.node)){const a=[],c=t.getIterator(Ft.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Wb(a,o.getCompare())}return $p}{const a=t.get(e.name);let c=i;return a&&(c=c.remove(new Ft(e.name,a))),c.insert(e,e.node)}});return new $c(r,this.indexSet_)}removeFromIndexes(e,t){const r=Db(this.indexes_,i=>{if(i===$p)return i;{const s=t.get(e.name);return s?i.remove(new Ft(e.name,s)):i}});return new $c(r,this.indexSet_)}}let Ay,wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&KK(this.priorityNode_),this.children_.isEmpty()&&fe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ay||(Ay=new n(new Ps(VD),null,$c.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ay}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ay:r}}getChild(t){const r=Dt(t);return null===r?this:this.getImmediateChild(r).getChild(bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(fe(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Ft(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Ay:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=Dt(t);if(null===i)return r;{fe(".priority"!==Dt(t)||1===Zl(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(bn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(An,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+qK(this.getPriority().val())+":"),this.forEachChild(An,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":cK(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Ft(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Ft(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Ft(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ft.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ft.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===My?-1:0}withIndex(t){if(t===Fa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(An),s=r.getIterator(An);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Fa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const My=new class aRe extends wt{constructor(){super(new Ps(VD),wt.EMPTY_NODE,$c.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ft,{MIN:{value:new Ft(Xl,wt.EMPTY_NODE)},MAX:{value:new Ft(Wc,My)}}),jK.__EMPTY_NODE=wt.EMPTY_NODE,Wp.__childrenNodeConstructor=wt,function tRe(n){BD=n}(My),function rRe(n){QK=n}(My);const cRe=!0;function Qn(n,e=null){if(null===n)return wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),fe(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Wp(n,Qn(e));if(n instanceof Array||!cRe){let t=wt.EMPTY_NODE;return ti(n,(r,i)=>{if(Bc(n,r)&&"."!==r.substring(0,1)){const s=Qn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Qn(e))}{const t=[];let r=!1;if(ti(n,(o,a)=>{if("."!==o.substring(0,1)){const c=Qn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Ft(o,c)))}}),0===t.length)return wt.EMPTY_NODE;const s=Wb(t,eRe,o=>o.name,VD);if(r){const o=Wb(t,An.getCompare());return new wt(s,Qn(e),new $c({".priority":o},{".priority":An}))}return new wt(s,Qn(e),$c.Default)}}!function nRe(n){XK=n}(Qn);class HD extends zb{constructor(e){super(),this.indexPath_=e,fe(!Nt(e)&&".priority"!==Dt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ud(e.name,t.name):s}makePost(e,t){const r=Qn(e),i=wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ft(t,i)}maxPost(){const e=wt.EMPTY_NODE.updateChild(this.indexPath_,My);return new Ft(Wc,e)}toString(){return Iy(this.indexPath_,0).join("/")}}const GD=new class lRe extends zb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ud(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ft.MIN}maxPost(){return Ft.MAX}makePost(e,t){const r=Qn(e);return new Ft(t,r)}toString(){return".value"}};function ZK(n){return{type:"value",snapshotNode:n}}function jp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ry(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Py(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class WD{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){fe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Ry(t,a)):fe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(jp(t,r)):o.trackChildChange(Py(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(An,(i,s)=>{t.hasChild(i)||r.trackChildChange(Ry(i,s))}),t.isLeafNode()||t.forEachChild(An,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Py(i,s,o))}else r.trackChildChange(jp(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Dy{constructor(e){this.indexedFilter_=new WD(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Dy.getStartPost_(e),this.endPost_=Dy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Ft(t,r))||(r=wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(wt.EMPTY_NODE);const s=this;return t.forEachChild(An,(o,a)=>{s.matches(new Ft(o,a))||(i=i.updateImmediateChild(o,wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class dRe{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Dy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Ft(t,r))||(r=wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=wt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(wt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;fe(a.numChildren()===this.limit_,"");const c=new Ft(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Py(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Ry(t,d));const g=a.updateImmediateChild(t,wt.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(s?.trackChildChange(jp(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}return r.isEmpty()?e:u&&o(l,c)>=0?(null!=s&&(s.trackChildChange(Ry(l.name,l.node)),s.trackChildChange(jp(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,wt.EMPTY_NODE)):e}}class $D{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=An}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return fe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return fe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xl}hasEnd(){return this.endSet_}getIndexEndValue(){return fe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return fe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return fe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===An}copy(){const e=new $D;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function JK(n){const e={};if(n.isDefault())return e;let t;if(n.index_===An?t="$priority":n.index_===GD?t="$value":n.index_===Fa?t="$key":(fe(n.index_ instanceof HD,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Jr(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Jr(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Jr(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Jr(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Jr(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function eY(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==An&&(e.i=n.index_.toString()),e}class jb extends UK{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ty("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(fe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jb.getListenId_(e,r),a={};this.listens_[o]=a;const c=JK(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(404===l&&(d=null,l=null),null===l&&this.onDataUpdate_(s,d,!1,r),Vp(this.listens_,o)===a){let h;h=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(h,null)}})}unlisten(e,t){const r=jb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=JK(e._queryParams),r=e._path.toString(),i=new Fc;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_y(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=gy(a.responseText)}catch{Fi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&Fi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class _Re{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qb(){return{value:null,children:new Map}}function qp(n,e,t){if(Nt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Dt(e);n.children.has(r)||n.children.set(r,qb()),qp(n.children.get(r),e=bn(e),t)}}function YD(n,e,t){null!==n.value?t(e,n.value):function yRe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{YD(i,new cn(e.toString()+"/"+r),t)})}class vRe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class TRe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new vRe(e);const r=1e4+2e4*Math.random();xy(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ti(e,(i,s)=>{s>0&&Bc(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),xy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ua=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ua||{});function ZD(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Kb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ua.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Nt(this.path)){if(null!=this.affectedTree.value)return fe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new cn(e));return new Kb(Jt(),t,this.revert)}}return fe(Dt(this.path)===e,"operationForChild called for unrelated child."),new Kb(bn(this.path),this.affectedTree,this.revert)}}class Ny{constructor(e,t){this.source=e,this.path=t,this.type=Ua.LISTEN_COMPLETE}operationForChild(e){return Nt(this.path)?new Ny(this.source,Jt()):new Ny(this.source,bn(this.path))}}class zd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ua.OVERWRITE}operationForChild(e){return Nt(this.path)?new zd(this.source,Jt(),this.snap.getImmediateChild(e)):new zd(this.source,bn(this.path),this.snap)}}class Kp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ua.MERGE}operationForChild(e){if(Nt(this.path)){const t=this.children.subtree(new cn(e));return t.isEmpty()?null:t.value?new zd(this.source,Jt(),t.value):new Kp(this.source,Jt(),t)}return fe(Dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kp(this.source,bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Jl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Nt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Dt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class bRe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Oy(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,c)=>function IRe(n,e,t){if(null==e.childName||null==t.childName)throw Fp("Should only compare child_ events.");const r=new Ft(e.childName,e.snapshotNode),i=new Ft(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,c)),o.forEach(a=>{const c=function SRe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function Yb(n,e){return{eventCache:n,serverCache:e}}function ky(n,e,t,r){return Yb(new Jl(e,t,r),n.serverCache)}function nY(n,e,t,r){return Yb(n.eventCache,new Jl(e,t,r))}function Xb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let JD;class Mn{constructor(e,t=(()=>(JD||(JD=new Ps(u1e)),JD))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return ti(e,(r,i)=>{t=t.set(new cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Jt(),value:this.value};if(Nt(e))return null;{const r=Dt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(bn(e),t);return null!=s?{path:Hn(new cn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Nt(e))return this;{const t=Dt(e),r=this.children.get(t);return null!==r?r.subtree(bn(e)):new Mn(null)}}set(e,t){if(Nt(e))return new Mn(t,this.children);{const r=Dt(e),s=(this.children.get(r)||new Mn(null)).set(bn(e),t),o=this.children.insert(r,s);return new Mn(this.value,o)}}remove(e){if(Nt(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=Dt(e),r=this.children.get(t);if(r){const i=r.remove(bn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Mn(null):new Mn(this.value,s)}return this}}get(e){if(Nt(e))return this.value;{const t=Dt(e),r=this.children.get(t);return r?r.get(bn(e)):null}}setTree(e,t){if(Nt(e))return t;{const r=Dt(e),s=(this.children.get(r)||new Mn(null)).setTree(bn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Mn(this.value,o)}}fold(e){return this.fold_(Jt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Hn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Jt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Nt(e))return null;{const s=Dt(e),o=this.children.get(s);return o?o.findOnPath_(bn(e),Hn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Jt(),t)}foreachOnPath_(e,t,r){if(Nt(e))return this;{this.value&&r(t,this.value);const i=Dt(e),s=this.children.get(i);return s?s.foreachOnPath_(bn(e),Hn(t,i),r):new Mn(null)}}foreach(e){this.foreach_(Jt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Hn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class na{constructor(e){this.writeTree_=e}static empty(){return new na(new Mn(null))}}function Ly(n,e,t){if(Nt(e))return new na(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=os(i,e);return s=s.updateChild(o,t),new na(n.writeTree_.set(i,s))}{const i=new Mn(t),s=n.writeTree_.setTree(e,i);return new na(s)}}}function eN(n,e,t){let r=n;return ti(t,(i,s)=>{r=Ly(r,Hn(e,i),s)}),r}function rY(n,e){if(Nt(e))return na.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new na(t)}}function tN(n,e){return null!=Gd(n,e)}function Gd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(os(t.path,e)):null}function iY(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(An,(r,i)=>{e.push(new Ft(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Ft(r,i.value))}),e}function eu(n,e){if(Nt(e))return n;{const t=Gd(n,e);return new na(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function nN(n){return n.writeTree_.isEmpty()}function Yp(n,e){return sY(Jt(),n.writeTree_,e)}function sY(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(fe(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=sY(Hn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Hn(n,".priority"),r)),t}}function Qb(n,e){return uY(e,n)}function DRe(n,e){if(n.snap)return Oo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Oo(Hn(n.path,t),e))return!0;return!1}function ORe(n){return n.visible}function oY(n,e,t){let r=na.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Oo(t,o)?(a=os(t,o),r=Ly(r,a,s.snap)):Oo(o,t)&&(a=os(o,t),r=Ly(r,Jt(),s.snap.getChild(a)));else{if(!s.children)throw Fp("WriteRecord should have .snap or .children");if(Oo(t,o))a=os(t,o),r=eN(r,a,s.children);else if(Oo(o,t))if(a=os(o,t),Nt(a))r=eN(r,Jt(),s.children);else{const c=Vp(s.children,Dt(a));if(c){const l=c.getChild(bn(a));r=Ly(r,Jt(),l)}}}}}return r}function aY(n,e,t,r,i){if(r||i){const s=eu(n.visibleWrites,e);if(!i&&nN(s))return t;if(!i&&null==t&&!tN(s,Jt()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Oo(l.path,e)||Oo(e,l.path))};return Yp(oY(n.allWrites,o,e),t||wt.EMPTY_NODE)}}{const s=Gd(n.visibleWrites,e);if(null!=s)return s;{const o=eu(n.visibleWrites,e);return nN(o)?t:null!=t||tN(o,Jt())?Yp(o,t||wt.EMPTY_NODE):null}}}function Zb(n,e,t,r){return aY(n.writeTree,n.treePath,e,t,r)}function rN(n,e){return function kRe(n,e,t){let r=wt.EMPTY_NODE;const i=Gd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(An,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=eu(n.visibleWrites,e);return t.forEachChild(An,(o,a)=>{const c=Yp(eu(s,new cn(o)),a);r=r.updateImmediateChild(o,c)}),iY(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return iY(eu(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function cY(n,e,t,r){return function LRe(n,e,t,r,i){fe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Hn(e,t);if(tN(n.visibleWrites,s))return null;{const o=eu(n.visibleWrites,s);return nN(o)?i.getChild(t):Yp(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Jb(n,e){return function URe(n,e){return Gd(n.visibleWrites,e)}(n.writeTree,Hn(n.treePath,e))}function iN(n,e,t){return function FRe(n,e,t,r){const i=Hn(e,t),s=Gd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Yp(eu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function lY(n,e){return uY(Hn(n.treePath,e),n.writeTree)}function uY(n,e){return{treePath:n,writeTree:e}}class HRe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;fe("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),fe(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Py(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Ry(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,jp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Fp("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Py(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const dY=new class GRe{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class sN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Jl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hd(this.viewCache_),s=function zRe(n,e,t,r,i,s){return function VRe(n,e,t,r,i,s,o){let a;const c=eu(n.visibleWrites,e),l=Gd(c,Jt());if(null!=l)a=l;else{if(null==t)return[];a=Yp(c,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function hY(n,e,t,r,i,s){const o=e.eventCache;if(null!=Jb(r,t))return e;{let a,c;if(Nt(t))if(fe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Hd(e),d=rN(r,l instanceof wt?l:wt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=Zb(r,Hd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Dt(t);if(".priority"===l){fe(1===Zl(t),"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=cY(r,t,u,c);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=bn(t);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=cY(r,t,o.getNode(),c);d=null!=h?o.getNode().getImmediateChild(l).updateChild(u,h):o.getNode().getImmediateChild(l)}else d=iN(r,l,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),l,d,u,i,s):o.getNode()}}return ky(e,a,o.isFullyInitialized()||Nt(t),n.filter.filtersNodes())}}function ex(n,e,t,r,i,s,o,a){const c=e.serverCache;let l;const u=o?n.filter:n.filter.getIndexedFilter();if(Nt(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Dt(t);if(!c.isCompleteForPath(t)&&Zl(t)>1)return e;const p=bn(t),m=c.getNode().getImmediateChild(f).updateChild(p,r);l=".priority"===f?u.updatePriority(c.getNode(),m):u.updateChild(c.getNode(),f,m,p,dY,null)}const d=nY(e,l,c.isFullyInitialized()||Nt(t),u.filtersNodes());return hY(n,d,t,i,new sN(i,d,s),a)}function oN(n,e,t,r,i,s,o){const a=e.eventCache;let c,l;const u=new sN(i,e,s);if(Nt(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=ky(e,l,!0,n.filter.filtersNodes());else{const d=Dt(t);if(".priority"===d)l=n.filter.updatePriority(e.eventCache.getNode(),r),c=ky(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=bn(t),f=a.getNode().getImmediateChild(d);let p;if(Nt(h))p=r;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===LD(h)&&g.getChild(HK(h)).isEmpty()?g:g.updateChild(h,r):wt.EMPTY_NODE}c=f.equals(p)?e:ky(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function fY(n,e){return n.eventCache.isCompleteForChild(e)}function pY(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function aN(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,c=e;l=Nt(t)?r:new Mn(null).setTree(t,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=pY(0,e.serverCache.getNode().getImmediateChild(d),h);c=ex(n,c,new cn(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const g=pY(0,e.serverCache.getNode().getImmediateChild(d),h);c=ex(n,c,new cn(d),g,i,s,o,a)}}),c}class ZRe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new WD(r.getIndex()),s=function hRe(n){return n.loadsAllData()?new WD(n.getIndex()):n.hasLimit()?new dRe(n):new Dy(n)}(r);this.processor_=function WRe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,c=i.updateFullNode(wt.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(wt.EMPTY_NODE,a.getNode(),null),u=new Jl(c,o.isFullyInitialized(),i.filtersNodes()),d=new Jl(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Yb(d,u),this.eventGenerator_=new bRe(this.query_)}get query(){return this.query_}}function tPe(n,e){const t=Hd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Nt(e)&&!t.getImmediateChild(Dt(e)).isEmpty())?t.getChild(e):null}function gY(n){return 0===n.eventRegistrations_.length}function mY(n,e,t){const r=[];if(t){fe(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _Y(n,e,t,r){e.type===Ua.MERGE&&null!==e.source.queryId&&(fe(Hd(n.viewCache_),"We should always have a full cache before handling merges"),fe(Xb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function jRe(n,e,t,r,i){const s=new HRe;let o,a;if(t.type===Ua.OVERWRITE){const l=t;l.source.fromUser?o=oN(n,e,l.path,l.snap,r,i,s):(fe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Nt(l.path),o=ex(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Ua.MERGE){const l=t;l.source.fromUser?o=function KRe(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=Hn(t,c);fY(e,Dt(u))&&(a=oN(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=Hn(t,c);fY(e,Dt(u))||(a=oN(n,a,u,l,i,s,o))}),a}(n,e,l.path,l.children,r,i,s):(fe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=aN(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Ua.ACK_USER_WRITE){const l=t;o=l.revert?function QRe(n,e,t,r,i,s){let o;if(null!=Jb(r,t))return e;{const a=new sN(r,e,i),c=e.eventCache.getNode();let l;if(Nt(t)||".priority"===Dt(t)){let u;if(e.serverCache.isFullyInitialized())u=Zb(r,Hd(e));else{const d=e.serverCache.getNode();fe(d instanceof wt,"serverChildren would be complete if leaf node"),u=rN(r,d)}l=n.filter.updateFullNode(c,u,s)}else{const u=Dt(t);let d=iN(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),l=null!=d?n.filter.updateChild(c,u,d,bn(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(c,u,wt.EMPTY_NODE,bn(t),a,s):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Zb(r,Hd(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Jb(r,Jt()),ky(e,l,o,n.filter.filtersNodes())}}(n,e,l.path,r,i,s):function YRe(n,e,t,r,i,s,o){if(null!=Jb(i,t))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Nt(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return ex(n,e,t,c.getNode().getChild(t),i,s,a,o);if(Nt(t)){let l=new Mn(null);return c.getNode().forEachChild(Fa,(u,d)=>{l=l.set(new cn(u),d)}),aN(n,e,t,l,i,s,a,o)}return e}{let l=new Mn(null);return r.foreach((u,d)=>{const h=Hn(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),aN(n,e,t,l,i,s,a,o)}}(n,e,l.path,l.affectedTree,r,i,s)}else{if(t.type!==Ua.LISTEN_COMPLETE)throw Fp("Unknown operation type: "+t.type);o=function XRe(n,e,t,r,i){const s=e.serverCache;return hY(n,nY(e,s.getNode(),s.isFullyInitialized()||Nt(t),s.isFiltered()),t,r,dY,i)}(n,e,t.path,r,s)}const c=s.getChanges();return function qRe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Xb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(ZK(Xb(e)))}}(e,o,c),{viewCache:o,changes:c}}(n.processor_,i,e,t,r);return function $Re(n,e){fe(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),fe(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),fe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,yY(n,s.changes,s.viewCache.eventCache.getNode(),null)}function yY(n,e,t,r){return function xRe(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function uRe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Oy(n,i,"child_removed",e,r,t),Oy(n,i,"child_added",e,r,t),Oy(n,i,"child_moved",s,r,t),Oy(n,i,"child_changed",e,r,t),Oy(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let tx,rx;class vY{constructor(){this.views=new Map}}function cN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return fe(null!=s,"SyncTree gave us an op for an invalid query."),_Y(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(_Y(o,e,t,r));return s}}function aPe(n,e,t,r,i,s){const o=function EY(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=Zb(t,i?r:null),c=!1;a?c=!0:r instanceof wt?(a=rN(t,r),c=!1):(a=wt.EMPTY_NODE,c=!1);const l=Yb(new Jl(a,c,!1),new Jl(r,i,!1));return new ZRe(e,l)}return o}(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function nPe(n,e){n.eventRegistrations_.push(e)}(o,t),function rPe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(An,(s,o)=>{r.push(jp(s,o))}),t.isFullyInitialized()&&r.push(ZK(t.getNode())),yY(n,r,t.getNode(),e)}(o,t)}function wY(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function tu(n,e){let t=null;for(const r of n.views.values())t=t||tPe(r,e);return t}function TY(n,e){return e._queryParams.loadsAllData()?nx(n):n.views.get(e._queryIdentifier)}function bY(n,e){return null!=TY(n,e)}function nu(n){return null!=nx(n)}function nx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let dPe=1;class xY{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=function BRe(){return{visibleWrites:na.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lN(n,e,t,r,i){return function ARe(n,e,t,r,i){fe(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ly(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Xp(n,new zd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ru(n,e,t=!1){const r=function RRe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function PRe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);fe(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&DRe(a,r.path)?i=!1:Oo(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function NRe(n){n.visibleWrites=oY(n.allWrites,ORe,Jt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=rY(n.visibleWrites,r.path):ti(r.children,c=>{n.visibleWrites=rY(n.visibleWrites,Hn(r.path,c))}),!0))}(n.pendingWriteTree_,e)){let s=new Mn(null);return null!=r.snap?s=s.set(Jt(),!0):ti(r.children,o=>{s=s.set(new cn(o),!0)}),Xp(n,new Kb(r.path,s,t))}return[]}function Fy(n,e,t){return Xp(n,new zd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ix(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||bY(o,e))){const c=function cPe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=nu(n);if("default"===i)for(const[c,l]of n.views.entries())o=o.concat(mY(l,t,r)),gY(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{const c=n.views.get(i);c&&(o=o.concat(mY(c,t,r)),gY(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!nu(n)&&s.push(new(function sPe(){return fe(tx,"Reference.ts has not been loaded"),tx}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function oPe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const l=c.removed;if(a=c.events,!i){const u=-1!==l.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(s,(h,f)=>nu(f));if(u&&!d){const h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=function yPe(n){return n.fold((e,t,r)=>{if(t&&nu(t))return[nx(t)];{let i=[];return t&&(i=wY(t)),ti(r,(s,o)=>{i=i.concat(o)}),i}})}(h);for(let p=0;p<f.length;++p){const g=f[p],m=g.query,_=AY(n,g);n.listenProvider_.startListening(Vy(m),Uy(n,m),_.hashFn,_.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(Vy(e),null):l.forEach(h=>{const f=n.queryToTagMap.get(ox(h));n.listenProvider_.stopListening(Vy(h),f)}))}!function vPe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ox(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,l)}return a}function uN(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=os(h,i);s=s||tu(f,p),o=o||nu(f)});let c,a=n.syncPointTree_.get(i);a?(o=o||nu(a),s=s||tu(a,Jt())):(a=new vY,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?c=!0:(c=!1,s=wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,p)=>{const g=tu(p,Jt());g&&(s=s.updateImmediateChild(f,g))}));const l=bY(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=ox(e);fe(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function EPe(){return dPe++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=aPe(a,e,t,Qb(n.pendingWriteTree_,i),s,c);if(!l&&!o&&!r){const h=TY(a,e);d=d.concat(function wPe(n,e,t){const r=e._path,i=Uy(n,e),s=AY(n,t),o=n.listenProvider_.startListening(Vy(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)fe(!nu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Nt(l)&&u&&nu(u))return[nx(u).query];{let h=[];return u&&(h=h.concat(wY(u).map(f=>f.query))),ti(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];n.listenProvider_.stopListening(Vy(u),Uy(n,u))}}return o}(n,e,h))}return d}function sx(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=tu(a,os(o,e));if(l)return l});return aY(i,e,s,t,!0)}function Xp(n,e){return IY(e,n.syncPointTree_,null,Qb(n.pendingWriteTree_,Jt()))}function IY(n,e,t,r){if(Nt(n.path))return CY(n,e,t,r);{const i=e.get(Jt());null==t&&null!=i&&(t=tu(i,Jt()));let s=[];const o=Dt(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){const l=t?t.getImmediateChild(o):null,u=lY(r,o);s=s.concat(IY(a,c,l,u))}return i&&(s=s.concat(cN(i,n,r,t))),s}}function CY(n,e,t,r){const i=e.get(Jt());null==t&&null!=i&&(t=tu(i,Jt()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=t?t.getImmediateChild(o):null,l=lY(r,o),u=n.operationForChild(o);u&&(s=s.concat(CY(u,a,c,l)))}),i&&(s=s.concat(cN(i,n,r,t))),s}function AY(n,e){const t=e.query,r=Uy(n,t);return{hashFn:()=>(function JRe(n){return n.viewCache_.serverCache.getNode()}(e)||wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function gPe(n,e,t){const r=dN(n,t);if(r){const i=hN(r),s=i.path,o=i.queryId,a=os(s,e);return fN(n,s,new Ny(ZD(o),a))}return[]}(n,t._path,r):function pPe(n,e){return Xp(n,new Ny({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function f1e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ix(n,t,null,s)}}}}function Uy(n,e){const t=ox(e);return n.queryToTagMap.get(t)}function ox(n){return n._path.toString()+"$"+n._queryIdentifier}function dN(n,e){return n.tagToQueryMap.get(e)}function hN(n){const e=n.indexOf("$");return fe(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new cn(n.substr(0,e))}}function fN(n,e,t){const r=n.syncPointTree_.get(e);return fe(r,"Missing sync point for query tag that we're tracking"),cN(r,t,Qb(n.pendingWriteTree_,e),null)}function Vy(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function uPe(){return fe(rx,"Reference.ts has not been loaded"),rx}())(n._repo,n._path):n}class pN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new pN(t)}node(){return this.node_}}class gN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Hn(this.path_,e);return new gN(this.syncTree_,t)}node(){return sx(this.syncTree_,this.path_)}}const TPe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},MY=function(n,e,t){return n&&"object"==typeof n?(fe(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?bPe(n[".sv"],e,t):"object"==typeof n[".sv"]?xPe(n[".sv"],e):void fe(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},bPe=function(n,e,t){if("timestamp"===n)return t.timestamp;fe(!1,"Unexpected server value: "+n)},xPe=function(n,e,t){n.hasOwnProperty("increment")||fe(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&fe(!1,"Unexpected increment value: "+r);const i=e.node();if(fe(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},RY=function(n,e,t,r){return _N(e,new gN(t,n),r)},mN=function(n,e,t){return _N(n,new pN(e),t)};function _N(n,e,t){const r=n.getPriority().val(),i=MY(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=MY(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Wp(a,Qn(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Wp(i))),o.forEachChild(An,(a,c)=>{const l=_N(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}class yN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ax(n,e){let t=e instanceof cn?e:new cn(e),r=n,i=Dt(t);for(;null!==i;){const s=Vp(r.node.children,i)||{children:{},childCount:0};r=new yN(i,r,s),t=bn(t),i=Dt(t)}return r}function Wd(n){return n.node.value}function vN(n,e){n.node.value=e,EN(n)}function PY(n){return n.node.childCount>0}function cx(n,e){ti(n.node.children,(t,r)=>{e(new yN(t,n,r))})}function DY(n,e,t,r){t&&!r&&e(n),cx(n,i=>{DY(i,e,!0,r)}),t&&r&&e(n)}function By(n){return new cn(null===n.parent?n.name:By(n.parent)+"/"+n.name)}function EN(n){null!==n.parent&&function CPe(n,e,t){const r=function SPe(n){return void 0===Wd(n)&&!PY(n)}(t),i=Bc(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,EN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,EN(n))}(n.parent,n.name,n)}const APe=/[\[\].#$\/\u0000-\u001F\u007F]/,MPe=/[\[\].#$\u0000-\u001F\u007F]/,wN=10485760,lx=function(n){return"string"==typeof n&&0!==n.length&&!APe.test(n)},NY=function(n){return"string"==typeof n&&0!==n.length&&!MPe.test(n)},Va=function(n,e,t,r){r&&void 0===e||Hy(Bp(n,"value"),e,t)},Hy=function(n,e,t){const r=t instanceof cn?new j1e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vd(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vd(r)+" with contents = "+e.toString());if(Fb(e))throw new Error(n+"contains "+e.toString()+" "+Vd(r));if("string"==typeof e&&e.length>wN/3&&Nb(e)>wN)throw new Error(n+"contains a string greater than "+wN+" utf8 bytes "+Vd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ti(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!lx(o)))throw new Error(n+" contains an invalid key ("+o+") "+Vd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function q1e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Nb(e),GK(n)})(r,o),Hy(n,a,r),function K1e(n){const e=n.parts_.pop();n.byteLength_-=Nb(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Vd(r)+" in addition to actual children.")}},bN=function(n,e,t,r){if(!(r&&void 0===t||NY(t)))throw new Error(Bp(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},DPe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bN(n,e,t,r)},Ba=function(n,e){if(".info"===Dt(e))throw new Error(n+" failed = Can't modify data under /.info/")};class NPe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ux(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!FD(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function LY(n,e,t){ux(n,t),FY(n,r=>FD(r,e))}function oo(n,e,t){ux(n,t),FY(n,r=>Oo(r,e)||Oo(e,r))}function FY(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(OPe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function OPe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fd&&ei("event: "+t.toString()),Hp(r)}}}const kPe=25;class LPe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NPe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qb(),this.transactionQueueTree_=new yN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VY(n){const t=n.infoData_.getNode(new cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Wy(n){return TPe({timestamp:VY(n)})}function BY(n,e,t,r,i){n.dataUpdateCount++;const s=new cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const c=Db(t,l=>Qn(l));o=function mPe(n,e,t,r){const i=dN(n,r);if(i){const s=hN(i),o=s.path,a=s.queryId,c=os(o,e),l=Mn.fromObject(t);return fN(n,o,new Kp(ZD(a),c,l))}return[]}(n.serverSyncTree_,s,c,i)}else{const c=Qn(t);o=function SY(n,e,t,r){const i=dN(n,r);if(null!=i){const s=hN(i),o=s.path,a=s.queryId,c=os(o,e);return fN(n,o,new zd(ZD(a),c,t))}return[]}(n.serverSyncTree_,s,c,i)}else if(r){const c=Db(t,l=>Qn(l));o=function fPe(n,e,t){const r=Mn.fromObject(t);return Xp(n,new Kp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,c)}else{const c=Qn(t);o=Fy(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Zp(n,s)),oo(n.eventQueue_,a,o)}function zY(n,e){xN(n,"connected",e),!1===e&&function zPe(n){Qp(n,"onDisconnectEvents");const e=Wy(n),t=qb();YD(n.onDisconnect_,Jt(),(i,s)=>{const o=RY(i,s,n.serverSyncTree_,e);qp(t,i,o)});let r=[];YD(t,Jt(),(i,s)=>{r=r.concat(Fy(n.serverSyncTree_,i,s));const o=AN(n,i);Zp(n,o)}),n.onDisconnect_=qb(),oo(n.eventQueue_,Jt(),r)}(n)}function xN(n,e,t){const r=new cn("/.info/"+e),i=Qn(t);n.infoData_.updateSnapshot(r,i);const s=Fy(n.infoSyncTree_,r,i);oo(n.eventQueue_,r,s)}function dx(n){return n.nextWriteId_++}function SN(n,e,t,r,i){Qp(n,"set",{path:e.toString(),value:t,priority:r});const s=Wy(n),o=Qn(t,r),a=sx(n.serverSyncTree_,e),c=mN(o,a,s),l=dx(n),u=lN(n.serverSyncTree_,e,c,l,!0);ux(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{const p="ok"===h;p||Fi("set at "+e+" failed: "+h);const g=ru(n.serverSyncTree_,l,!p);oo(n.eventQueue_,e,g),function iu(n,e,t,r){e&&Hp(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}(0,i,h,f)});const d=AN(n,e);Zp(n,d),oo(n.eventQueue_,d,[])}function IN(n,e,t){let r;r=".info"===Dt(e._path)?ix(n.infoSyncTree_,e,t):ix(n.serverSyncTree_,e,t),LY(n.eventQueue_,e._path,r)}function Qp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ei(t,...e)}function CN(n,e,t){return sx(n.serverSyncTree_,e,t)||wt.EMPTY_NODE}function hx(n,e=n.transactionQueueTree_){if(e||fx(n,e),Wd(e)){const t=$Y(n,e);fe(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function KPe(n,e,t){const r=t.map(l=>l.currentWriteId),i=CN(n,e,r);let s=i;const o=i.hash();for(let l=0;l<t.length;l++){const u=t[l];fe(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=os(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Qp(n,"transaction put response",{path:c.toString(),status:l});let u=[];if("ok"===l){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(ru(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();fx(n,ax(n.transactionQueueTree_,e)),hx(n,n.transactionQueueTree_),oo(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Hp(d[h])}else{if("datastale"===l)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Fi("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}Zp(n,e)}},o)}(n,By(e),t)}else PY(e)&&cx(e,t=>{hx(n,t)})}function Zp(n,e){const t=WY(n,e),r=By(t);return function YPe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=os(t,c.path);let d,u=!1;if(fe(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,d=c.abortReason,i=i.concat(ru(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=kPe)u=!0,d="maxretry",i=i.concat(ru(n.serverSyncTree_,c.currentWriteId,!0));else{const h=CN(n,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Hy("transaction failed: Data returned ",f,c.path);let p=Qn(f);"object"==typeof f&&null!=f&&Bc(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=c.currentWriteId,_=Wy(n),y=mN(p,h,_);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=dx(n),o.splice(o.indexOf(m),1),i=i.concat(lN(n.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally)),i=i.concat(ru(n.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(ru(n.serverSyncTree_,c.currentWriteId,!0))}oo(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}fx(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Hp(r[a]);hx(n,n.transactionQueueTree_)}(n,$Y(n,t),r),r}function WY(n,e){let t,r=n.transactionQueueTree_;for(t=Dt(e);null!==t&&void 0===Wd(r);)r=ax(r,t),t=Dt(e=bn(e));return r}function $Y(n,e){const t=[];return jY(n,e,t),t.sort((r,i)=>r.order-i.order),t}function jY(n,e,t){const r=Wd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);cx(e,i=>{jY(n,i,t)})}function fx(n,e){const t=Wd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,vN(e,t.length>0?t:void 0)}cx(e,r=>{fx(n,r)})}function AN(n,e){const t=By(WY(n,e)),r=ax(n.transactionQueueTree_,e);return function IPe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{MN(n,i)}),MN(n,r),DY(r,i=>{MN(n,i)}),t}function MN(n,e){const t=Wd(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(fe(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(fe(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(ru(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?vN(e,void 0):t.length=s+1,oo(n.eventQueue_,By(e),i);for(let o=0;o<r.length;o++)Hp(r[o])}}const RN=function(n,e){const t=ZPe(n),r=t.namespace;return"firebase.com"===t.domain&&La(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&La("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new RD(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new cn(t.pathString)}},ZPe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if("string"==typeof n){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function XPe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(u,d)));const h=function QPe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Fi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},qY="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",JPe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=qY.charAt(t%64),t=Math.floor(t/64);fe(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=qY.charAt(e[i]);return fe(20===o.length,"nextPushId: Length should be 20."),o}}();class KY{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Jr(this.snapshot.exportVal())}}class YY{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class PN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return fe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Nt(this._path)?null:LD(this._path)}get ref(){return new ra(this._repo,this._path)}get _queryIdentifier(){const e=eY(this._queryParams),t=AD(e);return"{}"===t?"default":t}get _queryObject(){return eY(this._queryParams)}isEqual(e){if(!((e=Ln(e))instanceof ao))return!1;const t=this._repo===e._repo,r=FD(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function W1e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ra extends ao{constructor(e,t){super(e,t,new $D,!1)}get parent(){const e=HK(this._path);return null===e?null:new ra(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class $d{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new cn(e),r=Jp(this.ref,e);return new $d(this._node.getChild(t),r,An)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new $d(i,Jp(this.ref,r),An)))}hasChild(e){const t=new cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mx(n,e){return(n=Ln(n))._checkNotDeleted("ref"),void 0!==e?Jp(n._root,e):n._root}function Jp(n,e){return null===Dt((n=Ln(n))._path)?DPe("child","path",e,!1):bN("child","path",e,!1),new ra(n._repo,Hn(n._path,e))}function _x(n,e){n=Ln(n),Ba("set",n._path),Va("set",e,n._path,!1);const t=new Fc;return SN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class $y{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new KY("value",this,new $d(e.snapshotNode,new ra(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YY(this,e,t):null}matches(e){return e instanceof $y&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yx{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YY(this,e,t):null}createEvent(e,t){fe(null!=e.childName,"Child events should have a childName.");const r=Jp(new ra(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new KY(e.type,this,new $d(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yx&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function XY(n,e,t,r){return function jy(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const c=t,l=(u,d)=>{IN(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}const o=new PN(t,s||void 0),a="value"===e?new $y(o):new yx(e,o);return function $Pe(n,e,t){let r;r=".info"===Dt(e._path)?uN(n.infoSyncTree_,e,t):uN(n.serverSyncTree_,e,t),LY(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>IN(n._repo,n,a)}(n,"value",e,t,r)}(function iPe(n){fe(!tx,"__referenceConstructor has already been defined"),tx=n})(ra),function lPe(n){fe(!rx,"__referenceConstructor has already been defined"),rx=n}(ra);const DN={};function eX(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||La("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ei("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,l,o=RN(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=RN(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const u=i&&c?new Sy(Sy.OWNER):new v1e(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!lx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),NY(n)}(t))throw new Error(Bp(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),Nt(o.path)||La("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function pDe(n,e,t,r){let i=DN[e.name];i||(i={},DN[e.name]=i);let s=i[n.toURLString()];return s&&La("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new LPe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,u,new y1e(n.name,t));return new mDe(d,n)}class mDe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function FPe(n,e,t){if(n.stats_=ND(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jb(n.repoInfo_,(r,i,s,o)=>{BY(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>zY(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jr(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Bd(n.repoInfo_,e,(r,i,s,o)=>{BY(n,r,i,s,o)},r=>{zY(n,r)},r=>{!function UPe(n,e){ti(e,(t,r)=>{xN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function T1e(n,e){const t=n.toString();return DD[t]||(DD[t]=e()),DD[t]}(n.repoInfo_,()=>new TRe(n.stats_,n.server_)),n.infoData_=new _Re,n.infoSyncTree_=new xY({startListening:(r,i,s,o)=>{let a=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Fy(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),xN(n,"connected",!1),n.serverSyncTree_=new xY({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);oo(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ra(this._repo,Jt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function fDe(n,e){const t=DN[e];(!t||t[n.key]!==n)&&La(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function GY(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&La("Cannot call "+e+" on a deleted database.")}}function vx(n=ea(),e){const t=Li(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Mb("database");r&&function _De(n,e,t,r={}){(n=Ln(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&La("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&La('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Sy(Sy.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:oD(r.mockUserToken,n.app.options.projectId);s=new Sy(o)}!function hDe(n,e,t,r){n.repoInfo_=new RD(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}function wDe(n,e){1&n&&(I(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),U(4,"Web/App"),P(),I(5,"h1"),U(6,"design"),P()(),I(7,"div",5),st(),I(8,"svg",6),ue(9,"circle",7),P(),I(10,"svg",8),ue(11,"circle",9),P(),I(12,"svg",8),ue(13,"circle",9),P(),I(14,"svg",8),ue(15,"circle",9),P(),I(16,"svg",8),ue(17,"circle",9),P()(),at(),I(18,"div",10)(19,"p")(20,"a",11),U(21,"W"),P(),U(22,"e think, "),I(23,"a",11),U(24,"W"),P(),U(25,"e analize and "),I(26,"a",11),U(27,"W"),P(),U(28,"e build the perfect user"),P(),I(29,"p"),U(30,"experiences, using the best and newest tools technologies"),P()()(),I(31,"div",12)(32,"div",13)(33,"div",14)(34,"div")(35,"div")(36,"a"),U(37,"Ecommerce "),P()(),I(38,"div")(39,"a"),U(40,"Sanity "),P()(),I(41,"div")(42,"a"),U(43,"Crypto "),P()(),I(44,"div")(45,"a"),U(46,"and more..."),P()()(),I(47,"div"),st(),I(48,"svg",15),ue(49,"line",16),P()()(),at(),I(50,"div",17)(51,"div")(52,"div")(53,"a"),U(54,"Ease to use "),P()(),I(55,"div")(56,"a"),U(57,"Animations "),P()(),I(58,"div")(59,"a"),U(60,"User interraction"),P()()(),I(61,"div"),st(),I(62,"svg",15),ue(63,"line",16),P()()()(),at(),I(64,"div",18)(65,"div"),st(),I(66,"svg",19),ue(67,"line",20),P()(),at(),I(68,"div",21)(69,"a"),U(70,"site for every sector"),P()(),I(71,"div",22),st(),I(72,"svg",19),ue(73,"line",20),P()(),at(),I(74,"div",22),st(),I(75,"svg",23),ue(76,"circle",24),P()(),at(),I(77,"div",22),st(),I(78,"svg",19),ue(79,"line",20),P()(),at(),I(80,"div",21)(81,"a"),U(82,"the most modern technologies"),P()(),I(83,"div",22),st(),I(84,"svg",19),ue(85,"line",20),P()(),at(),I(86,"div",22),st(),I(87,"svg",23),ue(88,"circle",24),P()(),at(),I(89,"div",22),st(),I(90,"svg",19),ue(91,"line",20),P()(),at(),I(92,"div",21)(93,"a"),U(94,"latest design trends"),P()()(),I(95,"div",25)(96,"div",26)(97,"div"),st(),I(98,"svg",15),ue(99,"line",16),P()(),at(),I(100,"div")(101,"div")(102,"a"),U(103,"Angular, react, nextJS "),P()(),I(104,"div")(105,"a"),U(106,"PWA integration "),P()(),I(107,"div")(108,"a"),U(109,"Firebase, mongoDB, MySQL"),P()(),I(110,"div")(111,"a"),U(112,"ThreeJS and WebGL "),P()()()()()()())}function TDe(n,e){1&n&&(I(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),U(4,"Software"),P(),I(5,"h1"),U(6,"Development"),P()(),I(7,"div",5),st(),I(8,"svg",6),ue(9,"circle",7),P(),I(10,"svg",8),ue(11,"circle",9),P(),I(12,"svg",8),ue(13,"circle",9),P(),I(14,"svg",8),ue(15,"circle",9),P(),I(16,"svg",8),ue(17,"circle",9),P()(),at(),I(18,"div",10)(19,"p"),U(20,"The first thing in every product is that the customer must love the experience of it,"),P(),I(21,"p"),U(22,"we try to create a wonderful product both for the interface and for the final user experience"),P()()(),I(23,"div",12)(24,"div",13)(25,"div",14)(26,"div")(27,"div")(28,"a"),U(29,"Gym "),P()(),I(30,"div")(31,"a"),U(32,"Management "),P()(),I(33,"div")(34,"a"),U(35,"Restaurant "),P()(),I(36,"div")(37,"a"),U(38,"and more..."),P()()(),I(39,"div"),st(),I(40,"svg",15),ue(41,"line",16),P()()()(),at(),I(42,"div",18)(43,"div"),st(),I(44,"svg",19),ue(45,"line",20),P()(),at(),I(46,"div",21)(47,"a"),U(48,"The customer first"),P()(),I(49,"div",22),st(),I(50,"svg",19),ue(51,"line",20),P()(),at(),I(52,"div",22),st(),I(53,"svg",23),ue(54,"circle",24),P()(),at(),I(55,"div",22),st(),I(56,"svg",19),ue(57,"line",20),P()(),at(),I(58,"div",21)(59,"a"),U(60,"Create something unforgettable"),P()()(),I(61,"div",25)(62,"div",26)(63,"div"),st(),I(64,"svg",15),ue(65,"line",16),P()(),at(),I(66,"div")(67,"div")(68,"a"),U(69,"Flutter, Swift, C# "),P()(),I(70,"div")(71,"a"),U(72,"Firebase, mongoDB, MySQL "),P()(),I(73,"div")(74,"a"),U(75,"Linux based server administration"),P()()()()()()())}function bDe(n,e){1&n&&(I(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),U(4,"Social"),P(),I(5,"h1"),U(6," Managing"),P()(),I(7,"div",5),st(),I(8,"svg",6),ue(9,"circle",7),P(),I(10,"svg",8),ue(11,"circle",9),P(),I(12,"svg",8),ue(13,"circle",9),P(),I(14,"svg",8),ue(15,"circle",9),P(),I(16,"svg",8),ue(17,"circle",9),P()(),at(),I(18,"div",10)(19,"p"),U(20,"We take your social profile and we make "),P(),I(21,"p"),U(22,"the perfect machine for grab customers"),P()()(),I(23,"div",12)(24,"div",13)(25,"div",14)(26,"div")(27,"div")(28,"a"),U(29,"Tiktok trends "),P()(),I(30,"div")(31,"a"),U(32,"Targeted posts "),P()(),I(33,"div")(34,"a"),U(35,"Video idealization"),P()(),I(36,"div")(37,"a"),U(38,"and more... "),P()()(),I(39,"div"),st(),I(40,"svg",15),ue(41,"line",16),P()()(),at(),I(42,"div",17)(43,"div")(44,"div")(45,"a"),U(46,"Google ads "),P()(),I(47,"div")(48,"a"),U(49,"Facebook ads"),P()(),I(50,"div")(51,"a"),U(52,"Tiktok ads "),P()()(),I(53,"div"),st(),I(54,"svg",15),ue(55,"line",16),P()()()(),at(),I(56,"div",18)(57,"div"),st(),I(58,"svg",19),ue(59,"line",20),P()(),at(),I(60,"div",21)(61,"a"),U(62,"Latest trends"),P()(),I(63,"div",22),st(),I(64,"svg",19),ue(65,"line",20),P()(),at(),I(66,"div",22),st(),I(67,"svg",23),ue(68,"circle",24),P()(),at(),I(69,"div",22),st(),I(70,"svg",19),ue(71,"line",20),P()(),at(),I(72,"div",21)(73,"a"),U(74,"Social profile administration"),P()(),I(75,"div",22),st(),I(76,"svg",19),ue(77,"line",20),P()(),at(),I(78,"div",22),st(),I(79,"svg",23),ue(80,"circle",24),P()(),at(),I(81,"div",22),st(),I(82,"svg",19),ue(83,"line",20),P()(),at(),I(84,"div",21)(85,"a"),U(86,"ads implementation"),P()()(),I(87,"div",25)(88,"div",26)(89,"div"),st(),I(90,"svg",15),ue(91,"line",16),P()(),at(),I(92,"div")(93,"div")(94,"a"),U(95,"Instagram"),P()(),I(96,"div")(97,"a"),U(98,"Tiktok"),P()(),I(99,"div")(100,"a"),U(101,"LinkedIn"),P()(),I(102,"div")(103,"a"),U(104,"Spotify"),P()()()()()()())}Bd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Bd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function yDe(n){(function sK(n){SD=n})(Gc),Hr(new Dr("database",(e,{instanceIdentifier:t})=>eX(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Rt(rK,"1.0.1",n),Rt(rK,"1.0.1","esm2017")}();let NN=(()=>{class n{constructor(){this.serchose=0}ngOnInit(){1==this.homeToServiceInside?this.serchose=1:2==this.homeToServiceInside?this.serchose=2:3==this.homeToServiceInside&&(this.serchose=3)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ah({type:n,selectors:[["app-services"]],viewQuery:function(r,i){if(1&r&&ew(wx,5),2&r){let s;Zm(s=Jm())&&(i.parent=s.first)}},inputs:{homeToServiceInside:"homeToServiceInside"},decls:4,vars:3,consts:[[1,"general"],["class","serContainer",4,"ngIf"],[1,"serContainer"],[1,"up__container"],[1,"title__cont"],[1,"sd_linea"],["xmlns","http://www.w3.org/2000/svg","version","1.1","width","50px","height","2vw"],["cx","50%","cy","50%","r","6","fill","#007E6D"],["xmlns","http://www.w3.org/2000/svg","version","1.1","width","2vw","height","2vw"],["cx","50%","cy","50%","r","3","fill","#007E6D"],[1,"paragraph"],[2,"color","#007E6D","font-weight","900"],[1,"centro__container"],[1,"centro__container__sezione1A"],[1,"centro__container__sezione__inside","ccsi_1"],["height","1cm","width","8vw"],["x1","0","y1","50%","x2","200","y2","50%","stroke","#007E6D","stroke-width","1"],[1,"centro__container__sezione__inside","ccsi_2"],[1,"centro__container__sezionecentrale"],["height","2cm","width","1.2rem"],["x1","50%","y1","0","x2","50%","y2","100","stroke","#007E6D","stroke-width","1"],["height","1cm"],[1,"figure"],["height","20px","width","1.2rem",1,"circle"],["cx","10","cy","10","r","4","stroke","#007E6D","fill","transparent","stroke-width","1"],[1,"centro__container__sezione1B"],[1,"centro__container__sezione__inside","ccsi_3"]],template:function(r,i){1&r&&(I(0,"div",0),Mi(1,wDe,113,0,"div",1),Mi(2,TDe,76,0,"div",1),Mi(3,bDe,105,0,"div",1),P()),2&r&&(qr(1),Ur("ngIf",1==i.serchose),qr(1),Ur("ngIf",2==i.serchose),qr(1),Ur("ngIf",3==i.serchose))},dependencies:[s_],styles:['.general[_ngcontent-%COMP%]{overflow-y:scroll;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);background-color:var(--background__color__black__trasparent);width:50vw;height:35vw;border:1px solid var(--octimal__green__semitrasparent);border-radius:15px;padding:1vw 2vw}.up__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:min-content 8vw auto;grid-template-rows:1fr;grid-template-areas:". . .";margin:0vw 2vw 1vw}.centro__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:20vw 10vw 20vw;grid-template-rows:auto;grid-template-areas:". . ."}.sd_linea[_ngcontent-%COMP%]{display:flex;width:5vw;margin-left:1vw;margin-top:2vw}h1[_ngcontent-%COMP%]{margin:0}.sd_linea[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin:0vw .2vw}.title__cont[_ngcontent-%COMP%]{margin-top:18px}.paragraph[_ngcontent-%COMP%]{margin-top:20px}.centro__container__sezionecentrale[_ngcontent-%COMP%]{text-align:center}.circle[_ngcontent-%COMP%]{margin-left:-2px}.centro__container__sezione2B[_ngcontent-%COMP%], .centro__container__sezione2A[_ngcontent-%COMP%]{margin:0vw 1vw}.centro__container__sezione__inside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;grid-template-areas:". ."}.ccsi_1[_ngcontent-%COMP%]{margin:1.8cm 0vw 0vw}.ccsi_2[_ngcontent-%COMP%]{margin:9.4cm 0vw 0vw}.ccsi_3[_ngcontent-%COMP%]{margin:7.8cm 0vw 0vw}']})}return n})();function xDe(n,e){1&n&&(I(0,"div",4),st(),I(1,"svg",5)(2,"text",6),U(3,"OCTIMAL"),P()()())}function SDe(n,e){1&n&&ue(0,"app-home")}function IDe(n,e){1&n&&ue(0,"app-profile")}let Ex=(()=>{class n{constructor(){this.title="octimal",this.section=1}ngOnInit(){this.startOctimal()}startOctimal(){this.section=1,setTimeout(()=>{this.section=0},2e3)}changecolor(t){0==t?(document.documentElement.style.setProperty("--background__color__black","rgba(255, 255, 255)"),document.documentElement.style.setProperty("--background__color__black__trasparent","rgba(255, 255, 255, 0.5)"),document.documentElement.style.setProperty("--color__black__light","#b7b7b7"),document.documentElement.style.setProperty("--color__black__light__trasparent","#b7b7b786"),document.documentElement.style.setProperty("--background__color__white","rgb(14, 14, 14)"),document.documentElement.style.setProperty("--devsreams","rgb(14, 14, 14)"),document.documentElement.style.setProperty("--octimal__green__title","#007e6d00"),document.documentElement.style.setProperty("--logone","#d5d5d552")):1==t&&(document.documentElement.style.setProperty("--background__color__black","rgb(14, 14, 14)"),document.documentElement.style.setProperty("--background__color__black__trasparent","rgba(14, 14, 14, 0.5)"),document.documentElement.style.setProperty("--color__black__light","rgb(23, 23, 23)"),document.documentElement.style.setProperty("--color__black__light__trasparent","rgba(23, 23, 23, 0.5)"),document.documentElement.style.setProperty("--background__color__white","#d6d6d6"),document.documentElement.style.setProperty("--devsreams","rgb(14, 14, 14, 0)"),document.documentElement.style.setProperty("--octimal__green__title","#007E6D"),document.documentElement.style.setProperty("--logone","rgb(19, 19, 19)"))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Ah({type:n,selectors:[["app-root"]],decls:5,vars:3,consts:[["id","body"],[1,"ro",2,"display","none"],["class","up",4,"ngIf"],[4,"ngIf"],[1,"up"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","90%","height","200px","viewBox","0 0 400 327","enable-background","new 0 0 400 327",0,"xml","space","preserve",1,"logoup"],["x","50%","y","50%"]],template:function(r,i){1&r&&(I(0,"div",0)(1,"div",1),Mi(2,xDe,4,0,"div",2),Mi(3,SDe,1,0,"app-home",3),Mi(4,IDe,1,0,"app-profile",3),P()()),2&r&&(qr(2),Ur("ngIf",1==i.section),qr(1),Ur("ngIf",0==i.section),qr(1),Ur("ngIf",2==i.section))},styles:["#body[_ngcontent-%COMP%]{z-index:99;width:100%!important;height:100%!important;inset:0;margin:0;padding:0}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-color:var(--background__color__black);overflow-x:hidden;margin:0;padding:0;scroll-behavior:smooth}*[_ngcontent-%COMP%]{color:var(--background__color__white)}.up[_ngcontent-%COMP%]{padding-top:30vh;text-align:center;display:block!important;position:absolute;overflow:inherit;width:100%;z-index:99}.logoup[_ngcontent-%COMP%]{grid-area:logoup;letter-spacing:0cm}.logoup[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle;dominant-baseline:middle;font-size:6em;font-weight:900;line-height:1cm;fill:#d6d6d6;font-family:Montserrat,sans-serif!important;animation:_ngcontent-%COMP%_scrollDownAnimation2 3s}.logoup[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:120%;color:#007e6d;font-family:Outfit,sans-serif!important;animation:_ngcontent-%COMP%_scrollDownAnimation1 3s}@keyframes _ngcontent-%COMP%_scrollDownAnimation1{0%{opacity:0}20%{opacity:0}80%{opacity:1}}@keyframes _ngcontent-%COMP%_scrollDownAnimation2{0%{letter-spacing:2cm}60%{letter-spacing:0cm}}.ro[_ngcontent-%COMP%]{display:block!important}@media only screen and (max-width: 600px){.logoup[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;animation:_ngcontent-%COMP%_scrollDownAnimation2 3s}@keyframes scrollDownAnimation2{0%{letter-spacing:.5cm}60%{letter-spacing:0cm}}.up[_ngcontent-%COMP%]{padding-top:40vh}}"]})}return n})();const CDe=["animazioneCentro"];function ADe(n,e){if(1&n){const t=WE();I(0,"div",187)(1,"div",188),kt("click",function(){return on(t),an(zu().serviceInsideTohome=0)}),P(),I(2,"div",189),kt("click",function(){return on(t),an(zu().serviceInsideTohome=0)}),P(),I(3,"div",190),kt("click",function(){return on(t),an(zu().serviceInsideTohome=0)}),P(),I(4,"div",191),kt("click",function(){return on(t),an(zu().serviceInsideTohome=0)}),P(),I(5,"app-services",192),kt("click",function(){return on(t),an(zu().serviceInsideTohome=1)}),P()()}if(2&n){const t=zu();qr(5),Ur("homeToServiceInside",t.homeToServiceInside)}}function MDe(n,e){1&n&&(I(0,"a"),U(1,"we have received your request, we will contact you as soon as possible"),P())}function RDe(n,e){1&n&&(I(0,"a",193),U(1,"You forget the company name"),P())}function PDe(n,e){1&n&&(I(0,"a",193),U(1,"You forget the email"),P())}function DDe(n,e){1&n&&(I(0,"div")(1,"h1"),U(2,"Welcome to octimal"),P()())}const NDe=function(n){return{"navigation-is-open":n}};let wx=(()=>{class n{constructor(t){this.appc=t,this.status=!1,this.homeToServiceInside=0,this.serviceInsideTohome=0,this.message=0}clickEvent(){this.status=!this.status}chamgemode(t){let r=document.getElementById("darkmode"),i=document.getElementById("lightmood");0==t?(i.style.setProperty("display","none"),r.style.setProperty("display","block")):1==t&&(i.style.setProperty("display","block"),r.style.setProperty("display","none")),this.appc.changecolor(t)}openServ(t){this.serviceInsideTohome=1,this.homeToServiceInside=t}closeServ(t){this.serviceInsideTohome=0==t?0:1}creaRichiesta(t,r,i,s,o,a){const c=vx();let d=[];if(XY(mx(c,"richiesta/0"),f=>{f.forEach(p=>{d.push(p.val())})}),0!=t.trim().length&&0!=i.trim().length){const f=new Date,m=function tDe(n,e){n=Ln(n),Ba("push",n._path),Va("push",e,n._path,!0);const t=VY(n._repo),r=JPe(t),i=Jp(n,r),s=Jp(n,r);let o;return o=null!=e?_x(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(mx(vx(),"richieste/"));_x(m,{id:m.key,idrequest:0,companyname:t,currentsite:r,email:i,phonenumber:s,products:o,budget:a,creazione:f.toLocaleDateString()}),this.message=1,setTimeout(()=>{this.message=0},3e3)}else 0==t.trim().length?(this.message=2,setTimeout(()=>{this.message=0},3e3)):0==i.trim().length&&(this.message=3,setTimeout(()=>{this.message=0},3e3))}ngOnInit(){this.chamgemode(1);const t=new ij,r=new yi(35,window.innerWidth/window.innerHeight,.1,100),i=new rj({alpha:!0,canvas:this.canvasElementRef.nativeElement,antialias:!0});i.setClearColor(921102,0),r.position.z=5;const s=new Tp(.7,.03,30,100),o=new Tp(.7,.03,30,100),a=new Tp(.7,.03,30,100);var c=new Aa({color:32365}),l=new Aa({color:32365}),u=new Aa({color:32365});const d=new _i(s,c),h=new _i(o,l),f=new _i(a,u),p={width:window.innerWidth,height:window.innerHeight};var g=new ie;g.x=0,g.y=0;let m=0,_=document.getElementById("sd1"),y=document.getElementById("sd2"),v=document.getElementById("targetsup"),E=document.getElementById("container_generale_inside"),w=document.getElementById("contactbut"),b=document.getElementById("target1"),x=document.getElementById("target2"),A=document.getElementById("target3"),T=document.getElementById("target4"),C=document.getElementById("scroll-down"),F=document.getElementById("ppt2"),z=document.getElementById("linee");var Q=document.getElementById("scroll");let N=[document.getElementById("point1"),document.getElementById("point2"),document.getElementById("point3"),document.getElementById("point4"),document.getElementById("point5")];const H=new R(1,0,0),K=new R(10,0,0);K.normalize();const $=new gCe;$.set(H,K),d.position.set(3,0,6),h.position.set(0,0,6),f.position.set(-3,0,6),d.rotation.x=1.5,d.rotation.y=2,h.rotation.x=3,h.rotation.y=1,f.rotation.x=7,f.rotation.y=1,i.setSize(window.innerWidth,window.innerHeight),t.add(d,h,f),window.addEventListener("mousemove",X=>{g.x=X.clientX/p.width*2-1,g.y=-X.clientY/p.height*2+1}),window.addEventListener("resize",X=>{p.width=window.innerWidth,p.height=window.innerHeight,r.aspect=p.width/p.height,r.updateProjectionMatrix(),i.setSize(p.width,p.height),i.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.render(t,r)}),window.onscroll=function(){let X=[document.getElementById("point1"),document.getElementById("point2"),document.getElementById("point3"),document.getElementById("point4"),document.getElementById("point5")];if(window.innerWidth>800)for(let he=0;he<X.length;he++)X[he].style.setProperty("background-color","rgb(214, 214, 214)"),X[he].style.setProperty("height","12px"),X[he].style.setProperty("width","12px"),X[he].style.setProperty("border-radius","80px");else if(window.innerWidth<800)for(let he=0;he<X.length;he++)X[he].style.setProperty("background-color","rgb(214, 214, 214)"),X[he].style.setProperty("height","2px"),X[he].style.setProperty("width","12px"),X[he].style.setProperty("border-radius","12px");var re=document.documentElement,ce=document.body,Ce="scrollTop",Z="scrollHeight",ne=(re[Ce]||ce[Ce])/((re[Z]||ce[Z])-re.clientHeight)*100;Q.style.width=window.innerWidth>1200?1.33*ne+"px":.95*ne+"px",window.scrollY>350&&($.layers.disableAll(),C.style.setProperty("opacity","0"),_.style.setProperty("transform","rotate(0deg)"),y.style.setProperty("transform","rotate(90deg)"),_.style.setProperty("opacity","0"),y.style.setProperty("opacity","1")),window.scrollY<350&&($.layers.enableAll(),C.style.setProperty("opacity","1"),y.style.setProperty("transform","rotate(0deg)"),_.style.setProperty("transform","rotate(90deg)"),y.style.setProperty("opacity","0"),_.style.setProperty("opacity","1")),window.innerWidth>800?(window.scrollY<350&&(m=0),window.scrollY>350&&(m=1),window.scrollY>1e3&&(m=2),window.scrollY>1800&&(m=3),window.scrollY>2601&&(m=4)):(window.scrollY<350&&(m=0),window.scrollY>350&&(m=1),window.scrollY>1200&&(m=2),window.scrollY>2e3&&(m=3),window.scrollY>2800&&(m=4))},function le(){window.innerWidth<1100?(r.fov=60,r.updateProjectionMatrix()):(r.fov=35,r.updateProjectionMatrix()),$.setFromCamera(g,r);const re=$.intersectObjects([d,h,f]);d.rotation.x+=.003,d.rotation.y+=.003,h.rotation.x+=.001,h.rotation.y+=.001,f.rotation.x+=.002,f.rotation.y+=.002,window.onmousemove=function(){re.length>0&&(cr.to(d.rotation,{duration:3,x:d.rotation.x+1,y:d.rotation.y+1}),cr.to(h.rotation,{duration:3,x:h.rotation.x+.7,y:h.rotation.y+.7}),cr.to(f.rotation,{duration:3,x:f.rotation.x+1,y:f.rotation.y+1}))},0==m?(window.innerWidth<1100?(cr.to(d.position,{duration:1,x:0,y:2.5,z:-2}),cr.to(h.position,{duration:1,x:0,y:0,z:1}),cr.to(f.position,{duration:1,x:0,y:-2.5,z:-2})):window.innerWidth>=1100&&(cr.to(d.position,{duration:2,x:2,y:0,z:-1.8}),cr.to(h.position,{duration:2,x:0,y:0,z:1.5}),cr.to(f.position,{duration:2,x:-2,y:0,z:-1.8})),N[0].style.setProperty("background-color","rgb(0, 126, 109)"),N[1].style.setProperty("background-color","rgb(214, 214, 214)"),N[2].style.setProperty("background-color","rgb(214, 214, 214)"),N[3].style.setProperty("background-color","rgb(214, 214, 214)"),N[4].style.setProperty("background-color","rgb(214, 214, 214)"),v.style.setProperty("opacity","1"),b.style.setProperty("display","none"),x.style.setProperty("display","none"),A.style.setProperty("display","none"),T.style.setProperty("display","none")):1==m?(cr.to(d.position,{duration:2,x:2,y:0,z:-1.8}),cr.to(h.position,{duration:2,x:0,y:0,z:1.5}),cr.to(f.position,{duration:2,x:-2,y:0,z:-1.8}),N[1].style.setProperty("background-color","rgb(0, 126, 109)"),N[0].style.setProperty("background-color","rgb(214, 214, 214)"),N[2].style.setProperty("background-color","rgb(214, 214, 214)"),N[3].style.setProperty("background-color","rgb(214, 214, 214)"),N[4].style.setProperty("background-color","rgb(214, 214, 214)"),v.style.setProperty("opacity","0"),b.style.setProperty("display","block"),x.style.setProperty("display","none"),A.style.setProperty("display","none"),T.style.setProperty("display","none"),z.style.setProperty("display","none"),F.style.setProperty("display","none")):2==m?(cr.to(d.position,{duration:1,x:1.7,y:-2.2,z:-7}),cr.to(h.position,{duration:1,x:1.8,y:-.3,z:-.8}),cr.to(f.position,{duration:1,x:3.8,y:1.5,z:-4}),N[2].style.setProperty("background-color","rgb(0, 126, 109)"),N[1].style.setProperty("background-color","rgb(214, 214, 214)"),N[0].style.setProperty("background-color","rgb(214, 214, 214)"),N[3].style.setProperty("background-color","rgb(214, 214, 214)"),N[4].style.setProperty("background-color","rgb(214, 214, 214)"),window.innerWidth>800&&z.style.setProperty("display","block"),F.style.setProperty("display","block"),v.style.setProperty("opacity","0"),b.style.setProperty("display","none"),x.style.setProperty("display","grid"),A.style.setProperty("display","none"),T.style.setProperty("display","none")):3==m?(cr.to(d.position,{duration:1,x:-1.7,y:-2.2,z:-7}),cr.to(h.position,{duration:1,x:-1.8,y:-.3,z:-.8}),cr.to(f.position,{duration:1,x:-3.8,y:1.5,z:-4}),N[3].style.setProperty("background-color","rgb(0, 126, 109)"),N[1].style.setProperty("background-color","rgb(214, 214, 214)"),N[2].style.setProperty("background-color","rgb(214, 214, 214)"),N[0].style.setProperty("background-color","rgb(214, 214, 214)"),N[4].style.setProperty("background-color","rgb(214, 214, 214)"),z.style.setProperty("display","none"),F.style.setProperty("display","none"),v.style.setProperty("opacity","0"),b.style.setProperty("display","none"),x.style.setProperty("display","none"),window.innerWidth>800?A.style.setProperty("display","grid"):A.style.setProperty("display","block"),T.style.setProperty("display","none")):4==m&&(cr.to(d.position,{duration:1,x:-3,y:-1,z:-7}),cr.to(h.position,{duration:1,x:0,y:0,z:-.8}),cr.to(f.position,{duration:1,x:3,y:1,z:-4}),N[4].style.setProperty("background-color","rgb(0, 126, 109)"),N[1].style.setProperty("background-color","rgb(214, 214, 214)"),N[2].style.setProperty("background-color","rgb(214, 214, 214)"),N[3].style.setProperty("background-color","rgb(214, 214, 214)"),N[0].style.setProperty("background-color","rgb(214, 214, 214)"),v.style.setProperty("opacity","0"),b.style.setProperty("display","none"),x.style.setProperty("display","none"),A.style.setProperty("display","none"),T.style.setProperty("display","grid")),E.style.setProperty("background",1==m?"rgba(14, 126, 109)":"rgba(14, 14, 14, 0)"),w.style.setProperty("opacity",4==m?"0":"1"),requestAnimationFrame(le),i.render(t,r)}()}scroll(t,r){t.scrollIntoView({behavior:"smooth"});let i=[document.getElementById("point1"),document.getElementById("point2"),document.getElementById("point3"),document.getElementById("point4"),document.getElementById("point5")];if(window.innerWidth>800)for(let s=0;s<i.length;s++)i[s].style.setProperty("background-color","rgb(214, 214, 214)"),i[s].style.setProperty("height","12px"),i[s].style.setProperty("width","12px"),i[s].style.setProperty("border-radius","80px");else if(window.innerWidth<800)for(let s=0;s<i.length;s++)i[s].style.setProperty("background-color","rgb(214, 214, 214)"),i[s].style.setProperty("height","2px"),i[s].style.setProperty("width","10px"),i[s].style.setProperty("border-radius","10px");for(let s=0;s<4;s++)"point1"==r?(i[0].style.setProperty("background-color","rgb(0, 126, 109)"),i[1].style.setProperty("background-color","rgb(214, 214, 214)"),i[2].style.setProperty("background-color","rgb(214, 214, 214)"),i[3].style.setProperty("background-color","rgb(214, 214, 214)"),i[4].style.setProperty("background-color","rgb(214, 214, 214)")):"point2"==r?(i[0].style.setProperty("background-color","rgb(214, 214, 214)"),i[1].style.setProperty("background-color","rgb(0, 126, 109)"),i[2].style.setProperty("background-color","rgb(214, 214, 214)"),i[3].style.setProperty("background-color","rgb(214, 214, 214)"),i[4].style.setProperty("background-color","rgb(214, 214, 214)")):"point3"==r?(i[0].style.setProperty("background-color","rgb(214, 214, 214)"),i[1].style.setProperty("background-color","rgb(214, 214, 214)"),i[2].style.setProperty("background-color","rgb(0, 126, 109)"),i[3].style.setProperty("background-color","rgb(214, 214, 214)"),i[4].style.setProperty("background-color","rgb(214, 214, 214)")):"point4"==r?(i[0].style.setProperty("background-color","rgb(214, 214, 214)"),i[1].style.setProperty("background-color","rgb(214, 214, 214)"),i[2].style.setProperty("background-color","rgb(214, 214, 214)"),i[3].style.setProperty("background-color","rgb(0, 126, 109)"),i[4].style.setProperty("background-color","rgb(214, 214, 214)")):"point5"==r&&(i[0].style.setProperty("background-color","rgb(214, 214, 214)"),i[1].style.setProperty("background-color","rgb(214, 214, 214)"),i[2].style.setProperty("background-color","rgb(214, 214, 214)"),i[3].style.setProperty("background-color","rgb(214, 214, 214)"),i[4].style.setProperty("background-color","rgb(0, 126, 109)"))}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(Ex))};static#t=this.\u0275cmp=Ah({type:n,selectors:[["app-home"]],viewQuery:function(r,i){if(1&r&&(ew(CDe,7),ew(NN,5)),2&r){let s;Zm(s=Jm())&&(i.canvasElementRef=s.first),Zm(s=Jm())&&(i.child1=s.first)}},decls:444,vars:8,consts:[["viewBox","0 0 100 300","xmlns","http://www.w3.org/2000/svg",1,"logoBeta_devdr",3,"click"],["x","-10","y","-56"],["x","10","y","-18"],["id","target"],["target",""],[1,"container_generale"],["id","container_generale_inside"],[1,"latlist1"],[1,"latlistinterno1"],[1,"logo"],["viewBox","0 0 100 23","xmlns","http://www.w3.org/2000/svg",3,"click"],["x","10","y","15"],[1,"linealeft"],[1,"ll_inside"],["id","scroll"],[1,"buttonCont","textcont"],["id","contactbut",3,"click"],[1,"latlist2"],[1,"latlistinterno2"],[1,"logo_container"],[1,"cd-nav-trigger",2,"cursor","pointer",3,"click"],[3,"ngClass"],["id","cd-nav",1,"cd-nav"],[1,"cd-nav-trigger-inside_profile"],[1,"cd-nav-trigger-inside"],[3,"click"],[1,"cd-navigation-wrapper"],["id","targets_container",1,"targets_container","liltextcont"],["id","point1",2,"background-color","var(--octimal__green)",3,"click"],["id","point1a"],["id","point2",3,"click"],["id","point2a"],["id","point3",3,"click"],["id","point3a"],["id","point4",3,"click"],["id","point4a"],["id","point5",3,"click"],["id","point5a"],[1,"scrollDown_container"],[1,"scrollDown","medtextcont"],["id","sd1"],["id","sd2",3,"click"],[1,"scrollDown-animation"],["id","scroll-down"],[1,"gen"],[1,"logoBeta",2,"display","none"],[1,"betaParte"],["id","logodesc",1,"logodesc"],["_ngcontent-epd-c18","","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 140 50",1,"logoup"],["_ngcontent-epd-c18","","y","42","fill","red","text-anchor","middle","alignment-baseline","central","x","70"],[1,"portable__voices"],[1,"up"],["id","targetsup"],[1,"linea"],[1,"lineainternasup"],["height","40px","width","100%"],["x1","0","y1","10","x2","100%","y2","10",2,"stroke-width","2"],["id","darkmode",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","40","width","40"],["d","M20.083 33.333q-5.541 0-9.437-3.895Q6.75 25.542 6.75 20q0-5.083 3.312-8.792Q13.375 7.5 18.25 6.833h.333q-.791 1.209-1.229 2.646-.437 1.438-.437 3.021 0 4.458 3.125 7.562 3.125 3.105 7.541 3.105 1.542 0 3-.417 1.459-.417 2.667-1.167-.042.125-.021.167.021.042.021.125-.667 4.875-4.375 8.167-3.708 3.291-8.792 3.291Zm0-1.416q3.959 0 7.021-2.271 3.063-2.271 4.229-5.646-.916.292-1.854.438-.937.145-1.896.145-5 0-8.541-3.541Q15.5 17.5 15.5 12.5q0-.917.167-1.833.166-.917.458-1.917-3.5 1.25-5.729 4.333Q8.167 16.167 8.167 20q0 4.958 3.479 8.438 3.479 3.479 8.437 3.479Zm-.333-11.584Z"],["id","lightmood",3,"click"],["d","M3.708 20.708v-1.416h8.25v1.416ZM13.75 14.75l-2.917-2.917 1-1 2.917 2.917Zm5.542-2.792v-8.25h1.416v8.25Zm6.958 2.792-1-1 2.917-2.917 1 1Zm1.792 5.958v-1.416h8.25v1.416ZM20 23.125q-1.333 0-2.229-.896-.896-.896-.896-2.229 0-1.333.896-2.229.896-.896 2.229-.896 1.333 0 2.229.896.896.896.896 2.229 0 1.333-.896 2.229-.896.896-2.229.896Zm8.25 6.125-3-3 1-1 3 3Zm-16.5 0-1-1 3-3 1 1Zm7.542 7.042v-8.25h1.416v8.25Z"],[1,"nontitle"],[1,"descrizione","medtextcont"],[1,"descp1",3,"click"],[1,"descp3",3,"click"],[1,"descp2",3,"click"],[1,"presentation"],["target1",""],["id","target1"],[2,"display","flex"],[1,"dots4"],["viewBox","0 0 10 10","xmlns","http://www.w3.org/2000/svg"],["cx","50%","cy","50%","r","5","fill","#d6d6d6"],["cx","50%","cy","50%","r","2","fill","#d6d6d6"],[1,"pcont","textcont"],[1,"img_presentation"],["src","../../../assets/teamman.png",1,"ip__desk"],["src","../../../assets/teamman - Copia.png",1,"ip__phone"],[1,"center"],[1,"prodotti"],["target2",""],["id","target2"],["id","serins1",4,"ngIf"],[1,"prodottiInside"],[1,"prodotti_titles"],["id","serins2"],["id","ppt1",1,"prodotti_pt1"],[1,"dots",2,"display","flex"],["cx","50%","cy","50%","r","5","fill","#007E6D"],["cx","50%","cy","50%","r","2","fill","#007E6D"],[1,"textcont"],["id","linee"],[1,"linea1"],["id","linee2",1,"linee2"],[1,"linea2"],[1,"linea3"],[1,"linea4"],["id","ppt2",1,"prodotti_pt2"],["id","pne1",1,"prodotti_navbar_esterno"],[1,"prodotti_navbar_interno"],[1,"medtextcont"],["id","pne2",1,"prodotti_navbar_esterno"],[2,"color","#007E6D","font-weight","900"],["id","pne3",1,"prodotti_navbar_esterno"],[1,"progetti"],["target3",""],["id","target3",1,"progettiInside"],[1,"progetti_pt1"],[1,"progetti_pt2"],[1,"dots2",2,"display","flex"],[2,"background-color","var(--octimal__green)"],[1,"progetti_pt3"],["id","progcard"],[1,"card_outside"],[1,"cerchiocard"],["href","http://localhost:55139",1,"card"],[1,"c__prod"],[1,"card"],["href","https://www.assoleg.it/",1,"medtextcont"],[1,"card_outside",2,"display","none"],["href","https://lafogada.it/",1,"medtextcont"],["href","https://www.chizzolavitivinicola.it/",1,"medtextcont"],[2,"margin-top","1.0vw"],[1,"medtextcont",3,"click"],[1,"Contatti"],["target4",""],["id","target4",1,"contattiInside"],[1,"contatti_pt1"],[1,"dots3",2,"display","flex"],["href","mailto:octimal.official@gmail.com"],[1,"contatti_pt2"],[1,"formgroup_container"],[1,"formgroup"],[1,"formgroup_inside1"],["type","text","placeholder","Company name",1,"medtextcont"],["companyname",""],["type","text","placeholder","current site link",1,"medtextcont"],["currentsite",""],["type","email","placeholder","email",1,"medtextcont"],["email",""],["type","text","placeholder","phone number",1,"medtextcont"],["phonenumber",""],["list","products","placeholder","I'm interested in...",1,"medtextcont"],["products",""],["id","products"],["value","UX/UI deisgn"],["value","App/Web Development"],["value","Branding"],["value","other..."],["list","budget","placeholder","Budget",1,"medtextcont"],["budget",""],["id","budget"],["value","100$ - 1000$"],["value","1000$ - 5000$"],["value","5000$ - 8000$"],["placeholder","Tell us about your project",1,"medtextcont"],[4,"ngIf"],["style","color:red !important",4,"ngIf"],[1,"submitinfo"],[1,"sotto"],[1,"f1"],[1,"f_c1"],["viewBox","0 0 150 23","xmlns","http://www.w3.org/2000/svg",1,"svg__f_c1__1"],["x","36","y","20"],["viewBox","0 0 150 23","xmlns","http://www.w3.org/2000/svg",1,"svg__f_c1__2"],["x","0","y","20"],[1,"liltextcont"],[1,"f_c2","medtextcont"],[2,"cursor","pointer",3,"click"],[2,"display","none"],[1,"f_c3","medtextcont"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center","height","100px"],["href","https://www.instagram.com/octimaldigital"],["width","40px","height","40px","viewBox","0 0 24 24","fill","#007E6D","xmlns","http://www.w3.org/2000/svg",2,"margin","10px"],["fill-rule","evenodd","clip-rule","evenodd","d","M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z","fill","#007E6D"],["d","M18 5C17.4477 5 17 5.44772 17 6C17 6.55228 17.4477 7 18 7C18.5523 7 19 6.55228 19 6C19 5.44772 18.5523 5 18 5Z","fill","#007E6D"],["fill-rule","evenodd","clip-rule","evenodd","d","M1.65396 4.27606C1 5.55953 1 7.23969 1 10.6V13.4C1 16.7603 1 18.4405 1.65396 19.7239C2.2292 20.8529 3.14708 21.7708 4.27606 22.346C5.55953 23 7.23969 23 10.6 23H13.4C16.7603 23 18.4405 23 19.7239 22.346C20.8529 21.7708 21.7708 20.8529 22.346 19.7239C23 18.4405 23 16.7603 23 13.4V10.6C23 7.23969 23 5.55953 22.346 4.27606C21.7708 3.14708 20.8529 2.2292 19.7239 1.65396C18.4405 1 16.7603 1 13.4 1H10.6C7.23969 1 5.55953 1 4.27606 1.65396C3.14708 2.2292 2.2292 3.14708 1.65396 4.27606ZM13.4 3H10.6C8.88684 3 7.72225 3.00156 6.82208 3.0751C5.94524 3.14674 5.49684 3.27659 5.18404 3.43597C4.43139 3.81947 3.81947 4.43139 3.43597 5.18404C3.27659 5.49684 3.14674 5.94524 3.0751 6.82208C3.00156 7.72225 3 8.88684 3 10.6V13.4C3 15.1132 3.00156 16.2777 3.0751 17.1779C3.14674 18.0548 3.27659 18.5032 3.43597 18.816C3.81947 19.5686 4.43139 20.1805 5.18404 20.564C5.49684 20.7234 5.94524 20.8533 6.82208 20.9249C7.72225 20.9984 8.88684 21 10.6 21H13.4C15.1132 21 16.2777 20.9984 17.1779 20.9249C18.0548 20.8533 18.5032 20.7234 18.816 20.564C19.5686 20.1805 20.1805 19.5686 20.564 18.816C20.7234 18.5032 20.8533 18.0548 20.9249 17.1779C20.9984 16.2777 21 15.1132 21 13.4V10.6C21 8.88684 20.9984 7.72225 20.9249 6.82208C20.8533 5.94524 20.7234 5.49684 20.564 5.18404C20.1805 4.43139 19.5686 3.81947 18.816 3.43597C18.5032 3.27659 18.0548 3.14674 17.1779 3.0751C16.2777 3.00156 15.1132 3 13.4 3Z","fill","#007E6D"],["href","https://www.linkedin.com/company/octimal"],["d","M6.5 8C7.32843 8 8 7.32843 8 6.5C8 5.67157 7.32843 5 6.5 5C5.67157 5 5 5.67157 5 6.5C5 7.32843 5.67157 8 6.5 8Z","fill","#007E6D"],["d","M5 10C5 9.44772 5.44772 9 6 9H7C7.55228 9 8 9.44771 8 10V18C8 18.5523 7.55228 19 7 19H6C5.44772 19 5 18.5523 5 18V10Z","fill","#007E6D"],["d","M11 19H12C12.5523 19 13 18.5523 13 18V13.5C13 12 16 11 16 13V18.0004C16 18.5527 16.4477 19 17 19H18C18.5523 19 19 18.5523 19 18V12C19 10 17.5 9 15.5 9C13.5 9 13 10.5 13 10.5V10C13 9.44771 12.5523 9 12 9H11C10.4477 9 10 9.44772 10 10V18C10 18.5523 10.4477 19 11 19Z","fill","#007E6D"],["fill-rule","evenodd","clip-rule","evenodd","d","M20 1C21.6569 1 23 2.34315 23 4V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H20ZM20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20Z","fill","#007E6D"],[1,"f2",2,"text-align","center"],[2,"font-size","1rem"],["id","animazionecentro"],["animazioneCentro",""],["id","serins1"],[1,"asiextern",3,"click"],[1,"asiextern1",3,"click"],[1,"asiextern2",3,"click"],[1,"asiextern3",3,"click"],[1,"asi",3,"homeToServiceInside","click"],[2,"color","red !important"]],template:function(r,i){if(1&r){const s=WE();st(),I(0,"svg",0),kt("click",function(){on(s);const a=en(6);return an(i.scroll(a,"point1"))}),I(1,"text",1),U(2,"developing"),P(),I(3,"text",2),U(4,"dreams"),P()(),at(),I(5,"main",3,4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),st(),I(12,"svg",10),kt("click",function(){on(s);const a=en(6);return an(i.scroll(a,"point1"))}),I(13,"text",11),U(14,"OCTIMAL"),P()()(),at(),I(15,"div",12)(16,"div",13),ue(17,"div",14),P()(),I(18,"div",15)(19,"button",16),kt("click",function(){on(s);const a=en(328);return an(i.scroll(a,"point5"))}),U(20,"Contact us"),P()()()(),I(21,"div",17)(22,"div",18)(23,"div",19)(24,"a",20),kt("click",function(){return i.clickEvent()}),U(25,"Menu "),P(),I(26,"div",21)(27,"div",22)(28,"div",23)(29,"div",24)(30,"h1",25),kt("click",function(){return i.appc.section=2,i.clickEvent()}),U(31,"Profile "),P()(),I(32,"div")(33,"h2",25),kt("click",function(){return i.clickEvent()}),U(34,"Close "),P()()(),I(35,"div",26)(36,"div")(37,"h1",25),kt("click",function(){on(s);const a=en(6);return i.scroll(a,"point1"),an(i.clickEvent())}),U(38,"Home"),P()(),I(39,"div")(40,"h1",25),kt("click",function(){on(s);const a=en(133);return i.scroll(a,"point2"),an(i.clickEvent())}),U(41,"Wo we are"),P()(),I(42,"div")(43,"h1",25),kt("click",function(){on(s);const a=en(163);return i.scroll(a,"point3"),an(i.clickEvent())}),U(44,"Services"),P()(),I(45,"div")(46,"h1",25),kt("click",function(){on(s);const a=en(233);return i.scroll(a,"point4"),an(i.clickEvent())}),U(47,"Projects"),P()(),I(48,"div")(49,"h1",25),kt("click",function(){on(s);const a=en(328);return i.scroll(a,"point5"),an(i.clickEvent())}),U(50,"Contact us"),P()()()()()(),ue(51,"div"),I(52,"div",27)(53,"div")(54,"button",28),kt("click",function(){on(s);const a=en(6);return an(i.scroll(a,"point1"))}),I(55,"a",29),U(56,"Home"),P()()(),I(57,"div")(58,"button",30),kt("click",function(){on(s);const a=en(133);return an(i.scroll(a,"point2"))}),I(59,"a",31),U(60,"Wo we are"),P()()(),I(61,"div")(62,"button",32),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),I(63,"a",33),U(64,"Services"),P()()(),I(65,"div")(66,"button",34),kt("click",function(){on(s);const a=en(233);return an(i.scroll(a,"point4"))}),I(67,"a",35),U(68,"Projects"),P()()(),I(69,"div")(70,"button",36),kt("click",function(){on(s);const a=en(328);return an(i.scroll(a,"point5"))}),I(71,"a",37),U(72,"Contact us"),P()()()(),ue(73,"div"),I(74,"div",38)(75,"div",39)(76,"div",40)(77,"a"),U(78,"SCROLL DOWN"),P()(),I(79,"div",41),kt("click",function(){on(s);const a=en(6);return an(i.scroll(a,"point1"))}),I(80,"a"),U(81,"BACK ON TOP"),P()()(),I(82,"div",42),ue(83,"div",43),P()()()(),I(84,"div",44)(85,"div",45)(86,"div",46)(87,"div",47)(88,"div",9),st(),I(89,"svg",48)(90,"text",49),U(91,"OCTIMAL"),P()()(),at(),I(92,"div",50)(93,"div")(94,"a",25),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),U(95,"Web/App development"),P()(),I(96,"div")(97,"a",25),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),U(98,"UX/UI design"),P()(),I(99,"div")(100,"a",25),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),U(101,"Branding"),P()()()()()(),I(102,"div",51)(103,"div",52)(104,"div",53)(105,"div",54),st(),I(106,"svg",55),ue(107,"line",56),P()(),at(),I(108,"div")(109,"div",57),kt("click",function(){return i.chamgemode(1)}),st(),I(110,"svg",58),ue(111,"path",59),P()(),at(),I(112,"div",60),kt("click",function(){return i.chamgemode(0)}),st(),I(113,"svg",58),ue(114,"path",61),P()()(),at(),I(115,"div",54),st(),I(116,"svg",55),ue(117,"line",56),P()()(),at(),I(118,"div",47)(119,"div")(120,"h1"),U(121,"Developing"),P(),I(122,"h1"),U(123,"dreams"),P()(),I(124,"div",62)(125,"div",63)(126,"a",64),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),U(127,"UX/UI design"),P(),I(128,"a",65),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),U(129,"Branding"),P(),I(130,"a",66),kt("click",function(){on(s);const a=en(163);return an(i.scroll(a,"point3"))}),U(131,"Web/App development"),P()()()()()(),I(132,"div",67,68)(134,"div",69)(135,"h1"),U(136,"We bring ideas"),P(),I(137,"h1"),U(138," into reality"),P(),I(139,"div",70)(140,"div",71),st(),I(141,"svg",72),ue(142,"circle",73),P(),I(143,"svg",72),ue(144,"circle",74),P(),I(145,"svg",72),ue(146,"circle",74),P(),I(147,"svg",72),ue(148,"circle",74),P(),I(149,"svg",72),ue(150,"circle",73),P()(),at(),I(151,"div",75)(152,"p"),U(153,"We are a creative studio born in Italy that builds highly customized digital products, our goal is to take your ideas and create something extraordinary with them using the most recent technologies."),P(),I(154,"p"),U(155,"We work quickly, clearly, with a particular eye on safety, and the first thing in our mind is always our costumers."),P(),I(156,"a"),U(157,"- octimal team -"),P()(),I(158,"div",76),ue(159,"img",77)(160,"img",78),P()()()(),I(161,"div",79)(162,"div",80,81)(164,"div",82),Mi(165,ADe,6,1,"div",83),I(166,"div",84)(167,"div",85)(168,"h1"),U(169,"What"),P(),I(170,"h1"),U(171,"we offer"),P(),I(172,"h1"),U(173,"to you"),P()(),I(174,"div",86)(175,"div",87)(176,"div")(177,"div",88),st(),I(178,"svg",72),ue(179,"circle",89),P(),I(180,"svg",72),ue(181,"circle",90),P(),I(182,"svg",72),ue(183,"circle",90),P(),I(184,"svg",72),ue(185,"circle",90),P(),I(186,"svg",72),ue(187,"circle",90),P()(),at(),I(188,"p",91),U(189," We use the most powerful and updated technologies to plasmate what you need."),P()()(),I(190,"div",92),ue(191,"div",93),I(192,"div",94),ue(193,"div",95)(194,"div",96)(195,"div",97),P()(),I(196,"div",98)(197,"div",99)(198,"div",100)(199,"h2"),U(200,"UX/UI design"),P(),I(201,"div")(202,"p",101),U(203,"The first thing in every product is that the customer must love the experience of it,"),P(),I(204,"p",101),U(205,"we try to create a wonderful product both for the interface and for the final user experience."),P()()()(),I(206,"div",102)(207,"div",100)(208,"h2"),U(209,"Web/App development"),P(),I(210,"div")(211,"p",101)(212,"a",103),U(213,"W"),P(),U(214,"e think, "),I(215,"a",103),U(216,"W"),P(),U(217,"e analize and "),I(218,"a",103),U(219,"W"),P(),U(220,"e build the perfect user"),P(),I(221,"p",101),U(222,"experiences, using the best and newest tools technologies."),P()()()(),I(223,"div",104)(224,"div",100)(225,"h2"),U(226,"Branding"),P(),I(227,"div")(228,"p",101),U(229,"We take your social profile and we make"),P(),I(230,"p",101),U(231,"the perfect machine for grab customers."),P()()()()()()()()(),I(232,"div",105,106)(234,"div",107)(235,"div",108)(236,"h1"),U(237,"Our"),P(),I(238,"h1"),U(239,"Works"),P()(),I(240,"div",109)(241,"div")(242,"div",110),st(),I(243,"svg",72),ue(244,"circle",89),P(),I(245,"svg",72),ue(246,"circle",90),P(),I(247,"svg",72),ue(248,"circle",90),P(),I(249,"svg",72),ue(250,"circle",90),P(),I(251,"svg",72),ue(252,"circle",90),P()(),at(),I(253,"div",91)(254,"p"),U(255," we have always dealt with our personal products and now we have decided to looking at new horizons by opening our studio to projects of new customers. "),P(),I(256,"a",111),U(257,"Dream together, grow up together!"),P()()()(),I(258,"div",112)(259,"div",113)(260,"div",114),ue(261,"div",115),I(262,"div",116)(263,"div",117)(264,"h2"),U(265,"Sporty"),P(),I(266,"a",101),U(267,"building"),P()(),I(268,"p",101),U(269,"App that digitalize every aspect of sport teams."),P()()(),I(270,"div",114),ue(271,"div",115),I(272,"div",118)(273,"div",117)(274,"h2"),U(275,"Assoleg"),P(),I(276,"a",119),U(277,"open"),P()(),I(278,"p",101),U(279,"An important project for a legal studio in Trentino."),P()()(),I(280,"div",120),ue(281,"div",115),I(282,"div",118)(283,"div",117)(284,"h2"),U(285,"Gamo"),P(),I(286,"a",101),U(287,"building"),P()(),I(288,"p",101),U(289,"Our game world that connect the virtual reality to the real world."),P()()(),I(290,"div",114),ue(291,"div",115),I(292,"div",118)(293,"div",117)(294,"h2"),U(295,"LaFogada"),P(),I(296,"a",121),U(297,"open"),P()(),I(298,"p",101),U(299,"A website for one of the most famous mountain running competitions in Trentino."),P()()(),I(300,"div",114),ue(301,"div",115),I(302,"div",118)(303,"div",117)(304,"h2"),U(305,"Chizzola vini"),P(),I(306,"a",122),U(307,"open"),P()(),I(308,"p",101),U(309,"We took care of the branding and website of the Chizzola brothers' winery"),P()()(),I(310,"div",114),ue(311,"div",115),I(312,"div",118)(313,"div",117)(314,"h2"),U(315,"Memoorables"),P(),I(316,"a",101),U(317,"Building"),P()(),I(318,"p",101),U(319,"A group of young people who want to tell stories of people who hide under a layer of social silence"),P()()(),I(320,"div",114),ue(321,"div",115),I(322,"div",118)(323,"h2",123),U(324,"Your next project"),P(),I(325,"a",124),kt("click",function(){on(s);const a=en(328);return an(i.scroll(a,"point5"))}),U(326,"Let's create"),P()()()()()()(),I(327,"div",125,126)(329,"div",127)(330,"div",128)(331,"div")(332,"h1"),U(333,"Let's"),P(),I(334,"h1"),U(335,"begin"),P()(),I(336,"div")(337,"div",129),st(),I(338,"svg",72),ue(339,"circle",89),P(),I(340,"svg",72),ue(341,"circle",90),P(),I(342,"svg",72),ue(343,"circle",90),P(),I(344,"svg",72),ue(345,"circle",90),P(),I(346,"svg",72),ue(347,"circle",90),P()(),at(),I(348,"p",91),U(349,"Fill out our form or "),I(350,"a",130),U(351,"send us an email"),P(),U(352," to start this journey together."),P()()(),I(353,"div",131)(354,"div",132)(355,"div",133)(356,"div",134)(357,"div"),ue(358,"input",135,136),P(),I(360,"div"),ue(361,"input",137,138),P(),I(363,"div"),ue(364,"input",139,140),P(),I(366,"div"),ue(367,"input",141,142),P(),I(369,"div"),ue(370,"input",143,144),I(372,"datalist",145),ue(373,"option",146)(374,"option",147)(375,"option",148)(376,"option",149),P()(),I(377,"div"),ue(378,"input",150,151),I(380,"datalist",152),ue(381,"option",153)(382,"option",154)(383,"option",155),P()()(),I(384,"div")(385,"label"),ue(386,"textarea",156),P()(),Mi(387,MDe,2,0,"a",157),Mi(388,RDe,2,0,"a",158),Mi(389,PDe,2,0,"a",158),I(390,"div",159)(391,"button",124),kt("click",function(){on(s);const a=en(359),c=en(362),l=en(365),u=en(368),d=en(371),h=en(379);return an(i.creaRichiesta(a.value,c.value,l.value,u.value,d.value,h.value))}),U(392,"Submit"),P()()()()()()()(),I(393,"div",160)(394,"div",161)(395,"div",162)(396,"div")(397,"div"),st(),I(398,"svg",163)(399,"text",164),U(400,"OCTIMAL"),P()(),I(401,"svg",165)(402,"text",166),U(403,"OCTIMAL"),P()()(),at(),I(404,"a",167),U(405,"Developing dreams"),P()()(),I(406,"div",168)(407,"ul")(408,"li")(409,"a",130),U(410,"Join octimal team"),P()(),I(411,"li")(412,"a",169),kt("click",function(){on(s);const a=en(133);return an(i.scroll(a,"point2"))}),U(413,"Who we are?"),P()(),I(414,"li",130)(415,"a"),U(416,"Assistance"),P()(),I(417,"li",170)(418,"a"),U(419,"Frequent questions"),P()(),I(420,"li")(421,"a",130),U(422,"help us improve ourselves"),P()()()(),I(423,"div",171)(424,"div",172)(425,"div",70)(426,"a",173),st(),I(427,"svg",174),ue(428,"path",175)(429,"path",176)(430,"path",177),P()(),at(),I(431,"a",178),st(),I(432,"svg",174),ue(433,"path",179)(434,"path",180)(435,"path",181)(436,"path",182),P()()()()()(),at(),I(437,"div",183)(438,"p",184),U(439,"octimal - all rights reserved 2023."),P()()()()()()(),I(440,"div",185),ue(441,"canvas",null,186),P(),Mi(443,DDe,3,0,"div",157)}2&r&&(qr(26),Ur("ngClass",KG(6,NDe,!0===i.status)),qr(139),Ur("ngIf",1==i.serviceInsideTohome),qr(222),Ur("ngIf",1==i.message),qr(1),Ur("ngIf",2==i.message),qr(1),Ur("ngIf",3==i.message),qr(54),Ur("ngIf",1==i.message))},styles:['#animazionecentro[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;outline:none}html[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.cd-nav-trigger-inside[_ngcontent-%COMP%]{text-align:left!important}.cd-nav-trigger-inside_profile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 100px;grid-template-rows:1fr;grid-template-areas:". .";margin:4vw 10vw 0vw}.cd-nav-trigger-inside_profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;cursor:pointer;color:var(--devsreams);font-family:Outfit-Thin,sans-serif!important;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:var(--background__color__white);font-size:4rem;display:block;animation:_ngcontent-rkp-c18_logoCreate 2.5s;text-shadow:var(--octimal__green__title) 0px 0px 40px}.cd-nav-trigger-inside_profile[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer}.cd-navigation-wrapper[_ngcontent-%COMP%]{margin:4vw 10vw 0vw 0vw}.cd-nav[_ngcontent-%COMP%]{position:fixed;z-index:3;top:0;left:0;height:100%;width:100%;background-color:var(--octimal__green);visibility:hidden;transition:visibility 0s .7s;transform:translate(110%);transition:transform .5s;text-align:right!important}.navigation-is-open[_ngcontent-%COMP%]   .cd-nav[_ngcontent-%COMP%]{visibility:visible;transition:visibility 0s .7s;transform:translate(0);transition:transform .5s}.cd-navigation-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{cursor:pointer;color:var(--devsreams);font-family:Outfit-Thin,sans-serif!important;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:var(--background__color__white);font-size:4rem;animation:_ngcontent-rkp-c18_logoCreate 2.5s;text-shadow:var(--octimal__green__title) 0px 0px 40px}.cd-navigation-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover{color:var(--background__color__white);margin-right:1cm}.textcont[_ngcontent-%COMP%]{font-size:1.5rem}.liltextcont[_ngcontent-%COMP%]{font-size:.8rem}.medtextcont[_ngcontent-%COMP%]{font-size:1rem}p[_ngcontent-%COMP%]{text-rendering:optimizeLegibility}.container_generale[_ngcontent-%COMP%]{display:block!important;position:absolute;overflow:inherit;width:100%;z-index:90}#container_generale_inside[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:200px auto 150px;grid-template-rows:1fr;grid-template-areas:"latlist1 gen latlist2"}.latlist2[_ngcontent-%COMP%]{grid-area:latlist2;z-index:2;padding:2vw}.latlist1[_ngcontent-%COMP%]{grid-area:latlist1;z-index:2;padding:2vw}.gen[_ngcontent-%COMP%]{grid-area:gen;padding:2vw 0vw}.latlistinterno1[_ngcontent-%COMP%]{position:fixed;text-align:center;display:grid;height:85%;grid-template-columns:3.5cm;grid-template-rows:.2fr 2fr .1fr 2fr .2fr;grid-template-areas:"logo"".""linealeft"".""buttonCont"}.latlistinterno2[_ngcontent-%COMP%]{position:fixed;text-align:center;display:grid;height:85%;grid-template-columns:1cm;grid-template-rows:1fr 1fr 2fr 1fr 1fr;grid-template-areas:"."".""."".""."}.logo[_ngcontent-%COMP%]{opacity:1;z-index:99;grid-area:logo}.logo[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:var(--background__color__white)}.linealeft[_ngcontent-%COMP%]{grid-area:linealeft}.buttonCont[_ngcontent-%COMP%]{grid-area:buttonCont}.targets_container[_ngcontent-%COMP%]{margin:5vh 0vw 5vh 0vw;opacity:1;pointer-events:all}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:1cm;margin-bottom:0vw;margin-top:2vw}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border-radius:80px;border:2px solid rgb(214,214,214);height:12px;width:12px;background-color:var(--background__color__white)}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0000!important;border:2px solid var(--octimal__green);height:12px;width:12px}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;opacity:0;margin-left:-2cm;width:4cm;margin-top:-7px;line-height:.7rem;pointer-events:none}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{margin-left:-3.2cm!important;opacity:1!important}.up[_ngcontent-%COMP%]{z-index:1}.sole[_ngcontent-%COMP%]{cursor:pointer;z-index:90;fill:var(--background__color__white)}.sole[_ngcontent-%COMP%]:hover{height:30px;width:30px;fill:var(--octimal__green)}.logo_container[_ngcontent-%COMP%]{height:30px}.linea[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 40px 1fr;grid-template-rows:30px;grid-template-areas:". . .";width:100%}#darkmode[_ngcontent-%COMP%]{display:block;margin-top:-10px;cursor:pointer}#lightmood[_ngcontent-%COMP%]{display:none;margin-top:-10px;cursor:pointer}#darkmode[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--background__color__white)}#lightmood[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:var(--background__color__white)}#darkmode[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{stroke:var(--octimal__green)}#lightmood[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{stroke:var(--octimal__green)}.lineainternasup[_ngcontent-%COMP%]{margin:0 1vw}.lineainternasup[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:var(--octimal__green)}.ll_inside[_ngcontent-%COMP%]{margin-top:7vw;background-color:var(--lateralbar);width:3.5cm;height:5px;border-radius:4px}#scroll[_ngcontent-%COMP%]{transition-duration:0s!important;width:0%;background:var(--octimal__green);height:5px;border-radius:4px}.logodesc[_ngcontent-%COMP%]{grid-area:logodesc;margin-top:18vh;text-align:center}.logodesc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--devsreams);font-family:Outfit-Thin,sans-serif!important;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:var(--background__color__white);font-size:8rem;animation:_ngcontent-%COMP%_logoCreate 2.5s;text-shadow:var(--octimal__green__title) 0px 0px 40px;transition-duration:1s;margin:0}.logodesc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover{text-shadow:var(--octimal__green__title) 0px 0px 60px}@keyframes _ngcontent-%COMP%_logoCreate{0%{opacity:0;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:rgba(0,0,0,0)}to{opacity:1;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:var(--background__color__white)}}.descrizione[_ngcontent-%COMP%]{margin-top:6vw;text-align:center}.descrizione[_ngcontent-%COMP%]   .descp1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pcreate 1s ease;width:4cm;margin:0vw 1vw;border-bottom:2px solid var(--octimal__green)}.descrizione[_ngcontent-%COMP%]   .descp2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pcreate 1.5s ease;width:4cm;margin:0vw 1vw;border-bottom:2px solid var(--octimal__green)}.descrizione[_ngcontent-%COMP%]   .descp3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pcreate 2s ease;width:4cm;margin:0vw 1vw;border-bottom:2px solid var(--octimal__green)}.descrizione[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:1cm;-webkit-text-decoration:underline 2px var(--octimal__green);text-decoration:underline 2px var(--octimal__green);text-underline-offset:6px;text-shadow:var(--background__color__black) 0px 5px 15px;transition-duration:.2s;margin:4vw 0vw}@keyframes _ngcontent-%COMP%_pcreate{0%{opacity:0;margin-top:30vw}to{opacity:1;margin-top:0vw}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0}to{opacity:1}}#contactbut[_ngcontent-%COMP%]{margin-top:3vw;width:3.5cm;border:1px solid var(--octimal__green__semitrasparent);border-radius:1.2rem;background:rgba(255,0,0,0)!important;padding:1vw;cursor:pointer;z-index:99}#contactbut[_ngcontent-%COMP%]:hover{box-shadow:10px 10px 25px #007e6d56,-10px -10px 25px #007e6d56;background:var(--octimal__green)}.logo[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif!important;cursor:pointer}.scrollDown_container[_ngcontent-%COMP%]{padding-top:3vw}.scrollDown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.scrollDown[_ngcontent-%COMP%]{width:3.5cm;margin-left:-1.26cm}#scroll-down[_ngcontent-%COMP%]{z-index:-1;height:60px;left:10px;position:absolute;margin:.7cm auto 0 -6px;right:0}#scroll-down[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_scrollDownAnimation 3s infinite;background-color:var(--background__color__white);content:"";left:-4px;margin:0 auto;position:absolute;right:0;border-radius:100%;width:.7rem;height:.7rem}@keyframes _ngcontent-%COMP%_scrollDownAnimation{0%{width:.7rem;height:.7rem;transform:translate(0);background-color:var(--octimal__green)}25%{width:.7rem;height:.7rem}35%{width:.7rem;height:.4rem;transform:translateY(50px);background-color:var(--background__color__white)}65%{width:.7rem;height:.7rem}to{background-color:var(--octimal__green)}}#sd1[_ngcontent-%COMP%]{transition-duration:.4s;transform:rotate(90deg);opacity:1;margin:0;padding:0;z-index:2}#sd2[_ngcontent-%COMP%]{cursor:pointer;z-index:2;transform:rotate(0);opacity:0;margin:0;padding:0;transition-duration:.2s;text-decoration:none}#sd2[_ngcontent-%COMP%]:hover{-webkit-text-decoration:line-through var(--octimal__green);text-decoration:line-through var(--octimal__green)}.presentation[_ngcontent-%COMP%]{height:22cm}.ip__desk[_ngcontent-%COMP%]{display:block}.ip__phone[_ngcontent-%COMP%]{display:none}.img_presentation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-top:-1cm}.presentation[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-template-columns:.1fr 1fr;grid-template-rows:1fr;grid-template-areas:". ."}.dots4[_ngcontent-%COMP%]{padding:2vw 3vw 0vw;display:grid;grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr 1fr 1fr;grid-template-areas:"."".""."".""."}.dots4[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;display:inline-block}.presentation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--octimal__green)}.pcont[_ngcontent-%COMP%]{margin-top:-10px;color:#d6d6d6!important}.pcont[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1vw 0vw 0vw;color:#d6d6d6!important}.pcont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:2.5vw;color:#d6d6d6!important}#target1[_ngcontent-%COMP%]{display:none;padding:10vw 8vw}#target2[_ngcontent-%COMP%]{display:none;padding:6vw 0vw}#target3[_ngcontent-%COMP%]{display:none;padding:2vw 0vw}#target4[_ngcontent-%COMP%]{display:none;padding:8vw 0vw}.center[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--background__color__white);font-size:6em;line-height:1;font-weight:700}.presentation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4em;color:var(--devsreams);font-family:Outfit-Thin,sans-serif!important;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:var(--background__color__white);text-shadow:var(--octimal__green__title) 0px 0px 40px;margin:0}.presentation[_ngcontent-%COMP%]   .pcont[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1rem}.presentation[_ngcontent-%COMP%]   .pcont[_ngcontent-%COMP%]{margin-top:1vw}.dots[_ngcontent-%COMP%]{height:1rem}.dots[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;margin-right:1vw;animation:_ngcontent-%COMP%_vediamo4 .6s ease-out}.prodotti_titles[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.prodottiInside[_ngcontent-%COMP%]{margin-left:14vw}.prodotti_pt1[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{margin-right:1.5vw}@keyframes _ngcontent-%COMP%_vediamo4{0%{margin-left:0vw;margin-right:0vw}}.prodotti_pt1[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:.8cm;width:30vh}.prodotti_pt1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5vw;margin-right:2vw}.prodotti_navbar_interno[_ngcontent-%COMP%]{cursor:pointer;height:2rem;width:2rem;border-radius:100%;background-color:var(--octimal__green);animation:_ngcontent-%COMP%_vediamo2 .5s ease-out}.prodotti_navbar_interno[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:8cm}@keyframes _ngcontent-%COMP%_vediamo2{0%{margin-left:0vw;margin-right:0vw;height:0rem;width:0rem}}.prodotti_navbar_interno[_ngcontent-%COMP%]:hover{height:3rem;width:3rem}.prodotti_navbar_interno[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:1vw;animation:_ngcontent-%COMP%_vediamo3 .8s ease-out}@keyframes _ngcontent-%COMP%_vediamo3{0%{opacity:0}80%{opacity:0}to{opacity:1}}.prodotti_pt2[_ngcontent-%COMP%]{margin-top:-7cm}#pne1[_ngcontent-%COMP%]{height:2cm;margin-left:-1.6cm}#pne2[_ngcontent-%COMP%]{height:2cm;margin-left:-.6cm;padding-top:4.5cm}#pne3[_ngcontent-%COMP%]{height:2cm;margin-left:.4cm;padding-top:4.5cm}#linee[_ngcontent-%COMP%]{margin-left:-2cm;z-index:-1}.linee2[_ngcontent-%COMP%]{height:2cm;margin-left:14.03vw}.linea1[_ngcontent-%COMP%]{border-bottom:2px solid var(--background__color__white);border-right:2px solid var(--background__color__white);border-bottom-right-radius:30px;width:14vw;height:1cm}.linea2[_ngcontent-%COMP%]{border-top:2px solid var(--background__color__white);border-left:2px solid var(--background__color__white);border-top-left-radius:30px;margin-top:-7cm;width:3cm;height:6cm;animation:_ngcontent-%COMP%_vediamo1 1s ease-out}.linea3[_ngcontent-%COMP%]{border-bottom:2px solid var(--background__color__white);border-left:2px solid var(--background__color__white);border-bottom-left-radius:30px;margin-top:0;width:4cm;height:1cm;animation:_ngcontent-%COMP%_vediamo1 1s ease-out}.linea4[_ngcontent-%COMP%]{border-bottom:2px solid var(--background__color__white);border-left:2px solid var(--background__color__white);border-bottom-left-radius:30px;width:5cm;height:6.5cm;animation:_ngcontent-%COMP%_vediamo1 1s ease-out}@keyframes _ngcontent-%COMP%_vediamo1{0%{opacity:0;width:0cm}to{opacity:1}}.prodotti[_ngcontent-%COMP%]{z-index:-1;position:static;height:22cm}#serins1[_ngcontent-%COMP%]{background-color:var(--background__color__black__trasparent);display:grid;width:100%;height:100%;position:fixed;z-index:99;outline:none;top:0;left:0;right:0;grid-template-columns:1fr 2fr 1fr;grid-template-rows:.5fr 1fr .5fr;grid-template-areas:"asiextern asiextern asiextern" "asiextern1 asi asiextern2" "asiextern3 asiextern3 asiextern3"}#serins2[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr .2fr .2fr;grid-template-rows:1fr;grid-template-areas:". . ."}.asi[_ngcontent-%COMP%]{grid-area:asi}.asiextern[_ngcontent-%COMP%]{grid-area:asiextern}.asiextern1[_ngcontent-%COMP%]{grid-area:asiextern1}.asiextern2[_ngcontent-%COMP%]{grid-area:asiextern2}.asiextern3[_ngcontent-%COMP%]{grid-area:asiextern3}.progetti[_ngcontent-%COMP%]{position:static;height:22cm}.progetti_pt1[_ngcontent-%COMP%]{margin-left:2vw}.progetti_pt2[_ngcontent-%COMP%]{margin:2vw 14vw .5vw 0vw}.progettiInside[_ngcontent-%COMP%]{display:grid;grid-template-columns:.7fr 1fr;grid-template-rows:.5fr 1fr;grid-template-areas:"progetti_pt1 progetti_pt2""progetti_pt3 progetti_pt3"}.progetti_pt1[_ngcontent-%COMP%]{grid-area:progetti_pt1}.progetti_pt2[_ngcontent-%COMP%]{grid-area:progetti_pt2}.progetti_pt3[_ngcontent-%COMP%]{min-height:28vw;grid-area:progetti_pt3}#progcard[_ngcontent-%COMP%]{display:grid;border-radius:10px;background:var(--background__color__black__trasparent);box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr;margin:1vw 8vw 0vw;padding:.5vw .5vw 1vw}.progetti_pt1[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 0 10vw}.progetti_pt1[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:first-child{margin-top:4vw}.dots2[_ngcontent-%COMP%]{height:1rem;margin:5vw 0vw 1vw -6vw}.dots2[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;margin-right:1vw}.progetti_pt2[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{margin-right:1.5vw}.card[_ngcontent-%COMP%]{border-radius:5px;background:var(--color__black__light__trasparent);box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(6px);min-height:8vw;-webkit-backdrop-filter:blur(6px);padding:.5vw 2vw;z-index:1;animation:_ngcontent-%COMP%_cardanimation 2s ease-out;transform:rotate(0)}.card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:1.4vw;margin-left:.5vw;color:var(--octimal__green);-webkit-text-decoration:1px line-through var(--background__color__white)00;text-decoration:1px line-through var(--background__color__white)00;cursor:pointer}.card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{-webkit-text-decoration:1px line-through var(--background__color__white);text-decoration:1px line-through var(--background__color__white)}@keyframes _ngcontent-%COMP%_cardanimation{0%{opacity:0;transform:rotate(0)}15%{opacity:1;transform:rotate(-7deg)}30%{transform:rotate(4deg)}50%{transform:rotate(-2deg)}70%{transform:rotate(1deg)}to{transform:rotate(0)}}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:.8vw;margin-bottom:.8vw;font-weight:900;font-size:2em}.card_outside[_ngcontent-%COMP%]{margin:.5vw 2vw}.c__prod[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr .2fr;grid-template-rows:1fr;grid-template-areas:". ."}.c__prod[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:25px}.cerchiocard[_ngcontent-%COMP%]{margin:0vw 50% -8px;z-index:99;line-height:.5cm;position:relative;height:10px;width:10px;border:2px solid var(--octimal__green);border-radius:100%}.card_outside[_ngcontent-%COMP%]:hover   .cerchiocard[_ngcontent-%COMP%]{background-color:var(--octimal__green)}.contatti_pt1[_ngcontent-%COMP%]{margin-left:10vw;margin:2vw 0vw 0vw 10vw}.contatti_pt1[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.contatti_pt1[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:last-child{margin-bottom:1.5vw}.contatti_pt1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:15vw}.contatti_pt2[_ngcontent-%COMP%]{margin-right:8vw}.contattiInside[_ngcontent-%COMP%]{display:grid;padding-bottom:5vw;min-height:10cm;grid-template-columns:1fr 1fr;grid-template-rows:1fr;grid-template-areas:". ."}.Contatti[_ngcontent-%COMP%]{position:static;height:22cm}.formgroup_inside1[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;grid-template-areas:". ."}.formgroup_container[_ngcontent-%COMP%]{padding:2vw 2vw 1vw;background:var(--background__color__black__trasparent);border-radius:10px;box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);border:1px solid var(--octimal__green__semitrasparent)}.formgroup[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.7vw 0vw}.formgroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0 .4vw;border-radius:14px;margin:0 1vw;width:80%;height:1cm;background-color:var(--color__black__light__trasparent);border:none;border-bottom:1px solid var(--color__black__light)}.formgroup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}.formgroup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:3%;width:95%;height:170px;background-color:var(--color__black__light__trasparent);border:none;border-radius:14px}.formgroup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none}.formgroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-bottom:1px solid var(--octimal__green)}.formgroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.formgroup[_ngcontent-%COMP%]{margin-bottom:-2cm}.submitinfo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:2.4cm;height:2.4cm;border-radius:100%;border:1px solid var(--octimal__green__semitrasparent);background:var(--background__color__black);box-shadow:10px 10px 25px var(--background__color__black),-10px -10px 25px var(--background__color__black);padding:1vw;cursor:pointer;z-index:99}.submitinfo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--octimal__green);box-shadow:10px 10px 25px var(--color__black__light__trasparent),-10px -10px 25px var(--color__black__light__trasparent)}.dots3[_ngcontent-%COMP%]{height:1rem}.dots3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;margin-right:1vw}.contatti_pt1[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{margin-right:1.5vw}.sotto[_ngcontent-%COMP%]{margin-top:5vw;z-index:2!important;padding:1vw 2vw;width:100%;margin-left:-1.3cm;background-color:var(--background__color__black__trasparent);border-top:2px solid var(--color__black__light)}.sotto[_ngcontent-%COMP%]:hover{border-top:2px solid var(--octimal__green)}.f1[_ngcontent-%COMP%]{display:grid;grid-template-columns:20vw 13vw 13vw;grid-template-rows:1fr;grid-template-areas:"f_c1 f_c2 f_c3";margin:2vw 15vw 4vw}.f_c1[_ngcontent-%COMP%]{padding-top:.2vw;text-align:center}.f_c1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{cursor:pointer;padding-top:2vw;text-align:center;font-family:Montserrat,sans-serif!important;line-height:.1cm;fill:var(--background__color__white)}.f_c1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:-10px;color:var(--octimal__green)}.sotto[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.sotto[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4%}.f2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--background__color__white__trasparent)!important}@keyframes _ngcontent-%COMP%_scrollDownAnimation1{0%{opacity:0;height:0cm;width:0cm}80%{opacity:1}}.portable__voices[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:4vh 0vh}.betaParte[_ngcontent-%COMP%]{z-index:99;width:100%;display:none;margin-left:40px}.logoBeta[_ngcontent-%COMP%]{width:100%;display:block!important;top:0;left:0;outline:none;z-index:99}.logoBeta_devdr[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{cursor:pointer;transform:rotate(90deg);text-align:center;font-family:Montserrat,sans-serif!important;color:var(--background__color__black);z-index:0;font-size:3rem;fill:var(--color__black__light__trasparent)}.logoBeta_devdr[_ngcontent-%COMP%]{display:none;position:fixed}.svg__f_c1__1[_ngcontent-%COMP%]{display:block}.svg__f_c1__2[_ngcontent-%COMP%]{display:none}@media only screen and (max-width: 1800px){.prodottiInside[_ngcontent-%COMP%]{margin-left:8vw}}@media only screen and (max-width: 1500px){.progetti_pt1[_ngcontent-%COMP%]{margin-left:0vw;margin-right:2vw}#target1[_ngcontent-%COMP%]{padding:12vw 2vw 12vw 3vw}#target2[_ngcontent-%COMP%]{padding:10vw 0vw}#target3[_ngcontent-%COMP%]{padding:4vw 0vw}#target4[_ngcontent-%COMP%]{padding:10vw 0vw}#progcard[_ngcontent-%COMP%]{margin:1vw 3vw 0vw;padding:.5vw .5vw 1vw}.progetti_pt2[_ngcontent-%COMP%]{margin:2vw 8vw .5vw 0vw}}@media only screen and (max-width: 1400px){.prodottiInside[_ngcontent-%COMP%]{margin-left:4vw}.medtextcont[_ngcontent-%COMP%]{font-size:.8rem}.prodotti_navbar_interno[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:7cm}}@media only screen and (max-width: 1100px){.latlist1[_ngcontent-%COMP%], .up[_ngcontent-%COMP%]{display:none!important}.betaParte[_ngcontent-%COMP%]{display:block;margin-bottom:32vh}.logoBeta_devdr[_ngcontent-%COMP%]{display:block}.latlistinterno2[_ngcontent-%COMP%]{height:95%}.targets_container[_ngcontent-%COMP%]{margin:0vh}.logo_container[_ngcontent-%COMP%]{padding-top:4vh}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:1.5cm;margin:4vh 0 0}#container_generale_inside[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:auto 80px;grid-template-rows:1fr;grid-template-areas:"gen latlist2"}.logodesc[_ngcontent-%COMP%]{text-align:center;top:0;margin:0;z-index:99;width:100%;padding-top:20vh}.logodesc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;font-size:4rem;text-shadow:none}.logodesc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover{text-shadow:none}.center[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4em;line-height:1;font-weight:700}.prodotti_navbar_interno[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:5cm}}@media only screen and (max-width: 400px){.logodesc[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}}@media only screen and (max-width: 800px){.presentation[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em;line-height:1;font-weight:700}.center[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em}.dots4[_ngcontent-%COMP%]{padding:10vw 8vw 0vw 0vw!important}.presentation[_ngcontent-%COMP%]{margin-left:6vw}.presentation[_ngcontent-%COMP%]   .pcont[_ngcontent-%COMP%]{margin-top:8vw!important}.pcont[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal}.textcont[_ngcontent-%COMP%]{font-size:1rem}.liltextcont[_ngcontent-%COMP%], .medtextcont[_ngcontent-%COMP%]{font-size:.8rem}.prodotti_navbar_interno[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:4cm}.logodesc[_ngcontent-%COMP%]{padding-top:28vh}#linee[_ngcontent-%COMP%]{display:none}#serins2[_ngcontent-%COMP%]{display:block}.prodotti_pt2[_ngcontent-%COMP%]{margin-top:10vw}#pne1[_ngcontent-%COMP%]{height:5cm;margin-left:0}#pne2[_ngcontent-%COMP%], #pne3[_ngcontent-%COMP%]{height:5cm;margin-left:0;padding-top:1vw}.prodotti_navbar_interno[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:7cm}#progcard[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto;margin-top:6vw}.dots2[_ngcontent-%COMP%]{margin:5vw 0vw 1vw 3vw}.progetti_pt2[_ngcontent-%COMP%]{margin:1vw 3vw 0vw}.progetti_pt1[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 0 3vw}.card_outside[_ngcontent-%COMP%]{margin:2vw}.c__prod[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:20px}.contattiInside[_ngcontent-%COMP%]{min-height:-moz-fit-content;min-height:fit-content;grid-template-columns:1fr;grid-template-rows:auto auto;grid-template-areas:"." "."}.contatti_pt1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:60vw}.contatti_pt2[_ngcontent-%COMP%]{margin-right:0;margin-left:6vw}.dots3[_ngcontent-%COMP%]{margin-top:10px;margin-left:-20px}.submitinfo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:1.8cm;height:1.8cm}.submitinfo[_ngcontent-%COMP%]{padding-top:-1cm}.sotto[_ngcontent-%COMP%]{margin-top:3cm;margin-left:0;padding-top:10vw}.f1[_ngcontent-%COMP%]{grid-template-rows:1fr .5fr .5fr;grid-template-columns:1fr;grid-template-areas:".""."".";margin:2vw}.f_c1[_ngcontent-%COMP%]{margin-bottom:10vw;text-align:left;margin-left:8vw}.svg__f_c1__1[_ngcontent-%COMP%]{display:none}.svg__f_c1__2[_ngcontent-%COMP%]{display:block}.f2[_ngcontent-%COMP%]{margin-top:8vw}.scrollDown_container[_ngcontent-%COMP%]{margin-top:-1cm}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;height:2px;width:10px}.targets_container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:none}.cd-navigation-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.cd-nav-trigger-inside[_ngcontent-%COMP%]{margin:20vw 10vw 0vw 0vw;cursor:pointer}.cd-nav-trigger-inside_profile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:none}.targets_container[_ngcontent-%COMP%]{opacity:0;pointer-events:none}}@media only screen and (max-width: 600px){.ip__desk[_ngcontent-%COMP%]{display:none}.ip__phone[_ngcontent-%COMP%]{display:block}.presentation[_ngcontent-%COMP%]   .pcont[_ngcontent-%COMP%]{z-index:1;text-shadow:var(--octimal__green__title) 8px 0 20px}.img_presentation[_ngcontent-%COMP%]{position:absolute;z-index:0;margin-left:40px;width:8cm}}']})}return n})();const ODe=function nX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rX=new Jo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tx=new Yl("@firebase/auth");function bx(n,...e){Tx.logLevel<=Xt.ERROR&&Tx.error(`Auth (${Gc}): ${n}`,...e)}function Ds(n,...e){throw ON(n,...e)}function za(n,...e){return ON(n,...e)}function ON(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return rX.create(n,...e)}function ve(n,e,...t){if(!n)throw ON(e,...t)}function Ha(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bx(e),new Error(e)}function ou(n,e){n||Ha(e)}function qy(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function sX(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Ky{constructor(e,t){this.shortDelay=e,this.longDelay=t,ou(t>e,"Short delay should be less than long delay!"),this.isMobile=aD()||zq()}get(){return function LDe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function kN(){return"http:"===sX()||"https:"===sX()}()||cD()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function LN(n,e){ou(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class oX{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UDe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},VDe=new Ky(3e4,6e4);function Fn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Un(n,e,t,r){return FN.apply(this,arguments)}function FN(){return FN=O(function*(n,e,t,r,i={}){return aX(n,i,O(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=_y(Object.assign({key:n.config.apiKey},o)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),oX.fetch()(cX(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))}),FN.apply(this,arguments)}function aX(n,e,t){return UN.apply(this,arguments)}function UN(){return UN=O(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},UDe),e);try{const i=new zDe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Yy(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Yy(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw Yy(n,"email-already-in-use",o);if("USER_DISABLED"===c)throw Yy(n,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw function iX(n,e,t){const r=Object.assign(Object.assign({},ODe()),{[e]:t});return new Jo("auth","Firebase",r).create(e,{appName:n.name})}(n,u,l);Ds(n,u)}}catch(i){if(i instanceof so)throw i;Ds(n,"network-request-failed",{message:String(i)})}}),UN.apply(this,arguments)}function jc(n,e,t,r){return VN.apply(this,arguments)}function VN(){return VN=O(function*(n,e,t,r,i={}){const s=yield Un(n,e,t,r,i);return"mfaPendingCredential"in s&&Ds(n,"multi-factor-auth-required",{_serverResponse:s}),s}),VN.apply(this,arguments)}function cX(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?LN(n.config,i):`${n.config.apiScheme}://${i}`}function BDe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zDe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(za(this.auth,"network-request-failed")),VDe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yy(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=za(n,e,r);return i.customData._tokenResponse=t,i}function uX(n){return void 0!==n&&void 0!==n.enterprise}class dX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BDe(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function zN(){return zN=O(function*(n,e){return Un(n,"GET","/v2/recaptchaConfig",Fn(n,e))}),zN.apply(this,arguments)}function HN(){return HN=O(function*(n,e){return Un(n,"POST","/v1/accounts:delete",e)}),HN.apply(this,arguments)}function WN(){return WN=O(function*(n,e){return Un(n,"POST","/v1/accounts:lookup",e)}),WN.apply(this,arguments)}function Xy(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $N(){return $N=O(function*(n,e=!1){const t=Ln(n),r=yield t.getIdToken(e),i=xx(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Xy(jN(i.auth_time)),issuedAtTime:Xy(jN(i.iat)),expirationTime:Xy(jN(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}),$N.apply(this,arguments)}function jN(n){return 1e3*Number(n)}function xx(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return bx("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cb(t);return i?JSON.parse(i):(bx("Failed to decode base64 JWT payload"),null)}catch(i){return bx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qc(n,e){return qN.apply(this,arguments)}function qN(){return qN=O(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof so&&function KDe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),qN.apply(this,arguments)}class YDe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(O(function*(){yield t.iteration()}),r)}iteration(){var e=this;return O(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class fX{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xy(this.lastLoginAt),this.creationTime=Xy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qy(n){return KN.apply(this,arguments)}function KN(){return KN=O(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield qc(n,function $De(n,e){return WN.apply(this,arguments)}(t,{idToken:r}));ve(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function ZDe(n){return n.map(e=>{var{providerId:t}=e,r=VI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function QDe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fX(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),KN.apply(this,arguments)}function YN(){return YN=O(function*(n){const e=Ln(n);yield Qy(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),YN.apply(this,arguments)}function XN(){return XN=O(function*(n,e){const t=yield aX(n,{},O(function*(){const r=_y({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=cX(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oX.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),XN.apply(this,arguments)}function QN(){return QN=O(function*(n,e){return Un(n,"POST","/v2/accounts:revokeToken",Fn(n,e))}),QN.apply(this,arguments)}class Zy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function qDe(n){const e=xx(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return O(function*(){return ve(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return O(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function JDe(n,e){return XN.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Zy;return r&&(ve("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(ve("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(ve("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zy,this.toJSON())}_performRefresh(){return Ha("not implemented")}}function au(n,e){ve("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class jd{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=VI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YDe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fX(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return O(function*(){const r=yield qc(t,t.stsTokenManager.getToken(t.auth,e));return ve(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function jDe(n){return $N.apply(this,arguments)}(this,e)}reload(){return function XDe(n){return YN.apply(this,arguments)}(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return O(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Qy(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return O(function*(){const t=yield e.getIdToken();return yield qc(e,function GDe(n,e){return HN.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,_=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:E,isAnonymous:w,providerData:b,stsTokenManager:x}=t;ve(v&&x,e,"internal-error");const A=Zy.fromJSON(this.name,x);ve("string"==typeof v,e,"internal-error"),au(d,e.name),au(h,e.name),ve("boolean"==typeof E,e,"internal-error"),ve("boolean"==typeof w,e,"internal-error"),au(f,e.name),au(p,e.name),au(g,e.name),au(m,e.name),au(_,e.name),au(y,e.name);const T=new jd({uid:v,auth:e,email:h,emailVerified:E,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:A,createdAt:_,lastLoginAt:y});return b&&Array.isArray(b)&&(T.providerData=b.map(C=>Object.assign({},C))),m&&(T._redirectEventId=m),T}static _fromIdTokenResponse(e,t,r=!1){return O(function*(){const i=new Zy;i.updateFromServerResponse(t);const s=new jd({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qy(s),s})()}}const pX=new Map;function Kc(n){ou(n instanceof Function,"Expected a class definition");let e=pX.get(n);return e?(ou(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pX.set(n,e),e)}const gX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return O(function*(){return!0})()}_set(t,r){var i=this;return O(function*(){i.storage[t]=r})()}_get(t){var r=this;return O(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return O(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Sx(n,e,t){return`firebase:${n}:${e}:${t}`}class tg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Sx(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sx("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return O(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?jd._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return O(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return O(function*(){if(!t.length)return new tg(Kc(gX),e,r);const i=(yield Promise.all(t.map(function(){var l=O(function*(u){if(yield u._isAvailable())return u});return function(u){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||Kc(gX);const o=Sx(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const u=yield l._get(o);if(u){const d=jd._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var l=O(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return l.apply(this,arguments)}}())),new tg(s,e,r)):new tg(s,e,r)})()}}function mX(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_X(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wX(e))return"Blackberry";if(TX(e))return"Webos";if(ZN(e))return"Safari";if((e.includes("chrome/")||yX(e))&&!e.includes("edge/"))return"Chrome";if(EX(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function _X(n=Zr()){return/firefox\//i.test(n)}function ZN(n=Zr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yX(n=Zr()){return/crios\//i.test(n)}function vX(n=Zr()){return/iemobile/i.test(n)}function EX(n=Zr()){return/android/i.test(n)}function wX(n=Zr()){return/blackberry/i.test(n)}function TX(n=Zr()){return/webos/i.test(n)}function Ix(n=Zr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bX(n=Zr()){return Ix(n)||EX(n)||TX(n)||wX(n)||/windows phone/i.test(n)||vX(n)}function xX(n,e=[]){let t;switch(n){case"Browser":t=mX(Zr());break;case"Worker":t=`${mX(Zr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gc}/${r}`}class iNe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return O(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function JN(){return JN=O(function*(n,e={}){return Un(n,"GET","/v2/passwordPolicy",Fn(n,e))}),JN.apply(this,arguments)}class aNe{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(t=c.meetsMinPasswordLength)||void 0===t||t),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(s=c.containsUppercaseLetter)||void 0===s||s),c.isValid&&(c.isValid=null===(o=c.containsNumericCharacter)||void 0===o||o),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class cNe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SX(this),this.idTokenSubscription=new SX(this),this.beforeStateQueue=new iNe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Kc(t)),this._initializationPromise=this.queue(O(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield tg.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return O(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return O(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=s?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(s=l.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return ve(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return O(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return O(function*(){try{yield Qy(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function FDe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return O(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return O(function*(){const r=e?Ln(e):null;return r&&ve(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return O(function*(){if(!r._deleted)return e&&ve(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(O(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return O(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(O(function*(){yield t.assertedPersistence.setPersistence(Kc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return O(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return O(function*(){const t=yield function sNe(n){return JN.apply(this,arguments)}(e),r=new aNe(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return O(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function eNe(n,e){return QN.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return O(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return O(function*(){if(!t.redirectPersistenceManager){const r=e&&Kc(e)||t._popupRedirectResolver;ve(r,t,"argument-error"),t.redirectPersistenceManager=yield tg.create(t,[Kc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return O(function*(){var r,i;return t._isInitialized&&(yield t.queue(O(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return O(function*(){if(e===t.currentUser)return t.queue(O(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),"function"==typeof t){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}{const c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){var t=this;return O(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return O(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return O(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function kDe(n,...e){Tx.logLevel<=Xt.WARN&&Tx.warn(`Auth (${Gc}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Er(n){return Ln(n)}class SX{constructor(e){this.auth=e,this.observer=null,this.addObserver=function qAe(n,e){const t=new KAe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eO(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=za("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function lNe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function IX(n){return`__${n}${Math.floor(1e6*Math.random())}`}class CX{constructor(e){this.type="recaptcha-enterprise",this.auth=Er(e)}verify(e="verify",t=!1){var r=this;return O(function*(){function s(){return s=O(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=O(function*(l,u){(function hX(n,e){return zN.apply(this,arguments)})(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new dX(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{u(d)})});return function(l,u){return c.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,c,l){const u=window.grecaptcha;uX(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c("NO_RECAPTCHA")})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(l=>{if(!t&&uX(window.grecaptcha))o(l,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));eO("https://www.google.com/recaptcha/enterprise.js?render="+l).then(()=>{o(l,a,c)}).catch(u=>{c(u)})}}).catch(l=>{c(l)})})})()}}function AX(n,e,t){return tO.apply(this,arguments)}function tO(){return tO=O(function*(n,e,t,r=!1){const i=new CX(n);let s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}const o=Object.assign({},e);return Object.assign(o,r?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}),tO.apply(this,arguments)}function Jy(n,e,t,r){return nO.apply(this,arguments)}function nO(){return nO=O(function*(n,e,t,r){var i;if(null!==(i=n._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=yield AX(n,e,t,"getOobCode"===t);return r(n,s)}return r(n,e).catch(function(){var s=O(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=yield AX(n,e,t,"getOobCode"===t);return r(n,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}())}),nO.apply(this,arguments)}function MX(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RX(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class PX{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ha("not implemented")}_getIdTokenResponse(e){return Ha("not implemented")}_linkToIdToken(e,t){return Ha("not implemented")}_getReauthenticationResolver(e){return Ha("not implemented")}}function ENe(n,e){return oO.apply(this,arguments)}function oO(){return oO=O(function*(n,e){return Un(n,"POST","/v1/accounts:signUp",e)}),oO.apply(this,arguments)}function TNe(n,e){return cO.apply(this,arguments)}function cO(){return cO=O(function*(n,e){return jc(n,"POST","/v1/accounts:signInWithPassword",Fn(n,e))}),cO.apply(this,arguments)}function pO(){return pO=O(function*(n,e){return jc(n,"POST","/v1/accounts:signInWithEmailLink",Fn(n,e))}),pO.apply(this,arguments)}function gO(){return gO=O(function*(n,e){return jc(n,"POST","/v1/accounts:signInWithEmailLink",Fn(n,e))}),gO.apply(this,arguments)}class ev extends PX{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ev(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ev(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return O(function*(){switch(t.signInMethod){case"password":return Jy(e,{returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",TNe);case"emailLink":return function CNe(n,e){return pO.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Ds(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return O(function*(){switch(r.signInMethod){case"password":return Jy(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ENe);case"emailLink":return function ANe(n,e){return gO.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:Ds(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Yc(n,e){return mO.apply(this,arguments)}function mO(){return mO=O(function*(n,e){return jc(n,"POST","/v1/accounts:signInWithIdp",Fn(n,e))}),mO.apply(this,arguments)}class rv{constructor(e){var t,r,i,s,o,a;const c=yy(vy(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(r=c.oobCode)&&void 0!==r?r:null,d=function kNe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);ve(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function LNe(n){const e=yy(vy(n)).link,t=e?yy(vy(e)).deep_link_id:null,r=yy(vy(n)).deep_link_id;return(r?yy(vy(r)).link:null)||r||t||e||n}(e);try{return new rv(t)}catch{return null}}}let NX=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ev._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=rv.parseLink(r);return ve(i,"argument-error"),ev._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class cu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class FNe extends cu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function OX(n,e){return TO.apply(this,arguments)}function TO(){return TO=O(function*(n,e){return jc(n,"POST","/v1/accounts:signUp",Fn(n,e))}),TO.apply(this,arguments)}class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return O(function*(){const s=yield jd._fromIdTokenResponse(e,r,i),o=kX(r);return new ko({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return O(function*(){yield e._updateTokensIfNecessary(r,!0);const i=kX(r);return new ko({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function kX(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Mx extends so{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mx.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Mx(e,t,r,i)}}function LX(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Mx._fromErrorAndOperation(n,s,e,r):s})}function IO(){return IO=O(function*(n,e,t=!1){const r=yield qc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ko._forOperation(n,"link",r)}),IO.apply(this,arguments)}function AO(){return AO=O(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield qc(n,LX(r,i,e,n),t);ve(s.idToken,r,"internal-error");const o=xx(s.idToken);ve(o,r,"internal-error");const{sub:a}=o;return ve(n.uid===a,r,"user-mismatch"),ko._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Ds(r,"user-mismatch"),s}}),AO.apply(this,arguments)}function VX(n,e){return MO.apply(this,arguments)}function MO(){return MO=O(function*(n,e,t=!1){const r="signIn",i=yield LX(n,r,e),s=yield ko._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),MO.apply(this,arguments)}function PO(){return PO=O(function*(n,e){return VX(Er(n),e)}),PO.apply(this,arguments)}function VO(n){return BO.apply(this,arguments)}function BO(){return BO=O(function*(n){const e=Er(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())}),BO.apply(this,arguments)}function jO(){return jO=O(function*(n,e,t){const r=Er(n),o=yield Jy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OX).catch(c=>{throw"auth/password-does-not-meet-requirements"===c.code&&VO(n),c}),a=yield ko._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a}),jO.apply(this,arguments)}const Dx="__sak";class zX{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dx,"1"),this.storage.removeItem(Dx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lOe=(()=>{class n extends zX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oOe(){const n=Zr();return ZN(n)||Ix(n)}()&&function rNe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=bX(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function nNe(){return function BAe(){const n=Zr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return O(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return O(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return O(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),HX=(()=>{class n extends zX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let dOe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return O(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,c=r.handlersMap[o];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(c).map(function(){var d=O(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function uOe(n){return Promise.all(n.map(function(){var e=O(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function c2(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class hOe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return O(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{const u=c2("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Nr(){return window}function l2(){return typeof Nr().WorkerGlobalScope<"u"&&"function"==typeof Nr().importScripts}function u2(){return(u2=O(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const GX="firebaseLocalStorageDb",Nx="firebaseLocalStorage",WX="fbase_key";class sv{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ox(n,e){return n.transaction([Nx],e?"readwrite":"readonly").objectStore(Nx)}function d2(){const n=indexedDB.open(GX,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nx,{keyPath:WX})}catch(i){t(i)}}),n.addEventListener("success",O(function*(){const r=n.result;r.objectStoreNames.contains(Nx)?e(r):(r.close(),yield function yOe(){const n=indexedDB.deleteDatabase(GX);return new sv(n).toPromise()}(),e(yield d2()))}))})}function $X(n,e,t){return h2.apply(this,arguments)}function h2(){return h2=O(function*(n,e,t){const r=Ox(n,!0).put({[WX]:e,value:t});return new sv(r).toPromise()}),h2.apply(this,arguments)}function f2(){return f2=O(function*(n,e){const t=Ox(n,!1).get(e),r=yield new sv(t).toPromise();return void 0===r?null:r.value}),f2.apply(this,arguments)}function jX(n,e){const t=Ox(n,!0).delete(e);return new sv(t).toPromise()}const TOe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return O(function*(){return t.db||(t.db=yield d2()),t.db})()}_withRetries(t){var r=this;return O(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return O(function*(){return l2()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return O(function*(){t.receiver=dOe._getInstance(function mOe(){return l2()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=O(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=O(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return O(function*(){var r,i;if(t.activeServiceWorker=yield function pOe(){return u2.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new hOe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return O(function*(){if(r.sender&&r.activeServiceWorker&&function gOe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return O(function*(){try{if(!indexedDB)return!1;const t=yield d2();return yield $X(t,Dx,"1"),yield jX(t,Dx),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return O(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return O(function*(){return i._withPendingWrite(O(function*(){return yield i._withRetries(s=>$X(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return O(function*(){const i=yield r._withRetries(s=>function vOe(n,e){return f2.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return O(function*(){return r._withPendingWrite(O(function*(){return yield r._withRetries(i=>jX(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return O(function*(){const r=yield t._withRetries(o=>{const a=Ox(o,!1).getAll();return new sv(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(O(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();IX("rcb"),new Ky(3e4,6e4);class T2 extends PX{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UOe(n){return VX(n.auth,new T2(n),n.bypassAuthState)}function VOe(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),function UX(n,e){return AO.apply(this,arguments)}(t,new T2(n),n.bypassAuthState)}function BOe(n){return b2.apply(this,arguments)}function b2(){return b2=O(function*(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),function SO(n,e){return IO.apply(this,arguments)}(t,new T2(n),n.bypassAuthState)}),b2.apply(this,arguments)}class zOe{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=O(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return O(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:c}=e;if(a)return void t.reject(a);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(l))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UOe;case"linkViaPopup":case"linkViaRedirect":return BOe;case"reauthViaPopup":case"reauthViaRedirect":return VOe;default:Ds(this.auth,"internal-error")}}resolve(e){ou(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ou(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Ky(2e3,1e4);const HOe="pendingRedirect",ov=new Map;class GOe extends zOe{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return O(function*(){let r=ov.get(t.auth._key());if(!r){try{const s=(yield function WOe(n,e){return A2.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}ov.set(t.auth._key(),r)}return t.bypassAuthState||ov.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return O(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return O(function*(){})()}cleanUp(){}}function A2(){return A2=O(function*(n,e){const t=function YX(n){return Sx(HOe,n.config.apiKey,n.name)}(e),r=function KX(n){return Kc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),A2.apply(this,arguments)}function $Oe(n,e){ov.set(n._key(),e)}function XX(n,e){return k2.apply(this,arguments)}function k2(){return k2=O(function*(n,e,t=!1){const r=Er(n),i=function Kd(n,e){return e?Kc(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),o=yield new GOe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o}),k2.apply(this,arguments)}class XOe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function QOe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JX(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JX(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(za(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZX(e))}saveEventToCache(e){this.cachedEventUids.add(ZX(e)),this.lastProcessedEventTime=Date.now()}}function ZX(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JX({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function F2(){return F2=O(function*(n,e={}){return Un(n,"GET","/v1/projects",e)}),F2.apply(this,arguments)}const JOe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e2e=/^https?/;function U2(){return U2=O(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function ZOe(n){return F2.apply(this,arguments)}(n);for(const t of e)try{if(n2e(t))return}catch{}Ds(n,"unauthorized-domain")}),U2.apply(this,arguments)}function n2e(n){const e=qy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!e2e.test(t))return!1;if(JOe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const r2e=new Ky(3e4,6e4);function eQ(){const n=Nr().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Lx=null;const o2e=new Ky(5e3,15e3),a2e="__/auth/iframe",c2e="emulator/auth/iframe",l2e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u2e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d2e(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?LN(e,c2e):`https://${n.config.authDomain}/${a2e}`,r={apiKey:e.apiKey,appName:n.name,v:Gc},i=u2e.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${_y(r).slice(1)}`}function V2(){return V2=O(function*(n){const e=yield function s2e(n){return Lx=Lx||function i2e(n){return new Promise((e,t)=>{var r,i,s;function o(){eQ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eQ(),t(za(n,"network-request-failed"))},timeout:r2e.get()})}if(null!==(i=null===(r=Nr().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Nr().gapi)||void 0===s||!s.load){const a=IX("iframefcb");return Nr()[a]=()=>{gapi.load?o():t(za(n,"network-request-failed"))},eO(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}o()}}).catch(e=>{throw Lx=null,e})}(n),Lx}(n),t=Nr().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:d2e(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l2e,dontclear:!0},r=>new Promise(function(){var i=O(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=za(n,"network-request-failed"),c=Nr().setTimeout(()=>{o(a)},o2e.get());function l(){Nr().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),V2.apply(this,arguments)}const f2e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tQ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const E2e="__/auth/handler",w2e="emulator/auth/handler",T2e=encodeURIComponent("fac");function nQ(n,e,t,r,i,s){return B2.apply(this,arguments)}function B2(){return B2=O(function*(n,e,t,r,i,s){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Gc,eventId:i};if(e instanceof cu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",lD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof FNe){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=yield n._getAppCheckToken(),l=c?`#${T2e}=${encodeURIComponent(c)}`:"";return`${function b2e({config:n}){return n.emulator?LN(n,w2e):`https://${n.authDomain}/${E2e}`}(n)}?${_y(a).slice(1)}${l}`}),B2.apply(this,arguments)}const z2="webStorageSupport",S2e=class x2e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HX,this._completeRedirectFn=XX,this._overrideRedirectResult=$Oe}_openPopup(e,t,r,i){var s=this;return O(function*(){var o;ou(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield nQ(e,t,r,qy(),i);return function y2e(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},f2e),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Zr().toLowerCase();t&&(a=yX(l)?"_blank":t),_X(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function tNe(n=Zr()){var e;return Ix(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function v2e(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new tQ(null);const d=window.open(e||"",a,u);ve(d,n,"popup-blocked");try{d.focus()}catch{}return new tQ(d)}(e,a,c2())})()}_openRedirect(e,t,r,i){var s=this;return O(function*(){return yield s._originValidation(e),function fOe(n){Nr().location.href=n}(yield nQ(e,t,r,qy(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ou(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return O(function*(){const r=yield function h2e(n){return V2.apply(this,arguments)}(e),i=new XOe(e);return r.register("authEvent",s=>(ve(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(z2,{type:z2},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[z2];void 0!==o&&t(!!o),Ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function t2e(n){return U2.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bX()||ZN()||Ix()}};var sQ="@firebase/auth";class I2e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return O(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const R2e=Bq("authIdTokenMaxAge")||300;let aQ=null;const P2e=n=>function(){var e=O(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>R2e)return;const s=r?.token;aQ!==s&&(aQ=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function G2(n=ea()){const e=Li(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function pNe(n,e){const t=Li(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(my(t.getOptions(),e??{}))return i;Ds(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:S2e,persistence:[TOe,lOe,HX]}),r=Bq("authTokenSyncURL");if(r){const s=P2e(r);(function eOe(n,e,t){Ln(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function JNe(n,e,t,r){Ln(n).onIdTokenChanged(e,t,r)}(t,o=>s(o))}const i=Uq("auth");return i&&function mNe(n,e,t){const r=Er(n);ve(r._canInitEmulator,r,"emulator-config-failed"),ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=MX(e),{host:o,port:a}=function _Ne(n){const e=MX(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:RX(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:RX(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function yNe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}function D2e(n,e){1&n&&(I(0,"a"),U(1,"Account created successfully"),P())}function N2e(n,e){1&n&&(I(0,"a"),U(1,"Account not created :("),P())}function O2e(n,e){1&n&&(I(0,"a"),U(1,"Log in successfully"),P())}function k2e(n,e){1&n&&(I(0,"a"),U(1,"Something went wrong :("),P())}!function A2e(n){Hr(new Dr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xX(n)},l=new cNe(r,i,s,c);return function gNe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Kc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Hr(new Dr("auth-internal",e=>(r=>new I2e(r))(Er(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Rt(sQ,"1.5.0",function C2e(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Rt(sQ,"1.5.0","esm2017")}("Browser");let cQ=(()=>{class n{constructor(t){this.appc=t,this.statusCreazioneAccount=0,this.signInorSignOut=0,this.error__popup=0}ngOnInit(){console.log(this.appc.section)}accedi(t,r){(function $Ne(n,e,t){return function RO(n,e){return PO.apply(this,arguments)}(Ln(n),NX.credential(e,t)).catch(function(){var r=O(function*(i){throw"auth/password-does-not-meet-requirements"===i.code&&VO(n),i});return function(i){return r.apply(this,arguments)}}())})(G2(),t,r).then(s=>{localStorage.setItem("sportyId",s.user.uid),this.error__popup=2,setInterval(()=>{this.error__popup=0},2e3)}).catch(s=>{this.error__popup=1,setInterval(()=>{this.error__popup=0},2e3)})}signInFunction(t,r,i){const s=G2();console.log(r,i),function WNe(n,e,t){return jO.apply(this,arguments)}(s,r,i).then(o=>{const a=o.user;_x(mx(vx(),"users/"+a.uid),{username:t,email:r}),this.statusCreazioneAccount=1,setTimeout(()=>{this.statusCreazioneAccount=0},3e3)}).catch(o=>{this.statusCreazioneAccount=2,setTimeout(()=>{this.statusCreazioneAccount=0},3e3)})}static#e=this.\u0275fac=function(r){return new(r||n)(Qe(Ex))};static#t=this.\u0275cmp=Ah({type:n,selectors:[["app-profile"]],decls:63,vars:4,consts:[[1,"logone"],[1,"centro"],[1,"backhome",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","48","width","48","fill","#007E6D"],["d","M24 39.25 8.75 24 24 8.75l1.6 1.6-12.5 12.5h26.15v2.3H13.1l12.5 12.5Z"],[1,"card_logsig"],[1,"inputs"],["placeholder","user name","type","text"],["username",""],["placeholder","password","type","password"],["password",""],[1,"bottoni"],[1,"bt1",2,"display","none"],[1,"bt2",3,"click"],[4,"ngIf"],[1,"sotto"],[1,"f1"],[1,"f_c1"],["viewBox","0 0 240 23","xmlns","http://www.w3.org/2000/svg"],["x","88","y","20","fill","#D6D6D6"],[1,"f_c2"],[2,"color","rgb(219, 219, 219)","text-decoration","none"],[1,"f_c3"],[1,"f2",2,"text-align","center"],[2,"color","rgb(48, 48, 48) !important","font-size","1rem"]],template:function(r,i){if(1&r){const s=WE();I(0,"h1",0),U(1,"OCTIMAL"),P(),I(2,"div",1)(3,"div",2),kt("click",function(){return i.appc.startOctimal()}),I(4,"h1"),U(5,"back home"),P(),st(),I(6,"svg",3),ue(7,"path",4),P()(),at(),I(8,"div",5)(9,"h1"),U(10,"personal area"),P(),I(11,"div")(12,"a"),U(13,"Sign in to the personal area"),P(),I(14,"div")(15,"div",6)(16,"a"),ue(17,"input",7,8),P(),I(19,"a"),ue(20,"input",9,10),P()(),I(22,"div",11)(23,"button",12),U(24,"Sign in"),P(),I(25,"button",13),kt("click",function(){on(s);const a=en(18),c=en(21);return an(i.accedi(a.value,c.value))}),U(26,"Log in"),P()()(),I(27,"div"),Mi(28,D2e,2,0,"a",14),Mi(29,N2e,2,0,"a",14),Mi(30,O2e,2,0,"a",14),Mi(31,k2e,2,0,"a",14),P()()()(),I(32,"div",15)(33,"div",16)(34,"div",17)(35,"div"),st(),I(36,"svg",18)(37,"text",19),U(38,"OCTIMAL"),P()()(),at(),I(39,"a"),U(40,"Developing dreams"),P()(),I(41,"div",20)(42,"ul")(43,"li")(44,"a",21),U(45,"Join octimal team"),P()(),I(46,"li")(47,"a"),U(48,"Who we are?"),P()(),I(49,"li")(50,"a"),U(51,"Assistance"),P()()()(),I(52,"div",22)(53,"ul")(54,"li")(55,"a"),U(56,"Frequent questions"),P()(),I(57,"li")(58,"a"),U(59,"help us improve ourselves"),P()()()()(),I(60,"div",23)(61,"p",24),U(62,"All rights reserved"),P()()()}2&r&&(qr(28),Ur("ngIf",1==i.statusCreazioneAccount),qr(1),Ur("ngIf",2==i.statusCreazioneAccount),qr(1),Ur("ngIf",2==i.error__popup),qr(1),Ur("ngIf",1==i.error__popup))},dependencies:[s_],styles:['*[_ngcontent-%COMP%]{color:var(--background__color__white);transition-duration:.2s}.backhome[_ngcontent-%COMP%]{margin-top:8vw;margin-left:8vw;height:8vw;width:8vw;border-radius:100%;border-top:1px solid var(--octimal__green);border-right:1px solid var(--octimal__green);cursor:pointer}.backhome[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:10vw;margin-left:-2vw;margin-bottom:1vw}.backhome[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:1.5vw}.backhome[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{margin-left:-2.5vw}.backhome[_ngcontent-%COMP%]:hover{background-color:var(--octimal__green)}.logone[_ngcontent-%COMP%]{transform:rotate(15deg);text-align:center;font-family:Montserrat,sans-serif!important;font-size:35em;color:var(--logone);position:absolute;margin-top:-2vw;margin-left:-15vw;z-index:0}.centro[_ngcontent-%COMP%]{margin:8vw 10vw 10vw;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr;grid-template-areas:". card_logsig .";min-height:30vw;z-index:99;position:relative}.sotto[_ngcontent-%COMP%]{margin-top:8%;z-index:2!important;font-size:80%;padding:2% 1%;width:100%;margin-left:-1.3cm;background-color:var(--background__color__black__trasparent);border-top:2px solid var(--color__black__light);z-index:99;position:relative}.sotto[_ngcontent-%COMP%]:hover{border-top:2px solid var(--octimal__green)}.f1[_ngcontent-%COMP%]{grid-area:f1;display:grid;grid-template-columns:1.3fr 1fr 1fr;padding:1% 10% 0%;grid-template-rows:1fr;grid-template-areas:"f_c1 f_c2 f_c3";margin-bottom:4%}.f2[_ngcontent-%COMP%]{grid-area:f2}.f_c1[_ngcontent-%COMP%]{text-align:center}.f_c1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{cursor:pointer;padding-top:4%;text-align:center;font-family:Montserrat,sans-serif!important;line-height:.1cm}.f_c1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:70%;margin-top:-.5cm;color:var(--octimal__green)}.sotto[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4%}.inputs[_ngcontent-%COMP%]{margin:1vw 0;display:grid;grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr}.inputs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:2cm}.inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 1vw;font-size:100%;width:80%;height:1cm;background-color:#0e0e0e00;border:none;border-bottom:1px solid var(--color__black__light);border-radius:10px;text-align:center}.inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-bottom:2px solid var(--octimal__green)}.inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-bottom:2px solid var(--octimal__green);outline:none}.card_logsig[_ngcontent-%COMP%]{text-align:center;grid-area:card_logsig}.card_logsig[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em}.bottoni[_ngcontent-%COMP%]{display:block;text-align:center}button[_ngcontent-%COMP%]{width:8cm;padding:.5vw 1.5vw;border-radius:6px;cursor:pointer;margin:0vw 2vw}.bt1[_ngcontent-%COMP%]{border:1px solid var(--octimal__green);background-color:var(--octimal__green)}.bt2[_ngcontent-%COMP%], .bt1[_ngcontent-%COMP%]:hover{background-color:transparent;border:1px solid var(--octimal__green)}.bt2[_ngcontent-%COMP%]:hover{border:1px solid var(--octimal__green);background-color:var(--octimal__green)}button[_ngcontent-%COMP%]:hover{padding:.5vw 1.5vw;border-radius:6px}']})}return n})();const L2e=[{path:"",component:wx},{path:"services",component:NN},{path:"profile",component:cQ}];let F2e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n});static#n=this.\u0275inj=Lr({imports:[a8.forRoot(L2e),a8]})}return n})();Rt("firebase","10.7.0","app");class B2e extends ps{constructor(e,t){super()}schedule(e,t=0){return this}}const Ux={setInterval(n,e,...t){const{delegate:r}=Ux;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ux;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class lQ extends B2e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ux.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Ux.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Sh(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const uQ={now:()=>(uQ.delegate||Date).now(),delegate:void 0};class av{constructor(e,t=av.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}av.now=uQ.now;class dQ extends av{constructor(e,t=av.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const G2e=new class H2e extends dQ{}(class z2e extends lQ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),W2e=new dQ(lQ),Ns=new Om("ANGULARFIRE2_VERSION"),W2=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function Ga(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Wa=(n,e)=>{const t=e?[e]:Qq(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class ng{constructor(){return Wa(hQ)}}const hQ="app-check";function rg(){}class fQ{zone;delegate;constructor(e,t=G2e){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class $2e{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rg,{},rg,rg)),t.pipe(mi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ia=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new fQ(Zone.current)),this.insideAngular=t.run(()=>new fQ(Zone.current,W2e)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ve(At))};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ig(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Yd(n){return ig().ngZone.run(()=>n())}function q2e(n){return function K2e(n){return function(t){return(t=t.lift(new $2e(n.ngZone))).pipe(N0(n.outsideAngular),D0(n.insideAngular))}}(ig())(n)}const Y2e=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Yd(()=>n.apply(void 0,r))},Os=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Yd(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rg,{},rg,rg))),r[s]=Y2e(r[s],t));const i=function j2e(n){return ig().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof jn){const s=ig();return i.pipe(N0(s.outsideAngular),D0(s.insideAngular))}return Yd(()=>i)}return i instanceof jn?i.pipe(q2e):i instanceof Promise?Yd(()=>new Promise((s,o)=>i.then(a=>Yd(()=>s(a)),a=>Yd(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Yd(()=>i)};class co{constructor(e){return e}}class sa{constructor(){return Qq()}}const $2=new De("angularfire2._apps"),Q2e={provide:co,useFactory:function X2e(n){return n&&1===n.length?n[0]:new co(ea())},deps:[[new Gt,$2]]},Z2e={provide:sa,deps:[[new Gt,$2]]};function J2e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new co(r)}}let eke=(()=>{class n{constructor(t){Rt("angularfire",Ns.full,"core"),Rt("angularfire",Ns.full,"app"),Rt("angular",Z4.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ve(Go))};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[Q2e,Z2e]})}return n})();function tke(n,...e){return{ngModule:eke,providers:[{provide:$2,useFactory:J2e(n),multi:!0,deps:[At,Nn,ia,...e]}]}}const nke=Os(Xq,!0);function rke(n){return new jn(function(e){var t=function tOe(n,e,t,r){return Ln(n).onAuthStateChanged(e,t,r)}(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}class Vx{constructor(e){return e}}class cv{constructor(){return Wa("auth")}}const j2=new De("angularfire2.auth-instances");function oke(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vx(r)}}const ake={provide:cv,deps:[[new Gt,j2]]},cke={provide:Vx,useFactory:function ske(n,e){const t=Ga("auth",n,e);return t&&new Vx(t)},deps:[[new Gt,j2],co]};let lke=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"auth")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[cke,ake]})}return n})();function uke(n,...e){return{ngModule:lke,providers:[{provide:j2,useFactory:oke(n),multi:!0,deps:[At,Nn,ia,sa,[new Gt,ng],...e]}]}}const dke=Os(rke,!0),hke=Os(G2,!0);const gke=(n,e)=>e.some(t=>n instanceof t);let gQ,mQ;const _Q=new WeakMap,q2=new WeakMap,yQ=new WeakMap,K2=new WeakMap,Y2=new WeakMap;let X2={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return q2.get(n);if("objectStoreNames"===e)return n.objectStoreNames||yQ.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lu(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Tke(n){return"function"==typeof n?function wke(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _ke(){return mQ||(mQ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Q2(this),e),lu(_Q.get(this))}:function(...e){return lu(n.apply(Q2(this),e))}:function(e,...t){const r=n.call(Q2(this),e,...t);return yQ.set(r,e.sort?e.sort():[e]),lu(r)}}(n):(n instanceof IDBTransaction&&function vke(n){if(q2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});q2.set(n,e)}(n),gke(n,function mke(){return gQ||(gQ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,X2):n)}function lu(n){if(n instanceof IDBRequest)return function yke(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(lu(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&_Q.set(t,n)}).catch(()=>{}),Y2.set(e,n),e}(n);if(K2.has(n))return K2.get(n);const e=Tke(n);return e!==n&&(K2.set(n,e),Y2.set(e,n)),e}const Q2=n=>Y2.get(n),xke=["get","getKey","getAll","getAllKeys","count"],Ske=["put","add","delete","clear"],Z2=new Map;function vQ(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Z2.get(e))return Z2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ske.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!xke.includes(t))return;const s=function(){var o=O(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return Z2.set(e,s),s}!function Eke(n){X2=n(X2)}(n=>({...n,get:(e,t,r)=>vQ(e,t)||n.get(e,t,r),has:(e,t)=>!!vQ(e,t)||n.has(e,t)}));const EQ="@firebase/installations",J2="0.6.4",wQ=1e4,TQ=`w:${J2}`,bQ="FIS_v2",Ike="https://firebaseinstallations.googleapis.com/v1",Cke=36e5,Xc=new Jo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xQ(n){return n instanceof so&&n.code.includes("request-failed")}function ek({projectId:n}){return`${Ike}/projects/${n}/installations`}function SQ(n){return{token:n.token,requestStatus:2,expiresIn:Pke(n.expiresIn),creationTime:Date.now()}}function tk(n,e){return nk.apply(this,arguments)}function nk(){return nk=O(function*(n,e){const r=(yield e.json()).error;return Xc.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),nk.apply(this,arguments)}function IQ({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rk(n){return ik.apply(this,arguments)}function ik(){return ik=O(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),ik.apply(this,arguments)}function Pke(n){return Number(n.replace("s","000"))}function sk(){return sk=O(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=ek(n),i=IQ(n),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:bQ,appId:n.appId,sdkVersion:TQ})},c=yield rk(()=>fetch(r,a));if(c.ok){const l=yield c.json();return{fid:l.fid||t,registrationStatus:2,refreshToken:l.refreshToken,authToken:SQ(l.authToken)}}throw yield tk("Create Installation",c)}),sk.apply(this,arguments)}function AQ(n){return new Promise(e=>{setTimeout(e,n)})}const kke=/^[cdef][\w-]{21}$/,ok="";function Lke(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Fke(n){return function Oke(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return kke.test(t)?t:ok}catch{return ok}}function sg(n){return`${n.appName}!${n.appId}`}const og=new Map;function MQ(n,e){const t=sg(n);RQ(t,e),function Bke(n,e){const t=function PQ(){return!Xd&&"BroadcastChannel"in self&&(Xd=new BroadcastChannel("[Firebase] FID Change"),Xd.onmessage=n=>{RQ(n.data.key,n.data.fid)}),Xd}();t&&t.postMessage({key:n,fid:e}),function DQ(){0===og.size&&Xd&&(Xd.close(),Xd=null)}()}(t,e)}function RQ(n,e){const t=og.get(n);if(t)for(const r of t)r(e)}let Xd=null;const zke="firebase-installations-database",Hke=1,Qd="firebase-installations-store";let ak=null;function ck(){return ak||(ak=function bke(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=lu(o);return r&&o.addEventListener("upgradeneeded",c=>{r(lu(o.result),c.oldVersion,c.newVersion,lu(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(zke,Hke,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Qd)}})),ak}function Bx(n,e){return lk.apply(this,arguments)}function lk(){return lk=O(function*(n,e){const t=sg(n),i=(yield ck()).transaction(Qd,"readwrite"),s=i.objectStore(Qd),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&MQ(n,e.fid),e}),lk.apply(this,arguments)}function uk(n){return dk.apply(this,arguments)}function dk(){return dk=O(function*(n){const e=sg(n),r=(yield ck()).transaction(Qd,"readwrite");yield r.objectStore(Qd).delete(e),yield r.done}),dk.apply(this,arguments)}function lv(n,e){return hk.apply(this,arguments)}function hk(){return hk=O(function*(n,e){const t=sg(n),i=(yield ck()).transaction(Qd,"readwrite"),s=i.objectStore(Qd),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&MQ(n,a.fid),a}),hk.apply(this,arguments)}function fk(n){return pk.apply(this,arguments)}function pk(){return pk=O(function*(n){let e;const t=yield lv(n.appConfig,r=>{const i=function Gke(n){return OQ(n||{fid:Lke(),registrationStatus:0})}(r),s=function Wke(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Xc.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function $ke(n,e){return gk.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:jke(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===ok?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),pk.apply(this,arguments)}function gk(){return gk=O(function*(n,e){try{const t=yield function Nke(n,e){return sk.apply(this,arguments)}(n,e);return Bx(n.appConfig,t)}catch(t){throw xQ(t)&&409===t.customData.serverCode?yield uk(n.appConfig):yield Bx(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),gk.apply(this,arguments)}function jke(n){return mk.apply(this,arguments)}function mk(){return mk=O(function*(n){let e=yield NQ(n.appConfig);for(;1===e.registrationStatus;)yield AQ(100),e=yield NQ(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield fk(n);return r||t}return e}),mk.apply(this,arguments)}function NQ(n){return lv(n,e=>{if(!e)throw Xc.create("installation-not-found");return OQ(e)})}function OQ(n){return function qke(n){return 1===n.registrationStatus&&n.registrationTime+wQ<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function _k(){return _k=O(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Yke(n,{fid:e}){return`${ek(n)}/${e}/authTokens:generate`}(n,t),i=function CQ(n,{refreshToken:e}){const t=IQ(n);return t.append("Authorization",function Dke(n){return`${bQ} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:TQ,appId:n.appId}})},c=yield rk(()=>fetch(r,a));if(c.ok)return SQ(yield c.json());throw yield tk("Generate Auth Token",c)}),_k.apply(this,arguments)}function yk(n){return vk.apply(this,arguments)}function vk(){return vk=O(function*(n,e=!1){let t;const r=yield lv(n.appConfig,s=>{if(!LQ(s))throw Xc.create("not-registered");const o=s.authToken;if(!e&&function Zke(n){return 2===n.requestStatus&&!function Jke(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Cke}(n)}(o))return s;if(1===o.requestStatus)return t=function Xke(n,e){return Ek.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw Xc.create("app-offline");const a=function eLe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function Qke(n,e){return wk.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),vk.apply(this,arguments)}function Ek(){return Ek=O(function*(n,e){let t=yield kQ(n.appConfig);for(;1===t.authToken.requestStatus;)yield AQ(100),t=yield kQ(n.appConfig);const r=t.authToken;return 0===r.requestStatus?yk(n,e):r}),Ek.apply(this,arguments)}function kQ(n){return lv(n,e=>{if(!LQ(e))throw Xc.create("not-registered");return function tLe(n){return 1===n.requestStatus&&n.requestTime+wQ<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function wk(){return wk=O(function*(n,e){try{const t=yield function Kke(n,e){return _k.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Bx(n.appConfig,r),t}catch(t){if(!xQ(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Bx(n.appConfig,r)}else yield uk(n.appConfig);throw t}}),wk.apply(this,arguments)}function LQ(n){return void 0!==n&&2===n.registrationStatus}function Tk(){return Tk=O(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield fk(e);return r?r.catch(console.error):yk(e).catch(console.error),t.fid}),Tk.apply(this,arguments)}function bk(){return bk=O(function*(n,e=!1){const t=n;return yield function iLe(n){return xk.apply(this,arguments)}(t),(yield yk(t,e)).token}),bk.apply(this,arguments)}function xk(){return xk=O(function*(n){const{registrationPromise:e}=yield fk(n);e&&(yield e)}),xk.apply(this,arguments)}function Ck(n){return Xc.create("missing-app-config-values",{valueName:n})}const FQ="installations",lLe=n=>{const e=n.getProvider("app").getImmediate(),t=function aLe(n){if(!n||!n.options)throw Ck("App Configuration");if(!n.name)throw Ck("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ck(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Li(e,"heartbeat"),_delete:()=>Promise.resolve()}},uLe=n=>{const t=Li(n.getProvider("app").getImmediate(),FQ).getImmediate();return{getId:()=>function nLe(n){return Tk.apply(this,arguments)}(t),getToken:i=>function rLe(n){return bk.apply(this,arguments)}(t,i)}};(function dLe(){Hr(new Dr(FQ,lLe,"PUBLIC")),Hr(new Dr("installations-internal",uLe,"PRIVATE"))})(),Rt(EQ,J2),Rt(EQ,J2,"esm2017");const zx="analytics",hLe="firebase_id",fLe="origin",pLe=6e4,gLe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ak="https://www.googletagmanager.com/gtag/js",ni=new Yl("@firebase/analytics"),as=new Jo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function _Le(n){if(!n.startsWith(Ak)){const e=as.create("invalid-gtag-resource",{gtagURL:n});return ni.warn(e.message),""}return n}function UQ(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Mk(){return Mk=O(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const c=(yield UQ(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){ni.error(a)}n("config",i,s)}),Mk.apply(this,arguments)}function Rk(){return Rk=O(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield UQ(t);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){ni.error(s)}}),Rk.apply(this,arguments)}const ILe=30,VQ=new class ALe{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function MLe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Pk(){return Pk=O(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:MLe(r)},s=gLe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const c=yield o.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw as.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),Pk.apply(this,arguments)}function Dk(){return Dk=O(function*(n,e=VQ,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw as.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw as.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new OLe;return setTimeout(O(function*(){a.abort()}),void 0!==t?t:pLe),BQ({appId:r,apiKey:i,measurementId:s},o,a,e)}),Dk.apply(this,arguments)}function BQ(n,e,t){return Nk.apply(this,arguments)}function Nk(){return Nk=O(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=VQ){var s;const{appId:o,measurementId:a}=n;try{yield function DLe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(as.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw c}try{const c=yield function RLe(n){return Pk.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),c}catch(c){const l=c;if(!function NLe(n){if(!(n instanceof so&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(i.deleteThrottleMetadata(o),a)return ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw c}const u=503===Number(null===(s=l?.customData)||void 0===s?void 0:s.httpStatus)?Ob(t,i.intervalMillis,ILe):Ob(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),ni.debug(`Calling attemptFetch again in ${u} millis`),BQ(n,d,r,i)}}),Nk.apply(this,arguments)}class OLe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ok,zk;function kk(){return kk=O(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}}),kk.apply(this,arguments)}function Fk(){return Fk=O(function*(n,e,t,r){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();n("config",yield e,{update:!0,user_id:t})}),Fk.apply(this,arguments)}function Hk(){return Hk=O(function*(){if(!Vc())return ni.warn(as.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Up()}catch(n){return ni.warn(as.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),Hk.apply(this,arguments)}function Gk(){return Gk=O(function*(n,e,t,r,i,s,o){var a;const c=function PLe(n){return Dk.apply(this,arguments)}(n);c.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&ni.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ni.error(f)),e.push(c);const l=function zLe(){return Hk.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([c,l]);(function SLe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ak)&&t.src.includes(n))return t;return null})(s)||function vLe(n,e){const t=function yLe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:_Le}),r=document.createElement("script"),i=`${Ak}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),zk&&(i("consent","default",zk),function zQ(n){zk=n}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[fLe]="firebase",h.update=!0,null!=d&&(h[hLe]=d),i("config",u.measurementId,h),Ok&&(i("set",Ok),function HQ(n){Ok=n}(void 0)),u.measurementId}),Gk.apply(this,arguments)}class GLe{constructor(e){this.app=e}_delete(){return delete $a[this.app.options.appId],Promise.resolve()}}let $a={},GQ=[];const WQ={};let jQ,ja,Hx="dataLayer",Wk=!1;function $Le(n,e,t){!function WLe(){const n=[];if(cD()&&n.push("This is a browser extension environment."),Rb()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=as.create("invalid-analytics-context",{errorInfo:e});ni.warn(t.message)}}();const r=n.options.appId;if(!r)throw as.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw as.create("no-api-key");ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$a[r])throw as.create("already-exists",{id:r});if(!Wk){!function ELe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Hx);const{wrappedGtag:s,gtagCore:o}=function xLe(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function bLe(n,e,t,r){function s(){return s=O(function*(o,...a){try{if("event"===o){const[c,l]=a;yield function TLe(n,e,t,r,i){return Rk.apply(this,arguments)}(n,e,t,c,l)}else if("config"===o){const[c,l]=a;yield function wLe(n,e,t,r,i,s){return Mk.apply(this,arguments)}(n,e,t,r,c,l)}else if("consent"===o){const[c]=a;n("consent","update",c)}else if("get"===o){const[c,l,u]=a;n("get",c,l,u)}else if("set"===o){const[c]=a;n("set",c)}else n(o,...a)}catch(c){ni.error(c)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}($a,GQ,WQ,Hx,"gtag");ja=s,jQ=o,Wk=!0}return $a[r]=function HLe(n,e,t,r,i,s,o){return Gk.apply(this,arguments)}(n,GQ,WQ,e,jQ,Hx,t),new GLe(n)}function jLe(n=ea()){const e=Li(n=Ln(n),zx);return e.isInitialized()?e.getImmediate():function qLe(n,e={}){const t=Li(n,zx);if(t.isInitialized()){const i=t.getImmediate();if(my(e,t.getOptions()))return i;throw as.create("already-initialized")}return t.initialize({options:e})}(n)}function KLe(){return $k.apply(this,arguments)}function $k(){return($k=O(function*(){if(cD()||!Rb()||!Vc())return!1;try{return yield Up()}catch{return!1}})).apply(this,arguments)}function YLe(n,e,t){n=Ln(n),function FLe(n,e,t,r){return Fk.apply(this,arguments)}(ja,$a[n.app.options.appId],e,t).catch(r=>ni.error(r))}function qQ(n,e,t,r){n=Ln(n),function kLe(n,e,t,r,i){return kk.apply(this,arguments)}(ja,$a[n.app.options.appId],e,t,r).catch(i=>ni.error(i))}const KQ="@firebase/analytics";!function XLe(){Hr(new Dr(zx,(e,{options:t})=>$Le(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Hr(new Dr("analytics-internal",function n(e){try{const t=e.getProvider(zx).getImmediate();return{logEvent:(r,i,s)=>qQ(t,r,i,s)}}catch(t){throw as.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Rt(KQ,"0.10.0"),Rt(KQ,"0.10.0","esm2017")}();class uv{constructor(e){return e}}const XQ="analytics",qk="__angularfire_symbol__analyticsIsSupportedValue",QQ="__angularfire_symbol__analyticsIsSupported";globalThis[QQ]||=KLe().then(n=>globalThis[qk]=n).catch(()=>globalThis[qk]=!1);const Gx={async:()=>globalThis[QQ],sync:()=>{const n=globalThis[qk];if(void 0===n)throw new Error(W2("Analytics"));return n}},ZQ=Gx.async,ZLe=Os(jLe,!0),JLe=Os(qQ,!0),eFe=Os(YLe,!0);let Kk=(()=>{class n{initialized;disposables=[];constructor(t,r,i){let s;Rt("angularfire",Ns.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),ZQ().then(()=>{const o=i.get(uv);o?this.disposables=[dke(t).subscribe(a=>{eFe(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(Ve(Vx),Ve(At),Ve(Nn))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();const JQ="firebase_screen_id",Yk="outlet",dv="screen_class",eZ="screen_name";let hFe=Math.floor(Math.random()*(2**32-1))-2**31;const Xk={},fFe=n=>{const e=[n[dv],n[Yk]].join("#");if(Xk.hasOwnProperty(e))return Xk[e];{const t=hFe++;return Xk[e]=t,t}},pFe=(n,e,t)=>n.events.pipe(ba(i=>i instanceof I$)).pipe(_o(i=>{const o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,h=>h.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(h=>h).find(h=>h.outlet===i.snapshot.outlet);if(!a)return Je(null);let c=a;for(;c.firstChild;)c=c.firstChild;const l=c.pathFromRoot.map(h=>h.routeConfig?.path).filter(h=>h).join("/")||"/",u={[eZ]:l,page_path:`/${o}`,firebase_event_origin:"auto",firebase_screen:l,[Yk]:i.snapshot.outlet};e&&(u.page_title=e.getTitle());let d=a.component;if(d){if(d===D1){let h=i.snapshot;for(;h.firstChild;)h=h.firstChild;d=h.component}}else d=i.snapshot.component;if("string"==typeof d)return Je({...u,[dv]:d});if(d){const h=t.resolveComponentFactory(d);return Je({...u,[dv]:h.selector})}return Je(null)}),ba(i=>!!i),gn(i=>({firebase_screen_class:i[dv],[JQ]:fFe(i),...i})),function fke(n,e,t,r){return fr((i,s)=>{let o;e&&"function"!=typeof e?({duration:t,element:o,connector:r}=e):o=e;const a=new Map,c=p=>{a.forEach(p),p(s)},l=p=>c(g=>g.error(p));let u=0,d=!1;const h=new Q3(s,p=>{try{const g=n(p);let m=a.get(g);if(!m){a.set(g,m=r?r():new go);const _=function f(p,g){const m=new jn(_=>{u++;const y=g.subscribe(_);return()=>{y.unsubscribe(),0==--u&&d&&h.unsubscribe()}});return m.key=p,m}(g,m);if(s.next(_),t){const y=pr(m,()=>{m.complete(),y?.unsubscribe()},void 0,void 0,()=>a.delete(g));h.add(Vs(t(_)).subscribe(y))}}m.next(o?o(p):p)}catch(g){l(g)}},()=>c(p=>p.complete()),l,()=>a.clear(),()=>(d=!0,0===u));i.subscribe(h)})}(i=>i[Yk]),$r(i=>i.pipe(pB((s,o)=>JSON.stringify(s)===JSON.stringify(o)),i$(void 0),function pke(){return fr((n,e)=>{let t,r=!1;n.subscribe(pr(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}(),gn(([s,o])=>s?{firebase_previous_class:s[dv],firebase_previous_screen:s[eZ],firebase_previous_id:s[JQ],...o}:o))));let tZ=(()=>{class n{disposable;constructor(t,r,i,s,o,a){Rt("angularfire",Ns.full,"screen-tracking"),ZQ().then(()=>{const c=a.get(uv);!t||!c||s.runOutsideAngular(()=>{this.disposable=pFe(t,r,i).pipe(_o(function(){var l=O(function*(u){return o&&(yield o.initialized),JLe(c,"screen_view",u)});return function(u){return l.apply(this,arguments)}}())).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(Ve(js,8),Ve(h1,8),Ve(Nm),Ve(At),Ve(Kk,8),Ve(Nn))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();const Qk=new De("angularfire2.analytics-instances");function mFe(n){return(e,t)=>{if(!Gx.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new uv(r)}}const _Fe={provide:class QLe{constructor(){return Wa(XQ)}},deps:[[new Gt,Qk]]},yFe={provide:uv,useFactory:function gFe(n,e){if(!Gx.sync())return null;const t=Ga(XQ,n,e);return t&&new uv(t)},deps:[[new Gt,Qk],co]};let vFe=(()=>{class n{constructor(t,r){Rt("angularfire",Ns.full,"analytics")}static \u0275fac=function(r){return new(r||n)(Ve(tZ,8),Ve(Kk,8))};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[yFe,_Fe,{provide:bf,useValue:Gx.async,multi:!0}]})}return n})();function EFe(n,...e){return{ngModule:vFe,providers:[{provide:Qk,useFactory:mFe(n),multi:!0,deps:[At,Nn,ia,sa,...e]}]}}const Zk=new Map,nZ={activated:!1,tokenObservers:[]},wFe={initialized:!1,enabled:!1};function lr(n){return Zk.get(n)||Object.assign({},nZ)}function Wx(){return wFe}const Jk="https://content-firebaseappcheck.googleapis.com/v1",SFe="exchangeDebugToken",rZ={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class CFe{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return O(function*(){t.stop();try{t.pending=new Fc,yield function AFe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Fc,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vi=new Jo("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $x(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function eL(n){if(!lr(n).activated)throw vi.create("use-before-activation",{appName:n.name})}function tL(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=jx(t)+"d:"),r&&(o+=jx(r)+"h:"),o+=jx(i)+"m:"+jx(s)+"s",o}function jx(n){return 0===n?"00":n>=10?n.toString():"0"+n}function qx(n,e){return nL.apply(this,arguments)}function nL(){return nL=O(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(d){throw vi.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw vi.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw vi.create("fetch-parse-error",{originalErrorMessage:d?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}}),nL.apply(this,arguments)}function iZ(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Jk}/projects/${t}/apps/${r}:${SFe}?key=${i}`,body:{debug_token:e}}}const DFe="firebase-app-check-database",NFe=1,hv="firebase-app-check-store",sZ="debug-token";let Kx=null;function oZ(){return Kx||(Kx=new Promise((n,e)=>{try{const t=indexedDB.open(DFe,NFe);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(vi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hv,{keyPath:"compositeKey"})}}catch(t){e(vi.create("storage-open",{originalErrorMessage:t?.message}))}}),Kx)}function aZ(n,e){return rL.apply(this,arguments)}function rL(){return rL=O(function*(n,e){const r=(yield oZ()).transaction(hv,"readwrite"),s=r.objectStore(hv).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(vi.create("storage-set",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))}})}),rL.apply(this,arguments)}function cZ(n){return iL.apply(this,arguments)}function iL(){return iL=O(function*(n){const t=(yield oZ()).transaction(hv,"readonly"),i=t.objectStore(hv).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const c=a.target.result;s(c?c.value:void 0)},t.onerror=a=>{var c;o(vi.create("storage-get",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))}})}),iL.apply(this,arguments)}function lZ(n){return`${n.options.appId}-${n.name}`}const fv=new Yl("@firebase/app-check");function sL(){return sL=O(function*(n){if(Vc()){let e;try{e=yield function OFe(n){return cZ(lZ(n))}(n)}catch(t){fv.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}}),sL.apply(this,arguments)}function oL(n,e){return Vc()?function kFe(n,e){return aZ(lZ(n),e)}(n,e).catch(t=>{fv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aL(){return aL=O(function*(){let n;try{n=yield function FFe(){return cZ(sZ)}()}catch{}if(n)return n;{const e=QAe();return function LFe(n){return aZ(sZ,n)}(e).catch(t=>fv.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}}),aL.apply(this,arguments)}function cL(){return Wx().enabled}function lL(){return uL.apply(this,arguments)}function uL(){return uL=O(function*(){const n=Wx();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uL.apply(this,arguments)}const zFe={error:"UNKNOWN_ERROR"};function HFe(n){return Sb.encodeString(JSON.stringify(n),!1)}function Yx(n){return dL.apply(this,arguments)}function dL(){return dL=O(function*(n,e=!1){const t=n.app;eL(t);const r=lr(t);let s,i=r.token;if(i&&!ag(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(ag(c)?i=c:yield oL(t,void 0))}if(!e&&i&&ag(i))return{token:i.token};let a,o=!1;if(cL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qx(iZ(t,yield lL()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const c=yield r.exchangeTokenPromise;return yield oL(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield lr(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?fv.warn(c.message):fv.error(c),s=c}return i?s?a=ag(i)?{token:i.token,internalError:s}:fZ(s):(a={token:i.token},r.token=i,yield oL(t,i)):a=fZ(s),o&&hZ(t,a),a}),dL.apply(this,arguments)}function hL(){return hL=O(function*(n){const e=n.app;eL(e);const{provider:t}=lr(e);if(cL()){const r=yield lL(),{token:i}=yield qx(iZ(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),hL.apply(this,arguments)}function fL(n,e,t,r){const{app:i}=n,s=lr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&ag(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),dZ(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>dZ(n))}function pL(n,e){const t=lr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function dZ(n){const{app:e}=n,t=lr(e);let r=t.tokenRefresher;r||(r=function GFe(n){const{app:e}=n;return new CFe(O(function*(){let r;if(r=lr(e).token?yield Yx(n,!0):yield Yx(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},rZ.RETRIAL_MIN_WAIT,rZ.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hZ(n,e){const t=lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ag(n){return n.expireTimeMillis-Date.now()>0}function fZ(n){return{token:HFe(zFe),error:n}}class WFe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=lr(this.app);for(const t of e)pL(this.app,t.next);return Promise.resolve()}}function ZFe(n,e){const t=new Fc;lr(n).reCAPTCHAState={initialized:t};const i=function pZ(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=$x(!0);return s?Xx(n,e,s,i,t):function tUe(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/enterprise.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=$x(!0);if(!o)throw new Error("no recaptcha");Xx(n,e,o,i,t)}),t.promise}function Xx(n,e,t,r,i){t.ready(()=>{(function JFe(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible",callback:()=>{lr(n).reCAPTCHAState.succeeded=!0},"error-callback":()=>{lr(n).reCAPTCHAState.succeeded=!1}}),s=lr(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function gL(){return gL=O(function*(n){eL(n);const t=yield lr(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=lr(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})}),gL.apply(this,arguments)}class mL{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return O(function*(){var t,r,i;!function vZ(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw vi.create("throttled",{time:tL(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const s=yield function gZ(n){return gL.apply(this,arguments)}(e._app).catch(a=>{throw vi.create("recaptcha-error")});if(null===(t=lr(e._app).reCAPTCHAState)||void 0===t||!t.succeeded)throw vi.create("recaptcha-error");let o;try{o=yield qx(function PFe(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Jk}/projects/${t}/apps/${r}:exchangeRecaptchaEnterpriseToken?key=${i}`,body:{recaptcha_enterprise_token:e}}}(e._app,s),e._heartbeatServiceProvider)}catch(a){throw null!==(r=a.code)&&void 0!==r&&r.includes("fetch-status-error")?(e._throttleData=function yZ(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=Ob(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(i=a.customData)||void 0===i?void 0:i.httpStatus),e._throttleData),vi.create("throttled",{time:tL(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):a}return e._throttleData=null,o})()}initialize(e){this._app=e,this._heartbeatServiceProvider=Li(e,"heartbeat"),ZFe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof mL&&this._siteKey===e._siteKey}}function nUe(n=ea(),e){const t=Li(n=Ln(n),"app-check");if(Wx().initialized||function BFe(){const n=Fq(),e=Wx();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new Fc;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function VFe(){return aL.apply(this,arguments)}())}(),cL()&&lL().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw vi.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function rUe(n,e,t){const r=function TFe(n,e){return Zk.set(n,e),Zk.get(n)}(n,Object.assign({},nZ));r.activated=!0,r.provider=e,r.cachedTokenPromise=function UFe(n){return sL.apply(this,arguments)}(n).then(i=>(i&&ag(i)&&(r.token=i,hZ(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),lr(n).isTokenAutoRefreshEnabled&&fL(r,"INTERNAL",()=>{}),r}const EZ="app-check-internal";!function sUe(){Hr(new Dr("app-check",n=>function $Fe(n,e){return new WFe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EZ).initialize()})),Hr(new Dr(EZ,n=>function jFe(n){return{getToken:e=>Yx(n,e),getLimitedUseToken:()=>function uZ(n){return hL.apply(this,arguments)}(n),addTokenListener:e=>fL(n,"INTERNAL",e),removeTokenListener:e=>pL(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Rt("@firebase/app-check","0.8.0")}();class yL{constructor(e){return e}}const vL=new De("angularfire2.app-check-instances"),aUe=typeof window<"u"&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname);function cUe(n){return(e,t,r)=>{!n1(r)&&aUe&&(globalThis.FIREBASE_APPCHECK_DEBUG_TOKEN??=!0);const i=e.runOutsideAngular(()=>n(t));return new yL(i)}}const lUe={provide:ng,deps:[[new Gt,vL]]},uUe={provide:yL,useFactory:function oUe(n,e){const t=Ga(hQ,n,e);return t&&new yL(t)},deps:[[new Gt,vL],co,Go]};let dUe=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"app-check")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[uUe,lUe]})}return n})();function hUe(n,...e){return{ngModule:dUe,providers:[{provide:vL,useFactory:cUe(n),multi:!0,deps:[At,Nn,Go,ia,sa,...e]}]}}const fUe=Os(nUe,!0);var Ae,pUe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oa={},EL=EL||{},ft=pUe||self;function Qx(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function pv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var wL="closure_uid_"+(1e9*Math.random()>>>0),mUe=0;function _Ue(n,e,t){return n.call.apply(n.bind,arguments)}function yUe(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ui(n,e,t){return(Ui=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_Ue:yUe).apply(null,arguments)}function Zx(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function uu(){this.s=this.s,this.o=this.o}uu.prototype.s=!1,uu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function gUe(n){Object.prototype.hasOwnProperty.call(n,wL)&&n[wL]||(n[wL]=++mUe)}(this)},uu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wZ=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function TL(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function TZ(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Qx(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Vi.prototype.h=function(){this.defaultPrevented=!0};var EUe=function(){if(!ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};ft.addEventListener("test",t,e),ft.removeEventListener("test",t,e)}catch{}return n}();function gv(n){return/^[\s\xa0]*$/.test(n)}function Jx(){var n=ft.navigator;return n&&(n=n.userAgent)?n:""}function qa(n){return-1!=Jx().indexOf(n)}function bL(n){return bL[" "](n),n}bL[" "]=function(){};var SL,TUe=qa("Opera"),cg=qa("Trident")||qa("MSIE"),bZ=qa("Edge"),xL=bZ||cg,xZ=qa("Gecko")&&!(-1!=Jx().toLowerCase().indexOf("webkit")&&!qa("Edge"))&&!(qa("Trident")||qa("MSIE"))&&!qa("Edge"),bUe=-1!=Jx().toLowerCase().indexOf("webkit")&&!qa("Edge");function SZ(){var n=ft.document;return n?n.documentMode:void 0}e:{var IL="",CL=function(){var n=Jx();return xZ?/rv:([^\);]+)(\)|;)/.exec(n):bZ?/Edge\/([\d\.]+)/.exec(n):cg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bUe?/WebKit\/(\S+)/.exec(n):TUe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(CL&&(IL=CL?CL[1]:""),cg){var AL=SZ();if(null!=AL&&AL>parseFloat(IL)){SL=String(AL);break e}}SL=IL}var xUe=ft.document&&cg&&(SZ()||parseInt(SL,10))||void 0;function mv(n,e){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xZ){e:{try{bL(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:SUe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&mv.$.h.call(this)}}ri(mv,Vi);var SUe={2:"touch",3:"pen",4:"mouse"};mv.prototype.h=function(){mv.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _v="closure_listenable_"+(1e6*Math.random()|0),IUe=0;function CUe(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++IUe,this.fa=this.ia=!1}function eS(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function RL(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function CZ(n){const e={};for(const t in n)e[t]=n[t];return e}const AZ="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function MZ(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<AZ.length;s++)t=AZ[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tS(n){this.src=n,this.g={},this.h=0}function PL(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=wZ(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(eS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function DL(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}tS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=DL(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new CUe(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var NL="closure_lm_"+(1e6*Math.random()|0),OL={};function RZ(n,e,t,r,i){if(r&&r.once)return DZ(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)RZ(n,e[s],t,r,i);return null}return t=UL(t),n&&n[_v]?n.O(e,t,pv(r)?!!r.capture:!!r,i):PZ(n,e,t,!1,r,i)}function PZ(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=pv(i)?!!i.capture:!!i,a=LL(n);if(a||(n[NL]=a=new tS(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function MUe(){const e=RUe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)EUe||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(OZ(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function DZ(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)DZ(n,e[s],t,r,i);return null}return t=UL(t),n&&n[_v]?n.P(e,t,pv(r)?!!r.capture:!!r,i):PZ(n,e,t,!0,r,i)}function NZ(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)NZ(n,e[s],t,r,i);else r=pv(r)?!!r.capture:!!r,t=UL(t),n&&n[_v]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=DL(s=n.g[e],t,r,i))&&(eS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=LL(n))&&(e=n.g[e.toString()],n=-1,e&&(n=DL(e,t,r,i)),(t=-1<n?e[n]:null)&&kL(t))}function kL(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[_v])PL(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(OZ(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=LL(e))?(PL(t,n),0==t.h&&(t.src=null,e[NL]=null)):eS(n)}}}function OZ(n){return n in OL?OL[n]:OL[n]="on"+n}function RUe(n,e){if(n.fa)n=!0;else{e=new mv(e,this);var t=n.listener,r=n.la||n.src;n.ia&&kL(n),n=t.call(r,e)}return n}function LL(n){return(n=n[NL])instanceof tS?n:null}var FL="__closure_events_fn_"+(1e9*Math.random()>>>0);function UL(n){return"function"==typeof n?n:(n[FL]||(n[FL]=function(e){return n.handleEvent(e)}),n[FL])}function ii(){uu.call(this),this.i=new tS(this),this.S=this,this.J=null}function Ei(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Vi(e,n);else if(e instanceof Vi)e.target=e.target||n;else{var i=e;MZ(e=new Vi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=nS(o,r,!0,e)&&i}if(i=nS(o=e.g=n,r,!0,e)&&i,i=nS(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=nS(o=e.g=t[s],r,!1,e)&&i}function nS(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&PL(n.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}ri(ii,uu),ii.prototype[_v]=!0,ii.prototype.removeEventListener=function(n,e,t,r){NZ(this,n,e,t,r)},ii.prototype.N=function(){if(ii.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)eS(t[r]);delete n.g[e],n.h--}}this.J=null},ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ii.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var VL=ft.JSON.stringify;function DUe(){var n=BL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kZ=new class PUe{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new OUe,n=>n.reset());class OUe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kUe(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function LUe(n){ft.setTimeout(()=>{throw n},0)}let yv,vv=!1,BL=new class NUe{constructor(){this.h=this.g=null}add(e,t){const r=kZ.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},LZ=()=>{const n=ft.Promise.resolve(void 0);yv=()=>{n.then(FUe)}};var FUe=()=>{for(var n;n=DUe();){try{n.h.call(n.g)}catch(t){LUe(t)}var e=kZ;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vv=!1};function rS(n,e){ii.call(this),this.h=n||1,this.g=e||ft,this.j=Ui(this.qb,this),this.l=Date.now()}function zL(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function HL(n,e,t){if("function"==typeof n)t&&(n=Ui(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ui(n.handleEvent,n)}return 2147483647<Number(e)?-1:ft.setTimeout(n,e||0)}function FZ(n){n.g=HL(()=>{n.g=null,n.i&&(n.i=!1,FZ(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(rS,ii),(Ae=rS.prototype).ga=!1,Ae.T=null,Ae.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ei(this,"tick"),this.ga&&(zL(this),this.start()))}},Ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ae.N=function(){rS.$.N.call(this),zL(this),delete this.g};class UUe extends uu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:FZ(this)}N(){super.N(),this.g&&(ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ev(n){uu.call(this),this.h=n,this.g={}}ri(Ev,uu);var UZ=[];function VZ(n,e,t,r){Array.isArray(t)||(t&&(UZ[0]=t.toString()),t=UZ);for(var i=0;i<t.length;i++){var s=RZ(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function BZ(n){RL(n.g,function(e,t){this.g.hasOwnProperty(t)&&kL(e)},n),n.g={}}function iS(){this.g=!0}function lg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function HUe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return VL(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ev.prototype.N=function(){Ev.$.N.call(this),BZ(this)},Ev.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iS.prototype.Ea=function(){this.g=!1},iS.prototype.info=function(){};var Zd={},zZ=null;function sS(){return zZ=zZ||new ii}function HZ(n){Vi.call(this,Zd.Ta,n)}function wv(n){const e=sS();Ei(e,new HZ(e))}function GZ(n,e){Vi.call(this,Zd.STAT_EVENT,n),this.stat=e}function cs(n){const e=sS();Ei(e,new GZ(e,n))}function WZ(n,e){Vi.call(this,Zd.Ua,n),this.size=e}function Tv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ft.setTimeout(function(){n()},e)}Zd.Ta="serverreachability",ri(HZ,Vi),Zd.STAT_EVENT="statevent",ri(GZ,Vi),Zd.Ua="timingevent",ri(WZ,Vi);var oS={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$Z={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function GL(){}function qZ(){}GL.prototype.h=null;var jL,bv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function WL(){Vi.call(this,"d")}function $L(){Vi.call(this,"c")}function aS(){}function xv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ev(this),this.P=GUe,this.V=new rS(n=xL?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new KZ}function KZ(){this.i=null,this.g="",this.h=!1}ri(WL,Vi),ri($L,Vi),ri(aS,GL),aS.prototype.g=function(){return new XMLHttpRequest},aS.prototype.i=function(){return{}},jL=new aS;var GUe=45e3,YZ={},qL={};function KL(n,e,t){n.L=1,n.A=dS(Qc(e)),n.u=t,n.S=!0,XZ(n,null)}function XZ(n,e){n.G=Date.now(),Sv(n),n.B=Qc(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),oJ(t.i,"t",r),n.o=0,t=n.l.J,n.h=new KZ,n.g=RJ(n.l,t?e:null,!n.u),0<n.O&&(n.M=new UUe(Ui(n.Pa,n,n.g),n.O)),VZ(n.U,n.g,"readystatechange",n.nb),e=n.I?CZ(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),wv(),function VUe(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function QZ(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function ZZ(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=WUe(n,t),i==qL){4==e&&(n.s=4,cs(14),r=!1),lg(n.j,n.m,null,"[Incomplete Response]");break}if(i==YZ){n.s=4,cs(15),lg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}lg(n.j,n.m,i,null),YL(n,i)}QZ(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),nF(e),e.M=!0,cs(11))):(lg(n.j,n.m,t,"[Invalid Chunked Response]"),Jd(n),Iv(n))}function WUe(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?qL:(t=Number(e.substring(t,r)),isNaN(t)?YZ:(r+=1)+t>e.length?qL:(e=e.slice(r,r+t),n.o=r+t,e))}function Sv(n){n.Y=Date.now()+n.P,JZ(n,n.P)}function JZ(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Tv(Ui(n.lb,n),e)}function cS(n){n.C&&(ft.clearTimeout(n.C),n.C=null)}function Iv(n){0==n.l.H||n.J||IJ(n.l,n)}function Jd(n){cS(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,zL(n.V),BZ(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function YL(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||XL(t.i,n)))if(!n.K&&XL(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;_S(t),gS(t)}tF(t),cs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Tv(Ui(t.ib,t),6e3));if(1>=lJ(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else th(t,11)}else if((n.K||t.g==n)&&_S(t),!gv(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(t.V=l[0],l=l[1],2==t.H)if("c"==l[0]){t.K=l[1],t.pa=l[2];const u=l[3];null!=u&&(t.ra=u,t.l.info("VER="+t.ra));const d=l[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(QL(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Vn(r.I,r.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=MJ(r,r.J?r.pa:null,r.Y),o.K){uJ(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(cS(a),Sv(a)),r.g=o}else xJ(r);0<t.j.length&&mS(t)}else"stop"!=l[0]&&"close"!=l[0]||th(t,7);else 3==t.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?th(t,7):eF(t):"noop"!=l[0]&&t.h&&t.h.Aa(l),t.A=0)}wv()}catch{}}function eJ(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qx(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function jUe(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Qx(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function $Ue(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Qx(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Ae=xv.prototype).setTimeout=function(n){this.P=n},Ae.nb=function(n){n=n.target;const e=this.M;e&&3==Ka(n)?e.l():this.Pa(n)},Ae.Pa=function(n){try{if(n==this.g)e:{const u=Ka(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||xL||this.g&&(this.h.h||this.g.ja()||yJ(this.g)))){this.J||4!=u||7==e||wv(),cS(this);var t=this.g.da();this.ca=t;t:if(QZ(this)){var r=yJ(this.g);n="";var i=r.length,s=4==Ka(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jd(this),Iv(this);var o="";break t}this.h.i=new ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function BUe(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gv(a)){var l=a;break t}}l=null}if(!(t=l)){this.i=!1,this.s=3,cs(12),Jd(this),Iv(this);break e}lg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,YL(this,t)}this.S?(ZZ(this,u,o),xL&&this.i&&3==u&&(VZ(this.U,this.V,"tick",this.mb),this.V.start())):(lg(this.j,this.m,o,null),YL(this,o)),4==u&&Jd(this),this.i&&!this.J&&(4==u?IJ(this.l,this):(this.i=!1,Sv(this)))}else(function uVe(n){const e={};n=(n.g&&2<=Ka(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(gv(n[r]))continue;var t=kUe(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function AUe(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,cs(12)):(this.s=0,cs(13)),Jd(this),Iv(this)}}}catch{}},Ae.mb=function(){if(this.g){var n=Ka(this.g),e=this.g.ja();this.o<e.length&&(cS(this),ZZ(this,n,e),this.i&&4!=n&&Sv(this))}},Ae.cancel=function(){this.J=!0,Jd(this)},Ae.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function zUe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(wv(),cs(17)),Jd(this),this.s=2,Iv(this)):JZ(this,this.Y-n)};var tJ=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eh(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof eh){this.h=n.h,lS(this,n.j),this.s=n.s,this.g=n.g,uS(this,n.m),this.l=n.l;var e=n.i,t=new Mv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),nJ(this,t),this.o=n.o}else n&&(e=String(n).match(tJ))?(this.h=!1,lS(this,e[1]||"",!0),this.s=Cv(e[2]||""),this.g=Cv(e[3]||"",!0),uS(this,e[4]),this.l=Cv(e[5]||"",!0),nJ(this,e[6]||"",!0),this.o=Cv(e[7]||"")):(this.h=!1,this.i=new Mv(null,this.h))}function Qc(n){return new eh(n)}function lS(n,e,t){n.j=t?Cv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nJ(n,e,t){e instanceof Mv?(n.i=e,function JUe(n,e){e&&!n.j&&(du(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(iJ(this,r),oJ(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Av(e,QUe)),n.i=new Mv(e,n.h))}function Vn(n,e,t){n.i.set(e,t)}function dS(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Av(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,KUe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function KUe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}eh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Av(e,rJ,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Av(e,rJ,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Av(t,"/"==t.charAt(0)?XUe:YUe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Av(t,ZUe)),n.join("")};var rJ=/[#\/\?@]/g,YUe=/[#\?:]/g,XUe=/[#\?]/g,QUe=/[#\?@]/g,ZUe=/#/g;function Mv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function du(n){n.g||(n.g=new Map,n.h=0,n.i&&function qUe(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function iJ(n,e){du(n),e=ug(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function sJ(n,e){return du(n),e=ug(n,e),n.g.has(e)}function oJ(n,e,t){iJ(n,e),0<t.length&&(n.i=null,n.g.set(ug(n,e),TL(t)),n.h+=t.length)}function ug(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aJ(n){this.l=n||tVe,n=ft.PerformanceNavigationTiming?0<(n=ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ft.g&&ft.g.Ka&&ft.g.Ka()&&ft.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ae=Mv.prototype).add=function(n,e){du(this),this.i=null,n=ug(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ae.forEach=function(n,e){du(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ae.ta=function(){du(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Ae.Z=function(n){du(this);let e=[];if("string"==typeof n)sJ(this,n)&&(e=e.concat(this.g.get(ug(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ae.set=function(n,e){return du(this),this.i=null,sJ(this,n=ug(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ae.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var tVe=10;function cJ(n){return!!n.h||!!n.g&&n.g.size>=n.j}function lJ(n){return n.h?1:n.g?n.g.size:0}function XL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function QL(n,e){n.g?n.g.add(e):n.h=e}function uJ(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dJ(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return TL(n.i)}aJ.prototype.cancel=function(){if(this.i=dJ(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var nVe=class{stringify(n){return ft.JSON.stringify(n,void 0)}parse(n){return ft.JSON.parse(n,void 0)}};function rVe(){this.g=new nVe}function iVe(n,e,t){const r=t||"";try{eJ(n,function(i,s){let o=i;pv(i)&&(o=VL(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Rv(n){this.l=n.ec||null,this.j=n.ob||!1}function fS(n,e){ii.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ZL,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ri(Rv,GL),Rv.prototype.g=function(){return new fS(this.l,this.j)},Rv.prototype.i=function(n){return function(){return n}}({}),ri(fS,ii);var ZL=0;function hJ(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Pv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Dv(n)}function Dv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ae=fS.prototype).open=function(n,e){if(this.readyState!=ZL)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Dv(this)},Ae.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pv(this)),this.readyState=ZL},Ae.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Dv(this)),this.g&&(this.readyState=3,Dv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hJ(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ae.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pv(this):Dv(this),3==this.readyState&&hJ(this)}},Ae.Za=function(n){this.g&&(this.response=this.responseText=n,Pv(this))},Ae.Ya=function(n){this.g&&(this.response=n,Pv(this))},Ae.ka=function(){this.g&&Pv(this)},Ae.setRequestHeader=function(n,e){this.v.append(n,e)},Ae.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ae.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oVe=ft.JSON.parse;function ur(n){ii.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fJ,this.L=this.M=!1}ri(ur,ii);var fJ="",aVe=/^https?$/i,cVe=["POST","PUT"];function pJ(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,gJ(n),pS(n)}function gJ(n){n.F||(n.F=!0,Ei(n,"complete"),Ei(n,"error"))}function mJ(n){if(n.h&&typeof EL<"u"&&(!n.C[1]||4!=Ka(n)||2!=n.da()))if(n.v&&4==Ka(n))HL(n.La,0,n);else if(Ei(n,"readystatechange"),4==Ka(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(tJ)[1]||null;!i&&ft.self&&ft.self.location&&(i=ft.self.location.protocol.slice(0,-1)),r=!aVe.test(i?i.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var s=2<Ka(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",gJ(n)}}finally{pS(n)}}}function pS(n,e){if(n.g){_J(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function _J(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ft.clearTimeout(n.A),n.A=null)}function Ka(n){return n.g?n.g.readyState:0}function yJ(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case fJ:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vJ(n){let e="";return RL(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function JL(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=vJ(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function Nv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function EJ(n){this.Ga=0,this.j=[],this.l=new iS,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Nv("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Nv("baseRetryDelayMs",5e3,n),this.hb=Nv("retryDelaySeedMs",1e4,n),this.eb=Nv("forwardChannelMaxRetries",2,n),this.xa=Nv("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new aJ(n&&n.concurrentRequestLimit),this.Ja=new rVe,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function eF(n){if(wJ(n),3==n.H){var e=n.W++,t=Qc(n.I);if(Vn(t,"SID",n.K),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),Ov(n,t),(e=new xv(n,n.l,e)).L=2,e.A=dS(Qc(t)),t=!1,ft.navigator&&ft.navigator.sendBeacon)try{t=ft.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&ft.Image&&((new Image).src=e.A,t=!0),t||(e.g=RJ(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Sv(e)}AJ(n)}function gS(n){n.g&&(nF(n),n.g.cancel(),n.g=null)}function wJ(n){gS(n),n.u&&(ft.clearTimeout(n.u),n.u=null),_S(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ft.clearTimeout(n.m),n.m=null)}function mS(n){if(!cJ(n.i)&&!n.m){n.m=!0;var e=n.Na;yv||LZ(),vv||(yv(),vv=!0),BL.add(e,n),n.C=0}}function TJ(n,e){var t;t=e?e.m:n.W++;const r=Qc(n.I);Vn(r,"SID",n.K),Vn(r,"RID",t),Vn(r,"AID",n.V),Ov(n,r),n.o&&n.s&&JL(r,n.o,n.s),t=new xv(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=bJ(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),QL(n.i,t),KL(t,r,e)}function Ov(n,e){n.na&&RL(n.na,function(t,r){Vn(e,r,t)}),n.h&&eJ({},function(t,r){Vn(e,r,t)})}function bJ(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ui(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let l=i[c].g;const u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{iVe(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function xJ(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;yv||LZ(),vv||(yv(),vv=!0),BL.add(e,n),n.A=0}}function tF(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Tv(Ui(n.Ma,n),CJ(n,n.A)),n.A++,0))}function nF(n){null!=n.B&&(ft.clearTimeout(n.B),n.B=null)}function SJ(n){n.g=new xv(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Qc(n.wa);Vn(e,"RID","rpc"),Vn(e,"SID",n.K),Vn(e,"AID",n.V),Vn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Vn(e,"TO",n.qa),Vn(e,"TYPE","xmlhttp"),Ov(n,e),n.o&&n.s&&JL(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=dS(Qc(e)),t.u=null,t.S=!0,XZ(t,n)}function _S(n){null!=n.v&&(ft.clearTimeout(n.v),n.v=null)}function IJ(n,e){var t=null;if(n.g==e){_S(n),nF(n),n.g=null;var r=2}else{if(!XL(n.i,e))return;t=e.F,uJ(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Ei(r=sS(),new WZ(r,t)),mS(n)}else xJ(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function dVe(n,e){return!(lJ(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Tv(Ui(n.Na,n,e),CJ(n,n.C)),n.C++,0)))}(n,e)||2==r&&tF(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:th(n,5);break;case 4:th(n,10);break;case 3:th(n,6);break;default:th(n,2)}}function CJ(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function th(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ui(n.pb,n);t||(t=new eh("//www.google.com/images/cleardot.gif"),ft.location&&"http"==ft.location.protocol||lS(t,"https"),dS(t)),function sVe(n,e){const t=new iS;if(ft.Image){const r=new Image;r.onload=Zx(hS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Zx(hS,t,r,"TestLoadImage: error",!1,e),r.onabort=Zx(hS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zx(hS,t,r,"TestLoadImage: timeout",!1,e),ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else cs(2);n.H=0,n.h&&n.h.za(e),AJ(n),wJ(n)}function AJ(n){if(n.H=0,n.ma=[],n.h){const e=dJ(n.i);(0!=e.length||0!=n.j.length)&&(TZ(n.ma,e),TZ(n.ma,n.j),n.i.i.length=0,TL(n.j),n.j.length=0),n.h.ya()}}function MJ(n,e,t){var r=t instanceof eh?Qc(t):new eh(t);if(""!=r.g)e&&(r.g=e+"."+r.g),uS(r,r.m);else{var i=ft.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new eh(null);r&&lS(s,r),e&&(s.g=e),i&&uS(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Vn(r,t,e),Vn(r,"VER",n.ra),Ov(n,r),r}function RJ(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(n.Ha&&!n.va?new Rv({ob:t}):n.va)).Oa(n.J),e}function PJ(){}function yS(){if(cg&&!(10<=Number(xUe)))throw Error("Environmental error: no available transport.")}function lo(n,e){ii.call(this),this.g=new EJ(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!gv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gv(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dg(this)}function DJ(n){WL.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function NJ(){$L.call(this),this.status=1}function dg(n){this.g=n}function aa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rF(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function dn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(Ae=ur.prototype).Oa=function(n){this.M=n},Ae.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jL.g(),this.C=function jZ(n){return n.h||(n.h=n.i())}(this.u?this.u:jL),this.g.onreadystatechange=Ui(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void pJ(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ft.FormData&&n instanceof ft.FormData,!(0<=wZ(cVe,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_J(this),0<this.B&&((this.L=function lVe(n){return cg&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ui(this.ua,this)):this.A=HL(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){pJ(this,s)}},Ae.ua=function(){typeof EL<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},Ae.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),pS(this))},Ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pS(this,!0)),ur.$.N.call(this)},Ae.La=function(){this.s||(this.G||this.v||this.l?mJ(this):this.kb())},Ae.kb=function(){mJ(this)},Ae.isActive=function(){return!!this.g},Ae.da=function(){try{return 2<Ka(this)?this.g.status:-1}catch{return-1}},Ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ae.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),oVe(e)}},Ae.Ia=function(){return this.m},Ae.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ae=EJ.prototype).ra=8,Ae.H=1,Ae.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new xv(this,this.l,n);let s=this.s;if(this.U&&(s?(s=CZ(s),MZ(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bJ(this,i,e),Vn(t=Qc(this.I),"RID",n),Vn(t,"CVER",22),this.F&&Vn(t,"X-HTTP-Session-Id",this.F),Ov(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(vJ(s)))+"&"+e:this.o&&JL(t,this.o,s)),QL(this.i,i),this.bb&&Vn(t,"TYPE","init"),this.P?(Vn(t,"$req",e),Vn(t,"SID","null"),i.aa=!0,KL(i,t,null)):KL(i,t,e),this.H=2}}else 3==this.H&&(n?TJ(this,n):0==this.j.length||cJ(this.i)||TJ(this))},Ae.Ma=function(){if(this.u=null,SJ(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Tv(Ui(this.jb,this),n)}},Ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,cs(10),gS(this),SJ(this))},Ae.ib=function(){null!=this.v&&(this.v=null,gS(this),tF(this),cs(19))},Ae.pb=function(n){n?(this.l.info("Successfully pinged google.com"),cs(2)):(this.l.info("Failed to ping google.com"),cs(1))},Ae.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ae=PJ.prototype).Ba=function(){},Ae.Aa=function(){},Ae.za=function(){},Ae.ya=function(){},Ae.isActive=function(){return!0},Ae.Va=function(){},yS.prototype.g=function(n,e){return new lo(n,e)},ri(lo,ii),lo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;cs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=MJ(n,null,n.Y),mS(n)},lo.prototype.close=function(){eF(this.g)},lo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=VL(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&mS(e)},lo.prototype.N=function(){this.g.h=null,delete this.j,eF(this.g),delete this.g,lo.$.N.call(this)},ri(DJ,WL),ri(NJ,$L),ri(dg,PJ),dg.prototype.Ba=function(){Ei(this.g,"a")},dg.prototype.Aa=function(n){Ei(this.g,new DJ(n))},dg.prototype.za=function(n){Ei(this.g,new NJ)},dg.prototype.ya=function(){Ei(this.g,"b")},ri(aa,function hVe(){this.blockSize=-1}),aa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},aa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)rF(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){rF(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){rF(this,r),i=0;break}}this.h=i,this.i+=e},aa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var fVe={};function iF(n){return-128<=n&&128>n?function wUe(n,e){var t=fVe;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new dn([0|e],0>e?-1:0)}):new dn([0|n],0>n?-1:0)}function Ya(n){if(isNaN(n)||!isFinite(n))return hg;if(0>n)return wi(Ya(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=sF;return new dn(e,0)}var sF=4294967296,hg=iF(0),oF=iF(1),kJ=iF(16777216);function Zc(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Lo(n){return-1==n.h}function wi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new dn(t,~n.h).add(oF)}function vS(n,e){return n.add(wi(e))}function ES(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function kv(n,e){this.g=n,this.h=e}function wS(n,e){if(Zc(e))throw Error("division by zero");if(Zc(n))return new kv(hg,hg);if(Lo(n))return e=wS(wi(n),e),new kv(wi(e.g),wi(e.h));if(Lo(e))return e=wS(n,wi(e)),new kv(wi(e.g),e.h);if(30<n.g.length){if(Lo(n)||Lo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=oF,r=e;0>=r.X(n);)t=LJ(t),r=LJ(r);var i=fg(t,1),s=fg(r,1);for(r=fg(r,2),t=fg(t,2);!Zc(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=fg(r,1),t=fg(t,1)}return e=vS(n,i.R(e)),new kv(i,e)}for(i=hg;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ya(t)).R(e);Lo(o)||0<o.X(n);)o=(s=Ya(t-=r)).R(e);Zc(s)&&(s=oF),i=i.add(s),n=vS(n,o)}return new kv(i,n)}function LJ(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new dn(t,n.h)}function fg(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new dn(i,n.h)}(Ae=dn.prototype).ea=function(){if(Lo(this))return-wi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:sF+r)*e,e*=sF}return n},Ae.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Zc(this))return"0";if(Lo(this))return"-"+wi(this).toString(n);for(var e=Ya(Math.pow(n,6)),t=this,r="";;){var i=wS(t,e).g,s=((0<(t=vS(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Zc(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Ae.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ae.X=function(n){return Lo(n=vS(this,n))?-1:Zc(n)?0:1},Ae.abs=function(){return Lo(this)?wi(this):this},Ae.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new dn(t,-2147483648&t[t.length-1]?-1:0)},Ae.R=function(n){if(Zc(this)||Zc(n))return hg;if(Lo(this))return Lo(n)?wi(this).R(wi(n)):wi(wi(this).R(n));if(Lo(n))return wi(this.R(wi(n)));if(0>this.X(kJ)&&0>n.X(kJ))return Ya(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,c=65535&n.D(i);t[2*r+2*i]+=o*c,ES(t,2*r+2*i),t[2*r+2*i+1]+=s*c,ES(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,ES(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,ES(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new dn(t,0)},Ae.gb=function(n){return wS(this,n).h},Ae.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new dn(t,this.h&n.h)},Ae.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new dn(t,this.h|n.h)},Ae.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new dn(t,this.h^n.h)},yS.prototype.createWebChannel=yS.prototype.g,lo.prototype.send=lo.prototype.u,lo.prototype.open=lo.prototype.m,lo.prototype.close=lo.prototype.close,oS.NO_ERROR=0,oS.TIMEOUT=8,oS.HTTP_ERROR=6,$Z.COMPLETE="complete",qZ.EventType=bv,bv.OPEN="a",bv.CLOSE="b",bv.ERROR="c",bv.MESSAGE="d",ii.prototype.listen=ii.prototype.O,ur.prototype.listenOnce=ur.prototype.P,ur.prototype.getLastError=ur.prototype.Sa,ur.prototype.getLastErrorCode=ur.prototype.Ia,ur.prototype.getStatus=ur.prototype.da,ur.prototype.getResponseJson=ur.prototype.Wa,ur.prototype.getResponseText=ur.prototype.ja,ur.prototype.send=ur.prototype.ha,ur.prototype.setWithCredentials=ur.prototype.Oa,aa.prototype.digest=aa.prototype.l,aa.prototype.reset=aa.prototype.reset,aa.prototype.update=aa.prototype.j,dn.prototype.add=dn.prototype.add,dn.prototype.multiply=dn.prototype.R,dn.prototype.modulo=dn.prototype.gb,dn.prototype.compare=dn.prototype.X,dn.prototype.toNumber=dn.prototype.ea,dn.prototype.toString=dn.prototype.toString,dn.prototype.getBits=dn.prototype.D,dn.fromNumber=Ya,dn.fromString=function OJ(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return wi(OJ(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ya(Math.pow(e,8)),r=hg,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=Ya(Math.pow(e,s)),r=r.R(s).add(Ya(o))):r=(r=r.R(t)).add(Ya(o))}return r},oa.createWebChannelTransport=function(){return new yS},oa.getStatEventTarget=function(){return sS()},oa.ErrorCode=oS,oa.EventType=$Z,oa.Event=Zd,oa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oa.FetchXmlHttpFactory=Rv,oa.WebChannel=qZ,oa.XhrIo=ur,oa.Md5=aa;var pVe=oa.Integer=dn;const FJ="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let Lv="10.7.0";const hu=new Yl("@firebase/firestore");function oe(n,...e){if(hu.logLevel<=Xt.DEBUG){const t=e.map(aF);hu.debug(`Firestore (${Lv}): ${n}`,...t)}}function wr(n,...e){if(hu.logLevel<=Xt.ERROR){const t=e.map(aF);hu.error(`Firestore (${Lv}): ${n}`,...t)}}function aF(n){if("string"==typeof n)return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Oe(n="Unexpected state"){const e=`FIRESTORE (${Lv}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function He(n,e){n||Oe()}const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends so{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class UJ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gVe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class mVe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _Ve{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(O(function*(){yield l.promise,yield s(r.currentUser)}))},c=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He("string"==typeof r.accessToken),new UJ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(null===e||"string"==typeof e),new si(e)}}class yVe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=si.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vVe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new yVe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EVe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He("string"==typeof t.token),this.R=t.token,new VJ(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wVe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class BJ{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=wVe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}class TS{constructor(e,t,r){void 0===t?t=0:t>e.length&&Oe(),void 0===r?r=e.length-t:r>e.length-t&&Oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===TS.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof TS?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends TS{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Kt.fromString(e))}static fromName(e){return new Se(Kt.fromString(e).popFirst(5))}static empty(){return new Se(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Kt(e.slice()))}}function pu(n){return"IndexedDbTransactionError"===n.name}class Rn{constructor(e,t){this.comparator=e,this.root=t||Ti.EMPTY}insert(e,t){return new Rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SS(this.root,e,this.comparator,!1)}getReverseIterator(){return new SS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SS(this.root,e,this.comparator,!0)}}class SS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ti{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ti.RED,this.left=i??Ti.EMPTY,this.right=s??Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ti(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1,Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ti(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tee(this.data.getIterator())}getIteratorFrom(e){return new tee(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class tee{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nee("Invalid base64 string: "+s):s}}(e);return new Wr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}Wr.EMPTY_BYTE_STRING=new Wr("");class KVe{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class sh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sh&&e.projectId===this.projectId&&e.database===this.database}}var Or,Yt;new Rn(Se.comparator),new Rn(Se.comparator),new Rn(Se.comparator),new yn(Se.comparator),new yn(lt),(Yt=Or||(Or={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS",new pVe([4294967295,4294967295],0);class fh{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),function Vv(n){return 0===n&&1/n==-1/0}(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(function Jc(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?function oee(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Oe()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const i of Object.keys(r))this.At(i,t),this.Pt(r[i],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const i of r)this.Pt(i,t)}ft(e,t){this.Tt(t,37),Se.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}fh.St=new fh,new Uint8Array(0);class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function QS(){return typeof document<"u"?document:null}zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class JF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class yU{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new yU(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class sze{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=si.UNAUTHENTICATED,this.clientId=BJ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=O(function*(a){oe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(oe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return O(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(O(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=function Vg(n,e){if(wr("AsyncQueue",`${e}: ${n}`),pu(n))return new se(G.UNAVAILABLE,`${e}: ${n}`);throw n}(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xne(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Sne=new Map;function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function iI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return"function"==typeof n?"a function":Oe()}(n);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class Mne{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function mze(n,e,t,r){if(!0===e&&!0===r)throw new se(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=xne(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mne({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mne(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new gVe;switch(r.type){case"firstParty":return new vVe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Sne.get(t);r&&(oe("ComponentProvider","Removing Datastore"),Sne.delete(t),r.terminate())}(this),Promise.resolve()}}class vze{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new JF(this,"async_queue_retry"),this.iu=()=>{const t=QS();t&&oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=QS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=QS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Gr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return O(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!pu(t))throw t;oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r);throw wr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const i=yU.createAndSchedule(this,e,t,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Oe()}verifyOperationInProgress(){}uu(){var e=this;return O(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}class Pn extends g0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vze,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||function Pne(n){var e,t,r;const i=n._freezeSettings(),s=function(a,c,l,u){return new KVe(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,xne(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new sze(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}(this),this._firestoreClient.terminate()}}function wze(n,e){const r="string"==typeof n?n:e||"(default)",i=Li("object"==typeof n?n:ea(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Mb("firestore");s&&function _ze(n,e,t,r={}){var i;const s=(n=zt(n,g0))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&function Fo(n,...e){if(hu.logLevel<=Xt.WARN){const t=e.map(aF);hu.warn(`Firestore (${Lv}): ${n}`,...t)}}("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=si.MOCK_USER;else{a=oD(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new si(l)}n._authCredentials=new mVe(new UJ(a,c))}}(i,...s)}return i}!function(e,t=!0){(function(i){Lv=i})(Gc),Hr(new Dr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Pn(new _Ve(r.getProvider("auth-internal")),new EVe(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sh(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Rt(FJ,"4.4.0",e),Rt(FJ,"4.4.0","esm2017")}();class pV{constructor(e){return e}}const gV=new De("angularfire2.firestore-instances");function Yze(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pV(r)}}const Xze={provide:class qze{constructor(){return Wa("firestore")}},deps:[[new Gt,gV]]},Qze={provide:pV,useFactory:function Kze(n,e){const t=Ga("firestore",n,e);return t&&new pV(t)},deps:[[new Gt,gV],co]};let Zze=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[Qze,Xze]})}return n})();function Jze(n,...e){return{ngModule:Zze,providers:[{provide:gV,useFactory:Yze(n),multi:!0,deps:[At,Nn,ia,sa,[new Gt,cv],[new Gt,ng],...e]}]}}const e4e=Os(wze,!0);class mV{constructor(e){return e}}const _V=new De("angularfire2.database-instances");function r4e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mV(r)}}const i4e={provide:class t4e{constructor(){return Wa("database")}},deps:[[new Gt,_V]]},s4e={provide:mV,useFactory:function n4e(n,e){const t=Ga("database",n,e);return t&&new mV(t)},deps:[[new Gt,_V],co]};let o4e=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"rtdb")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[s4e,i4e]})}return n})();function a4e(n,...e){return{ngModule:o4e,providers:[{provide:_V,useFactory:r4e(n),multi:!0,deps:[At,Nn,ia,sa,[new Gt,cv],[new Gt,ng],...e]}]}}const c4e=Os(vx,!0),vV="functions";class f4e{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return O(function*(){if(e.auth)try{const t=yield e.auth.getToken();return t?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return O(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var t=this;return O(function*(){if(t.appCheck){const r=e?yield t.appCheck.getLimitedUseToken():yield t.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var t=this;return O(function*(){return{authToken:yield t.getAuthToken(),messagingToken:yield t.getMessagingToken(),appCheckToken:yield t.getAppCheckToken(e)}})()}}const EV="us-central1";class g4e{constructor(e,t,r,i,s=EV,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new f4e(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=EV}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const ire="@firebase/functions";function S4e(n=ea(),e=EV){const r=Li(Ln(n),vV).getImmediate({identifier:e}),i=Mb("functions");return i&&function I4e(n,e,t){!function m4e(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}(Ln(n),e,t)}(r,...i),r}!function x4e(n,e){Hr(new Dr(vV,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),c=r.getProvider("app-check-internal");return new g4e(s,o,a,c,i,n)},"PUBLIC").setMultipleInstances(!0)),Rt(ire,"0.11.0",e),Rt(ire,"0.11.0","esm2017")}(fetch.bind(self));class bV{constructor(e){return e}}const xV=new De("angularfire2.functions-instances");function M4e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bV(r)}}const R4e={provide:class C4e{constructor(){return Wa("functions")}},deps:[[new Gt,xV]]},P4e={provide:bV,useFactory:function A4e(n,e){const t=Ga("functions",n,e);return t&&new bV(t)},deps:[[new Gt,xV],co]};let D4e=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"fn")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[P4e,R4e]})}return n})();function N4e(n,...e){return{ngModule:D4e,providers:[{provide:xV,useFactory:M4e(n),multi:!0,deps:[At,Nn,ia,sa,[new Gt,cv],[new Gt,ng],...e]}]}}const O4e=Os(S4e,!0),k4e="/firebase-messaging-sw.js",L4e="/firebase-cloud-messaging-push-scope",are="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",F4e="https://fcmregistrations.googleapis.com/v1",cre="google.c.a.c_id",U4e="google.c.a.c_l",V4e="google.c.a.ts";var mI=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(mI||{});function sl(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function H4e(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const SV="fcm_token_details_db",G4e=5,lre="fcm_token_object_Store";function IV(){return IV=O(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(SV))return null;let e=null;return(yield _D(SV,G4e,{upgrade:function(){var r=O(function*(i,s,o,a){var c;if(s<2||!i.objectStoreNames.contains(lre))return;const l=a.objectStore(lre),u=yield l.index("fcmSenderId").get(n);if(yield l.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:sl(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:sl(d.auth),p256dh:sl(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:sl(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:sl(d.auth),p256dh:sl(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:sl(d.vapidKey)}}}});return function(s,o,a,c){return r.apply(this,arguments)}}()})).close(),yield yD(SV),yield yD("fcm_vapid_details_db"),yield yD("undefined"),function $4e(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null}),IV.apply(this,arguments)}const j4e="firebase-messaging-database",q4e=1,Eh="firebase-messaging-store";let CV=null;function AV(){return CV||(CV=_D(j4e,q4e,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Eh)}})),CV}function ure(n){return MV.apply(this,arguments)}function MV(){return MV=O(function*(n){const e=NV(n),r=yield(yield AV()).transaction(Eh).objectStore(Eh).get(e);if(r)return r;{const i=yield function W4e(n){return IV.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield RV(n,i),i}}),MV.apply(this,arguments)}function RV(n,e){return PV.apply(this,arguments)}function PV(){return PV=O(function*(n,e){const t=NV(n),i=(yield AV()).transaction(Eh,"readwrite");return yield i.objectStore(Eh).put(e,t),yield i.done,e}),PV.apply(this,arguments)}function DV(){return DV=O(function*(n){const e=NV(n),r=(yield AV()).transaction(Eh,"readwrite");yield r.objectStore(Eh).delete(e),yield r.done}),DV.apply(this,arguments)}function NV({appConfig:n}){return n.appId}const xi=new Jo("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function X4e(n,e){return OV.apply(this,arguments)}function OV(){return OV=O(function*(n,e){const t=yield UV(n),r=hre(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(FV(n.appConfig),i)).json()}catch(o){throw xi.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw xi.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw xi.create("token-subscribe-no-token");return s.token}),OV.apply(this,arguments)}function kV(){return kV=O(function*(n,e){const t=yield UV(n),r=hre(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${FV(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw xi.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw xi.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw xi.create("token-update-no-token");return s.token}),kV.apply(this,arguments)}function dre(n,e){return LV.apply(this,arguments)}function LV(){return LV=O(function*(n,e){const r={method:"DELETE",headers:yield UV(n)};try{const s=yield(yield fetch(`${FV(n.appConfig)}/${e}`,r)).json();if(s.error)throw xi.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw xi.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}),LV.apply(this,arguments)}function FV({projectId:n}){return`${F4e}/projects/${n}/registrations`}function UV(n){return VV.apply(this,arguments)}function VV(){return VV=O(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),VV.apply(this,arguments)}function hre({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==are&&(i.web.applicationPubKey=r),i}const Z4e=6048e5;function BV(){return BV=O(function*(n){const e=yield function tHe(n,e){return WV.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:sl(e.getKey("auth")),p256dh:sl(e.getKey("p256dh"))},r=yield ure(n.firebaseDependencies);if(r){if(function nHe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+Z4e?function eHe(n,e){return HV.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield dre(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return pre(n.firebaseDependencies,t)}return pre(n.firebaseDependencies,t)}),BV.apply(this,arguments)}function zV(){return zV=O(function*(n){const e=yield ure(n.firebaseDependencies);e&&(yield dre(n.firebaseDependencies,e.token),yield function K4e(n){return DV.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),zV.apply(this,arguments)}function HV(){return HV=O(function*(n,e){try{const t=yield function Q4e(n,e){return kV.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield RV(n.firebaseDependencies,r),t}catch(t){throw yield function fre(n){return zV.apply(this,arguments)}(n),t}}),HV.apply(this,arguments)}function pre(n,e){return GV.apply(this,arguments)}function GV(){return GV=O(function*(n,e){const r={token:yield X4e(n,e),createTime:Date.now(),subscriptionOptions:e};return yield RV(n,r),r.token}),GV.apply(this,arguments)}function WV(){return WV=O(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:H4e(e)})}),WV.apply(this,arguments)}function gre(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function rHe(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function iHe(n,e){e.data&&(n.data=e.data)}(e,n),function sHe(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const c=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(e,n),e}function mre(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function $V(n){return xi.create("missing-app-config-values",{valueName:n})}mre("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mre("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cHe{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function aHe(n){if(!n||!n.options)throw $V("App Configuration Object");if(!n.name)throw $V("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw $V(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function jV(){return jV=O(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(k4e,{scope:L4e}),n.swRegistration.update().catch(()=>{})}catch(e){throw xi.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),jV.apply(this,arguments)}function qV(){return qV=O(function*(n,e){if(!e&&!n.swRegistration&&(yield function _re(n){return jV.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw xi.create("invalid-sw-registration");n.swRegistration=e}}),qV.apply(this,arguments)}function KV(){return KV=O(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=are)}),KV.apply(this,arguments)}function YV(){return YV=O(function*(n,e){if(!navigator)throw xi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xi.create("permission-blocked");return yield function uHe(n,e){return KV.apply(this,arguments)}(n,e?.vapidKey),yield function lHe(n,e){return qV.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function J4e(n){return BV.apply(this,arguments)}(n)}),YV.apply(this,arguments)}function XV(){return XV=O(function*(n,e,t){const r=function hHe(n){switch(n){case mI.NOTIFICATION_CLICKED:return"notification_open";case mI.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[cre],message_name:t[U4e],message_time:t[V4e],message_device_time:Math.floor(Date.now()/1e3)})}),XV.apply(this,arguments)}function QV(){return QV=O(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===mI.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(gre(t)):n.onMessageHandler.next(gre(t)));const r=t.data;(function oHe(n){return"object"==typeof n&&!!n&&cre in n})(r)&&"1"===r["google.c.a.e"]&&(yield function dHe(n,e,t){return XV.apply(this,arguments)}(n,t.messageType,r))}),QV.apply(this,arguments)}const vre="@firebase/messaging",pHe=n=>{const e=new cHe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function fHe(n,e){return QV.apply(this,arguments)}(e,t)),e},gHe=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function yre(n,e){return YV.apply(this,arguments)}(e,r)}};function wre(){return ZV.apply(this,arguments)}function ZV(){return(ZV=O(function*(){try{yield Up()}catch{return!1}return typeof window<"u"&&Vc()&&Rb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function vHe(n=ea()){return wre().then(e=>{if(!e)throw xi.create("unsupported-browser")},e=>{throw xi.create("indexed-db-unsupported")}),Li(Ln(n),"messaging").getImmediate()}!function mHe(){Hr(new Dr("messaging",pHe,"PUBLIC")),Hr(new Dr("messaging-internal",gHe,"PRIVATE")),Rt(vre,"0.12.5"),Rt(vre,"0.12.5","esm2017")}();class t3{constructor(e){return e}}const bre="__angularfire_symbol__messagingIsSupported",n3="__angularfire_symbol__messagingIsSupportedValue";globalThis[bre]||=wre().then(n=>globalThis[n3]=n).catch(()=>globalThis[n3]=!1);const _I={async:()=>globalThis[bre],sync:()=>{const n=globalThis[n3];if(void 0===n)throw new Error(W2("Messaging"));return n}},r3=new De("angularfire2.messaging-instances");function THe(n){return(e,t)=>{if(!_I.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new t3(r)}}const bHe={provide:class EHe{constructor(){return Wa("messaging")}},deps:[[new Gt,r3]]},xHe={provide:t3,useFactory:function wHe(n,e){if(!_I.sync())return null;const t=Ga("messaging",n,e);return t&&new t3(t)},deps:[[new Gt,r3],co]};let SHe=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"fcm")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[xHe,bHe,{provide:bf,useValue:_I.async,multi:!0}]})}return n})();function IHe(n,...e){return{ngModule:SHe,providers:[{provide:r3,useFactory:THe(n),multi:!0,deps:[At,Nn,ia,sa,...e]}]}}const CHe=Os(vHe,!0),xre="@firebase/performance",i3="0.6.4",Sre=i3,s3="FB-PERF-TRACE-MEASURE",Rre="@firebase/performance/config",Pre="@firebase/performance/configexpire",Dre="Performance",Si=new Jo("performance",Dre,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),tc=new Yl(Dre);let o3,Nre,Ore,c3;tc.logLevel=Xt.INFO;class ci{constructor(e){if(this.window=e,!e)throw Si.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&Rb()?!!Vc()||(tc.info("IndexedDB is not supported by current browswer"),!1):(tc.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const s of i.getEntries())t(s)}).observe({entryTypes:[e]})}static getInstance(){return void 0===o3&&(o3=new ci(Nre)),o3}}function a3(){return Ore}function kre(n,e){const t=n.length-e.length;if(t<0||t>1)throw Si.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class fo{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=kre("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=kre("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===c3&&(c3=new fo),c3}}var T0=function(n){return n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN",n}(T0||{});const kHe=["firebase_","google_","ga_"],LHe=new RegExp("^[a-zA-Z]\\w*$");function VHe(){const n=ci.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function Lre(){switch(ci.getInstance().document.visibilityState){case"visible":return T0.VISIBLE;case"hidden":return T0.HIDDEN;default:return T0.UNKNOWN}}function BHe(){const e=ci.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Fre(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Si.create("no app id");return t}const $He="0.0.1",la={loggingEnabled:!0},jHe="FIREBASE_INSTALLATIONS_AUTH";const XHe="Could not fetch config, will use default configs";function Ure(n){if(!n)return n;const e=fo.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0!==t.fpr_enabled?"true"===String(t.fpr_enabled):la.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):la.logSource&&(e.logSource=la.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:la.logEndPointUrl&&(e.logEndPointUrl=la.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:la.transportKey&&(e.transportKey=la.transportKey),void 0!==t.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):void 0!==la.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=la.networkRequestsSamplingRate),void 0!==t.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):void 0!==la.tracesSamplingRate&&(e.tracesSamplingRate=la.tracesSamplingRate),e.logTraceAfterSampling=Vre(e.tracesSamplingRate),e.logNetworkAfterSampling=Vre(e.networkRequestsSamplingRate),n}function Vre(n){return Math.random()<=n}let u3,l3=1;function Bre(n){return l3=2,u3=u3||function e5e(n){return function t5e(){const n=ci.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function NHe(n){const e=n.getId();return e.then(t=>{Ore=t}),e}(n.installations)).then(e=>function qHe(n,e){const t=function KHe(){const n=ci.getInstance().localStorage;if(!n)return;const e=n.getItem(Pre);if(!e||!function ZHe(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(Rre);if(t)try{return JSON.parse(t)}catch{return}}();return t?(Ure(t),Promise.resolve()):function QHe(n,e){return function OHe(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function GHe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Si.create("no project id");return t}(n.app),i=function WHe(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Si.create("no api key");return t}(n.app),o=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`${jHe} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Fre(n.app),app_version:Sre,sdk_version:$He})});return fetch(o).then(a=>{if(a.ok)return a.json();throw Si.create("RC response not ok")})}).catch(()=>{tc.info(XHe)})}(n,e).then(Ure).then(r=>function YHe(n){const e=ci.getInstance().localStorage;!n||!e||(e.setItem(Rre,JSON.stringify(n)),e.setItem(Pre,String(Date.now()+60*fo.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>zre(),()=>zre())}(n),u3}function zre(){l3=3}let h3,yI=3,Au=[],Gre=!1;function vI(n){setTimeout(()=>{if(0!==yI){if(!Au.length)return vI(1e4);!function s5e(){const n=Au.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function o5e(n,e){return function a5e(n){const e=fo.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||tc.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const s=t.logResponseDetails;Array.isArray(s)&&s.length>0&&"RETRY_REQUEST_LATER"===s[0].responseAction&&(Au=[...e,...Au],tc.info("Retry transport request later.")),yI=3,vI(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:fo.getInstance().logSource,log_event:e},n).catch(()=>{Au=[...n,...Au],yI--,tc.info(`Tries left: ${yI}.`),vI(1e4)})}()}},n)}function Wre(n,e){h3||(h3=function l5e(n){return(...e)=>{!function c5e(n){if(!n.eventTime||!n.message)throw Si.create("invalid cc log");Au=[...Au,n]}({message:n(...e),eventTime:Date.now()})}}(d5e)),h3(n,e)}function EI(n){const e=fo.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||ci.getInstance().requiredApisAvailable()&&(n.isAuto&&Lre()!==T0.VISIBLE||(function JHe(){return 3===l3}()?f3(n):Bre(n.performanceController).then(()=>f3(n),()=>f3(n))))}function f3(n){if(!a3())return;const e=fo.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>Wre(n,1),0)}function d5e(n,e){return 0===e?function h5e(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:$re(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function f5e(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:$re(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function $re(n){return{google_app_id:Fre(n),app_instance_id:a3(),web_app_info:{sdk_version:Sre,page_url:ci.getInstance().getUrl(),service_worker_status:VHe(),visibility_state:Lre(),effective_connection_type:BHe()},application_process_state:0}}const m5e=["_fp","_fcp","_fid"];class Mu{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=ci.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${s3}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Si.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Si.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),EI(this)}record(e,t,r){if(e<=0)throw Si.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Si.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));EI(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function _5e(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&m5e.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Si.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function y5e(n){const e=Math.floor(n);return e<n&&tc.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t??0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function zHe(n){return!(0===n.length||n.length>40||kHe.some(t=>n.startsWith(t))||!n.match(LHe))}(e),i=function HHe(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Si.create("invalid attribute name",{attributeName:e});if(!i)throw Si.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const s=ci.getInstance().getUrl();if(!s)return;const o=new Mu(e,"_wt_"+s,!0),a=Math.floor(1e3*ci.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const u=r.find(h=>"first-paint"===h.name);u&&u.startTime&&o.putMetric("_fp",Math.floor(1e3*u.startTime));const d=r.find(h=>"first-contentful-paint"===h.name);d&&d.startTime&&o.putMetric("_fcp",Math.floor(1e3*d.startTime)),i&&o.putMetric("_fid",Math.floor(1e3*i))}EI(o)}static createUserTimingTrace(e,t){EI(new Mu(e,t,!1,t))}}function jre(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=ci.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),s=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function u5e(n){const e=fo.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>Wre(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}function qre(n){a3()&&(setTimeout(()=>function w5e(n){const e=ci.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{Mu.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),Mu.createOobTrace(n,t,r,s))})}else Mu.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function E5e(n){const e=ci.getInstance(),t=e.getEntriesByType("resource");for(const r of t)jre(n,r);e.setupObserver("resource",r=>jre(n,r))}(n),0),setTimeout(()=>function T5e(n){const e=ci.getInstance(),t=e.getEntriesByType("measure");for(const r of t)Kre(n,r);e.setupObserver("measure",r=>Kre(n,r))}(n),0))}function Kre(n,e){const t=e.name;t.substring(0,s3.length)!==s3&&Mu.createUserTimingTrace(n,t)}class b5e{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==e?.dataCollectionEnabled&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==e?.instrumentationEnabled&&(this.instrumentationEnabled=e.instrumentationEnabled),ci.getInstance().requiredApisAvailable()?Up().then(t=>{t&&(function i5e(){Gre||(vI(5500),Gre=!0)}(),Bre(this).then(()=>qre(this),()=>qre(this)),this.initialized=!0)}).catch(t=>{tc.info(`Environment doesn't support IndexedDB: ${t}`)}):tc.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){fo.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return fo.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){fo.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return fo.getInstance().dataCollectionEnabled}}function S5e(n=ea()){return Li(n=Ln(n),"performance").getImmediate()}const I5e=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Si.create("FB not default");if(typeof window>"u")throw Si.create("no window");!function DHe(n){Nre=n}(window);const i=new b5e(t,r);return i._init(e),i};!function C5e(){Hr(new Dr("performance",I5e,"PUBLIC")),Rt(xre,i3),Rt(xre,i3,"esm2017")}();class p3{constructor(e){return e}}const Yre="performance",g3=new De("angularfire2.performance-instances");function R5e(n){return(e,t,r)=>{if(!O6(t))return null;const i=e.runOutsideAngular(()=>n(r));return new p3(i)}}const P5e={provide:class A5e{constructor(){return Wa(Yre)}},deps:[[new Gt,g3]]},D5e={provide:p3,useFactory:function M5e(n,e,t){if(!O6(t))return null;const r=Ga(Yre,n,e);return r&&new p3(r)},deps:[[new Gt,g3],co,Go]};let N5e=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"perf")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[D5e,P5e]})}return n})();function O5e(n,...e){return{ngModule:N5e,providers:[{provide:g3,useFactory:R5e(n),multi:!0,deps:[At,Go,Nn,ia,sa,...e]}]}}const k5e=Os(S5e,!0),Xre="firebasestorage.googleapis.com";class Jn extends so{constructor(e,t,r=0){super(m3(e),`Firebase Storage: ${t} (${m3(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return m3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var $n=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}($n||{});function m3(n){return"storage/"+n}function y3(n){return new Jn($n.INVALID_ARGUMENT,n)}function tie(){return new Jn($n.APP_DELETED,"The Firebase app was deleted.")}class us{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=us.makeFromUrl(e,t)}catch{return new us(e,"")}if(""===r.path)return r;throw function $5e(n){return new Jn($n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(E){E.path_=decodeURIComponent(E.path)}const d=t.replace(/[.]/g,"\\."),v=[{regex:a,indices:{bucket:1,path:3},postModify:function s(E){"/"===E.path.charAt(E.path.length-1)&&(E.path_=E.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===Xre?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<v.length;E++){const w=v[E],b=w.regex.exec(e);if(b){let A=b[w.indices.path];A||(A=""),r=new us(b[w.indices.bucket],A),w.postModify(r);break}}if(null==r)throw function W5e(n){return new Jn($n.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Q5e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function E3(n,e,t,r){if(r<e)throw y3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw y3(`Invalid value for '${n}'. Expected ${t} or less.`)}var Qg=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Qg||{});class rGe{constructor(e,t,r,i,s,o,a,c,l,u,d,h=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function eGe(n){return void 0!==n}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=function _3(){return new Jn($n.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?tie():function Jre(){return new Jn($n.CANCELED,"User canceled the upload/download.")}():function Zre(){return new Jn($n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new TI(!1,null,!0)):this.backoffId_=function Z5e(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...m){l||(l=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,n(f,c())},m)}function h(){s&&clearTimeout(s)}function f(m,..._){if(l)return void h();if(m)return h(),void u.call(null,m,..._);if(c()||o)return h(),void u.call(null,m,..._);let v;r<64&&(r*=2),1===a?(a=2,v=0):v=1e3*(r+Math.random()),d(v)}let p=!1;function g(m){p||(p=!0,h(),!l&&(null!==i?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},t),g}((r,i)=>{if(i)return void r(!1,new TI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Qg.NO_ERROR,c=s.getStatus();if(!a||function iie(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Qg.ABORT;return void r(!1,new TI(!1,null,u))}const l=-1!==this.successCodes_.indexOf(c);r(!0,new TI(l,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function J5e(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class TI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class wh{constructor(e,t){this._service=e,this._location=t instanceof us?t:us.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wh(e,t)}get root(){const e=new us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function lie(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function _Ge(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new us(this._location.bucket,e);return new wh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function X5e(n){return new Jn($n.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function xie(n,e){const t=e?.storageBucket;return null==t?null:us.makeFromBucketSpec(t,n)}class C3{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Xre,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?us.makeFromBucketSpec(i,this._host):xie(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?us.makeFromBucketSpec(this._url,e):xie(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return O(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return O(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wh(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new Q5e(tie());{const o=function cGe(n,e,t,r,i,s,o=!0){const a=function rie(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return function oGe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function iGe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function sGe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,s),function aGe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new rGe(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return O(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Sie="@firebase/storage";function nWe(n=ea(),e){const r=Li(n=Ln(n),"storage").getImmediate({identifier:e}),i=Mb("storage");return i&&function rWe(n,e,t,r={}){!function tWe(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:oD(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function iWe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new C3(t,r,i,e,Gc)}!function sWe(){Hr(new Dr("storage",iWe,"PUBLIC").setMultipleInstances(!0)),Rt(Sie,"0.12.0",""),Rt(Sie,"0.12.0","esm2017")}();class A3{constructor(e){return e}}const M3=new De("angularfire2.storage-instances");function cWe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new A3(r)}}const lWe={provide:class oWe{constructor(){return Wa("storage")}},deps:[[new Gt,M3]]},uWe={provide:A3,useFactory:function aWe(n,e){const t=Ga("storage",n,e);return t&&new A3(t)},deps:[[new Gt,M3],co]};let dWe=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[uWe,lWe]})}return n})();function hWe(n,...e){return{ngModule:dWe,providers:[{provide:M3,useFactory:cWe(n),multi:!0,deps:[At,Nn,ia,sa,[new Gt,cv],[new Gt,ng],...e]}]}}const fWe=Os(nWe,!0),R3="@firebase/remote-config",Rie="remote-config",Us=new Jo("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function EWe(n=ea()){return Li(n=Ln(n),Rie).getImmediate()}class SWe{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return O(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function IWe(n=navigator){return n.languages&&n.languages[0]||n.language}class CWe{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return O(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:IWe()},l={method:"POST",headers:a,body:JSON.stringify(c)},u=fetch(o,l),d=new Promise((_,y)=>{e.signal.addEventListener(()=>{const v=new Error("The operation was aborted.");v.name="AbortError",y(v)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(_){let y="fetch-client-network";throw"AbortError"===_?.name&&(y="fetch-timeout"),Us.create(y,{originalErrorMessage:_?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let _;try{_=yield h.json()}catch(y){throw Us.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=_.entries,m=_.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw Us.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class RWe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return O(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return O(function*(){yield function AWe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Us.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function MWe(n){if(!(n instanceof so&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+Ob(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class NWe{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function CI(n,e){const t=n.target.error||void 0;return Us.create(e,{originalErrorMessage:t&&t?.message})}const Th="app_namespace_store";class FWe{constructor(e,t,r,i=function LWe(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(CI(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Th,{keyPath:"compositeKey"})}}catch(t){e(Us.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return O(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Th],"readonly").objectStore(Th),c=t.createCompositeKey(e);try{const l=a.get(c);l.onerror=u=>{s(CI(u,"storage-get"))},l.onsuccess=u=>{const d=u.target.result;i(d?d.value:void 0)}}catch(l){s(Us.create("storage-get",{originalErrorMessage:l?.message}))}})})()}set(e,t){var r=this;return O(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const c=i.transaction([Th],"readwrite").objectStore(Th),l=r.createCompositeKey(e);try{const u=c.put({compositeKey:l,value:t});u.onerror=d=>{o(CI(d,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){o(Us.create("storage-set",{originalErrorMessage:u?.message}))}})})()}delete(e){var t=this;return O(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Th],"readwrite").objectStore(Th),c=t.createCompositeKey(e);try{const l=a.delete(c);l.onerror=u=>{s(CI(u,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s(Us.create("storage-delete",{originalErrorMessage:l?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class UWe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return O(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function BWe(){return k3.apply(this,arguments)}function k3(){return(k3=O(function*(){if(!Vc())return!1;try{return yield Up()}catch{return!1}})).apply(this,arguments)}!function VWe(){Hr(new Dr(Rie,function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Us.create("registration-window");if(!Vc())throw Us.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Us.create("registration-project-id");if(!o)throw Us.create("registration-api-key");if(!a)throw Us.create("registration-app-id");const c=new FWe(a,r.name,t=t||"firebase"),l=new UWe(c),u=new Yl(R3);u.logLevel=Xt.ERROR;const d=new CWe(i,Gc,t,s,o,a),h=new RWe(d,c),f=new SWe(h,c,l,u),p=new NWe(r,f,l,c,u);return function TWe(n){const e=Ln(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Rt(R3,"0.4.4"),Rt(R3,"0.4.4","esm2017")}();class L3{constructor(e){return e}}const Die="remote-config",F3="__angularfire_symbol__remoteConfigIsSupportedValue",Nie="__angularfire_symbol__remoteConfigIsSupported";globalThis[Nie]||=BWe().then(n=>globalThis[F3]=n).catch(()=>globalThis[F3]=!1);const AI={async:()=>globalThis[Nie],sync:()=>{const n=globalThis[F3];if(void 0===n)throw new Error(W2("RemoteConfig"));return n}},U3=new De("angularfire2.remote-config-instances");function GWe(n){return(e,t)=>{if(!AI.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new L3(r)}}const WWe={provide:class zWe{constructor(){return Wa(Die)}},deps:[[new Gt,U3]]},$We={provide:L3,useFactory:function HWe(n,e){if(!AI.sync())return null;const t=Ga(Die,n,e);return t&&new L3(t)},deps:[[new Gt,U3],co]};let jWe=(()=>{class n{constructor(){Rt("angularfire",Ns.full,"rc")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jr({type:n});static \u0275inj=Lr({providers:[$We,WWe,{provide:bf,useValue:AI.async,multi:!0}]})}return n})();function qWe(n,...e){return{ngModule:jWe,providers:[{provide:U3,useFactory:GWe(n),multi:!0,deps:[At,Nn,ia,sa,...e]}]}}const KWe=Os(EWe,!0);let YWe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jr({type:n,bootstrap:[Ex]});static#n=this.\u0275inj=Lr({providers:[tZ,Kk],imports:[J_e,F2e,tke(()=>nke({projectId:"octimal-91c7f",appId:"1:1041726499189:web:593e42b7e42a7815674b3c",databaseURL:"https://octimal-91c7f-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"octimal-91c7f.appspot.com",apiKey:"AIzaSyDakZAuft5DD64IC2-adIS4KWHa58H6qJk",authDomain:"octimal-91c7f.firebaseapp.com",messagingSenderId:"1041726499189",measurementId:"G-YW4EHXSKNV"})),uke(()=>hke()),EFe(()=>ZLe()),hUe(()=>{const t=new mL("6LfdqSQpAAAAAPCbded3kBVqzmT0N5pBR88ToMyN");return fUe(void 0,{provider:t,isTokenAutoRefreshEnabled:!0})}),Jze(()=>e4e()),a4e(()=>c4e()),N4e(()=>O4e()),IHe(()=>CHe()),O5e(()=>k5e()),hWe(()=>fWe()),qWe(()=>KWe())]})}return n})();oC(Ex,function(){return[s_,wx,cQ]},[]),oC(wx,function(){return[C6,s_,NN]},[]),Q_e().bootstrapModule(YWe).catch(n=>console.error(n))}},pn=>{pn(pn.s=398)}]);